(self.webpackChunkem_guide_app=self.webpackChunkem_guide_app||[]).push([[4514],{7018:he=>{"use strict";he.exports=$;var ve="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",p="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",a=new RegExp("^[^"+p+"]*["+ve+"]"),g=new RegExp("^[^"+ve+"]*["+p+"]");function $(_){return _=String(_||""),a.test(_)?"rtl":g.test(_)?"ltr":"neutral"}},62549:(he,ve)=>{"use strict";var p;p={value:!0};for(var a=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),g={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},$={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:a?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},_={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},ee=1;ee<20;ee++)_["f"+ee]=111+ee;function T(de,xe,me){xe&&!("byKey"in xe)&&(me=xe,xe=null),Array.isArray(de)||(de=[de]);var ye=de.map(function(Oe){return pe(Oe,xe)}),we=function(Ze){return ye.some(function(Ge){return Te(Ge,Ze)})},De=me==null?we:we(me);return De}function L(de,xe){return T(de,xe)}function Ce(de,xe){return T(de,{byKey:!0},xe)}function pe(de,xe){var me=xe&&xe.byKey,ye={};de=de.replace("++","+add");var we=de.split("+"),De=we.length;for(var Oe in g)ye[g[Oe]]=!1;var Ze=!0,Ge=!1,lt=void 0;try{for(var wt=we[Symbol.iterator](),mt;!(Ze=(mt=wt.next()).done);Ze=!0){var ut=mt.value,vt=ut.endsWith("?")&&ut.length>1;vt&&(ut=ut.slice(0,-1));var Lt=be(ut),Vt=g[Lt];(De===1||!Vt)&&(me?ye.key=Lt:ye.which=Pe(ut)),Vt&&(ye[Vt]=vt?null:!0)}}catch(Ct){Ge=!0,lt=Ct}finally{try{!Ze&&wt.return&&wt.return()}finally{if(Ge)throw lt}}return ye}function Te(de,xe){for(var me in de){var ye=de[me],we=void 0;if(ye!=null&&(me==="key"&&xe.key!=null?we=xe.key.toLowerCase():me==="which"?we=ye===91&&xe.which===93?91:xe.which:we=xe[me],!(we==null&&ye===!1)&&we!==ye))return!1}return!0}function Pe(de){de=be(de);var xe=_[de]||de.toUpperCase().charCodeAt(0);return xe}function be(de){return de=de.toLowerCase(),de=$[de]||de,de}p=T,ve.P6=T,p=L,p=Ce,p=pe,p=Te,p=Pe,p=be},10806:he=>{function ve(p,a,g,$){for(var _=-1,ee=p==null?0:p.length;++_<ee;){var T=p[_];a($,T,g(T),p)}return $}he.exports=ve},80698:(he,ve,p)=>{var a=p(40564);function g($,_){var ee=$==null?0:$.length;return!!ee&&a($,_,0)>-1}he.exports=g},57436:he=>{function ve(p,a,g){for(var $=-1,_=p==null?0:p.length;++$<_;)if(g(a,p[$]))return!0;return!1}he.exports=ve},27624:(he,ve,p)=>{var a=p(54805),g=a("length");he.exports=g},24011:(he,ve,p)=>{var a=p(87685);function g($,_,ee,T){return a($,function(L,Ce,pe){_(T,L,ee(L),pe)}),T}he.exports=g},87685:(he,ve,p)=>{var a=p(28422),g=p(69860),$=g(a);he.exports=$},96643:he=>{function ve(p,a,g,$){for(var _=p.length,ee=g+($?1:-1);$?ee--:++ee<_;)if(a(p[ee],ee,p))return ee;return-1}he.exports=ve},40564:(he,ve,p)=>{var a=p(96643),g=p(98386),$=p(41814);function _(ee,T,L){return T===T?$(ee,T,L):a(ee,g,L)}he.exports=_},98386:he=>{function ve(p){return p!==p}he.exports=ve},48949:(he,ve,p)=>{var a=p(87685),g=p(41182);function $(_,ee){var T=-1,L=g(_)?Array(_.length):[];return a(_,function(Ce,pe,Te){L[++T]=ee(Ce,pe,Te)}),L}he.exports=$},91959:(he,ve,p)=>{var a=p(41710),g=p(64723),$=p(52536),_=p(48949),ee=p(3130),T=p(130),L=p(27973),Ce=p(10409),pe=p(28768);function Te(Pe,be,de){be.length?be=a(be,function(ye){return pe(ye)?function(we){return g(we,ye.length===1?ye[0]:ye)}:ye}):be=[Ce];var xe=-1;be=a(be,T($));var me=_(Pe,function(ye,we,De){var Oe=a(be,function(Ze){return Ze(ye)});return{criteria:Oe,index:++xe,value:ye}});return ee(me,function(ye,we){return L(ye,we,de)})}he.exports=Te},3130:he=>{function ve(p,a){var g=p.length;for(p.sort(a);g--;)p[g]=p[g].value;return p}he.exports=ve},75909:(he,ve,p)=>{var a=p(47081),g=p(80698),$=p(57436),_=p(43568),ee=p(21549),T=p(50078),L=200;function Ce(pe,Te,Pe){var be=-1,de=g,xe=pe.length,me=!0,ye=[],we=ye;if(Pe)me=!1,de=$;else if(xe>=L){var De=Te?null:ee(pe);if(De)return T(De);me=!1,de=_,we=new a}else we=Te?[]:ye;e:for(;++be<xe;){var Oe=pe[be],Ze=Te?Te(Oe):Oe;if(Oe=Pe||Oe!==0?Oe:0,me&&Ze===Ze){for(var Ge=we.length;Ge--;)if(we[Ge]===Ze)continue e;Te&&we.push(Ze),ye.push(Oe)}else de(we,Ze,Pe)||(we!==ye&&we.push(Ze),ye.push(Oe))}return ye}he.exports=Ce},32330:(he,ve,p)=>{var a=p(24160);function g($,_){if($!==_){var ee=$!==void 0,T=$===null,L=$===$,Ce=a($),pe=_!==void 0,Te=_===null,Pe=_===_,be=a(_);if(!Te&&!be&&!Ce&&$>_||Ce&&pe&&Pe&&!Te&&!be||T&&pe&&Pe||!ee&&Pe||!L)return 1;if(!T&&!Ce&&!be&&$<_||be&&ee&&L&&!T&&!Ce||Te&&ee&&L||!pe&&L||!Pe)return-1}return 0}he.exports=g},27973:(he,ve,p)=>{var a=p(32330);function g($,_,ee){for(var T=-1,L=$.criteria,Ce=_.criteria,pe=L.length,Te=ee.length;++T<pe;){var Pe=a(L[T],Ce[T]);if(Pe){if(T>=Te)return Pe;var be=ee[T];return Pe*(be=="desc"?-1:1)}}return $.index-_.index}he.exports=g},81947:(he,ve,p)=>{var a=p(10806),g=p(24011),$=p(52536),_=p(28768);function ee(T,L){return function(Ce,pe){var Te=_(Ce)?a:g,Pe=L?L():{};return Te(Ce,T,$(pe,2),Pe)}}he.exports=ee},69860:(he,ve,p)=>{var a=p(41182);function g($,_){return function(ee,T){if(ee==null)return ee;if(!a(ee))return $(ee,T);for(var L=ee.length,Ce=_?L:-1,pe=Object(ee);(_?Ce--:++Ce<L)&&T(pe[Ce],Ce,pe)!==!1;);return ee}}he.exports=g},21549:(he,ve,p)=>{var a=p(88557),g=p(53616),$=p(50078),_=1/0,ee=a&&1/$(new a([,-0]))[1]==_?function(T){return new a(T)}:g;he.exports=ee},41814:he=>{function ve(p,a,g){for(var $=g-1,_=p.length;++$<_;)if(p[$]===a)return $;return-1}he.exports=ve},23975:(he,ve,p)=>{var a=p(27624),g=p(70230),$=p(79763);function _(ee){return g(ee)?$(ee):a(ee)}he.exports=_},79763:he=>{var ve="\\ud800-\\udfff",p="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",g="\\u20d0-\\u20ff",$=p+a+g,_="\\ufe0e\\ufe0f",ee="["+ve+"]",T="["+$+"]",L="\\ud83c[\\udffb-\\udfff]",Ce="(?:"+T+"|"+L+")",pe="[^"+ve+"]",Te="(?:\\ud83c[\\udde6-\\uddff]){2}",Pe="[\\ud800-\\udbff][\\udc00-\\udfff]",be="\\u200d",de=Ce+"?",xe="["+_+"]?",me="(?:"+be+"(?:"+[pe,Te,Pe].join("|")+")"+xe+de+")*",ye=xe+de+me,we="(?:"+[pe+T+"?",T,Te,Pe,ee].join("|")+")",De=RegExp(L+"(?="+L+")|"+we+ye,"g");function Oe(Ze){for(var Ge=De.lastIndex=0;De.test(Ze);)++Ge;return Ge}he.exports=Oe},29577:(he,ve,p)=>{var a=p(95721),g=p(36268),$=p(30913),_="Expected a function",ee=Math.max,T=Math.min;function L(Ce,pe,Te){var Pe,be,de,xe,me,ye,we=0,De=!1,Oe=!1,Ze=!0;if(typeof Ce!="function")throw new TypeError(_);pe=$(pe)||0,a(Te)&&(De=!!Te.leading,Oe="maxWait"in Te,de=Oe?ee($(Te.maxWait)||0,pe):de,Ze="trailing"in Te?!!Te.trailing:Ze);function Ge(tt){var Dt=Pe,Ht=be;return Pe=be=void 0,we=tt,xe=Ce.apply(Ht,Dt),xe}function lt(tt){return we=tt,me=setTimeout(ut,pe),De?Ge(tt):xe}function wt(tt){var Dt=tt-ye,Ht=tt-we,rn=pe-Dt;return Oe?T(rn,de-Ht):rn}function mt(tt){var Dt=tt-ye,Ht=tt-we;return ye===void 0||Dt>=pe||Dt<0||Oe&&Ht>=de}function ut(){var tt=g();if(mt(tt))return vt(tt);me=setTimeout(ut,wt(tt))}function vt(tt){return me=void 0,Ze&&Pe?Ge(tt):(Pe=be=void 0,xe)}function Lt(){me!==void 0&&clearTimeout(me),we=0,Pe=ye=be=me=void 0}function Vt(){return me===void 0?xe:vt(g())}function Ct(){var tt=g(),Dt=mt(tt);if(Pe=arguments,be=this,ye=tt,Dt){if(me===void 0)return lt(ye);if(Oe)return clearTimeout(me),me=setTimeout(ut,pe),Ge(ye)}return me===void 0&&(me=setTimeout(ut,pe)),xe}return Ct.cancel=Lt,Ct.flush=Vt,Ct}he.exports=L},96022:(he,ve,p)=>{var a=p(41342),g=p(53648);function $(_,ee){return a(g(_,ee),1)}he.exports=$},80649:(he,ve,p)=>{var a=p(8038),g=p(81947),$=Object.prototype,_=$.hasOwnProperty,ee=g(function(T,L,Ce){_.call(T,Ce)?T[Ce].push(L):a(T,Ce,[L])});he.exports=ee},26253:(he,ve,p)=>{var a=p(30013),g=p(28768),$=p(78905),_="[object String]";function ee(T){return typeof T=="string"||!g(T)&&$(T)&&a(T)==_}he.exports=ee},53648:(he,ve,p)=>{var a=p(41710),g=p(52536),$=p(48949),_=p(28768);function ee(T,L){var Ce=_(T)?a:$;return Ce(T,g(L,3))}he.exports=ee},53616:he=>{function ve(){}he.exports=ve},36268:(he,ve,p)=>{var a=p(92970),g=function(){return a.Date.now()};he.exports=g},181:(he,ve,p)=>{var a=p(33293),g=p(30064),$=p(41182),_=p(26253),ee=p(23975),T="[object Map]",L="[object Set]";function Ce(pe){if(pe==null)return 0;if($(pe))return _(pe)?ee(pe):pe.length;var Te=g(pe);return Te==T||Te==L?pe.size:a(pe).length}he.exports=Ce},53604:(he,ve,p)=>{var a=p(41342),g=p(91959),$=p(164),_=p(50455),ee=$(function(T,L){if(T==null)return[];var Ce=L.length;return Ce>1&&_(T,L[0],L[1])?L=[]:Ce>2&&_(L[0],L[1],L[2])&&(L=[L[0]]),g(T,a(L,1),[])});he.exports=ee},44386:(he,ve,p)=>{var a=p(20409),g=p(82970);function $(_,ee,T){return _&&_.length?(ee=T||ee===void 0?1:g(ee),a(_,0,ee<0?0:ee)):[]}he.exports=$},14846:(he,ve,p)=>{var a=p(29577),g=p(95721),$="Expected a function";function _(ee,T,L){var Ce=!0,pe=!0;if(typeof ee!="function")throw new TypeError($);return g(L)&&(Ce="leading"in L?!!L.leading:Ce,pe="trailing"in L?!!L.trailing:pe),a(ee,T,{leading:Ce,maxWait:T,trailing:pe})}he.exports=_},51046:(he,ve,p)=>{var a=p(35554);function g($){return a($).toLowerCase()}he.exports=g},36684:(he,ve,p)=>{var a=p(75909);function g($){return $&&$.length?a($):[]}he.exports=g},25869:(he,ve,p)=>{var a=p(52536),g=p(75909);function $(_,ee){return _&&_.length?g(_,a(ee,2)):[]}he.exports=$},83523:(he,ve,p)=>{var a=p(63055);function g($,_){return $==null?!0:a($,_)}he.exports=g},5660:function(he,ve,p){(function(a,g){g(ve,p(75937))})(this,function(a,g){"use strict";function $(be){if(be&&be.__esModule)return be;var de=Object.create(null);return be&&Object.keys(be).forEach(function(xe){if(xe!=="default"){var me=Object.getOwnPropertyDescriptor(be,xe);Object.defineProperty(de,xe,me.get?me:{enumerable:!0,get:function(){return be[xe]}})}}),de.default=be,Object.freeze(de)}var _=$(g);function ee(be,de){return ee=Object.setPrototypeOf||function(me,ye){return me.__proto__=ye,me},ee(be,de)}function T(be,de){be.prototype=Object.create(de.prototype),be.prototype.constructor=be,ee(be,de)}var L=function(de,xe){return de===void 0&&(de=[]),xe===void 0&&(xe=[]),de.length!==xe.length||de.some(function(me,ye){return!Object.is(me,xe[ye])})},Ce={error:null},pe=function(be){T(de,be);function de(){for(var me,ye=arguments.length,we=new Array(ye),De=0;De<ye;De++)we[De]=arguments[De];return me=be.call.apply(be,[this].concat(we))||this,me.state=Ce,me.resetErrorBoundary=function(){for(var Oe,Ze=arguments.length,Ge=new Array(Ze),lt=0;lt<Ze;lt++)Ge[lt]=arguments[lt];me.props.onReset==null||(Oe=me.props).onReset.apply(Oe,Ge),me.reset()},me}de.getDerivedStateFromError=function(ye){return{error:ye}};var xe=de.prototype;return xe.reset=function(){this.setState(Ce)},xe.componentDidCatch=function(ye,we){var De,Oe;(De=(Oe=this.props).onError)==null||De.call(Oe,ye,we)},xe.componentDidUpdate=function(ye,we){var De=this.state.error,Oe=this.props.resetKeys;if(De!==null&&we.error!==null&&L(ye.resetKeys,Oe)){var Ze,Ge;(Ze=(Ge=this.props).onResetKeysChange)==null||Ze.call(Ge,ye.resetKeys,Oe),this.reset()}},xe.render=function(){var ye=this.state.error,we=this.props,De=we.fallbackRender,Oe=we.FallbackComponent,Ze=we.fallback;if(ye!==null){var Ge={error:ye,resetErrorBoundary:this.resetErrorBoundary};if(_.isValidElement(Ze))return Ze;if(typeof De=="function")return De(Ge);if(Oe)return _.createElement(Oe,Ge);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},de}(_.Component);function Te(be,de){var xe=function(we){return _.createElement(pe,de,_.createElement(be,we))},me=be.displayName||be.name||"Unknown";return xe.displayName="withErrorBoundary("+me+")",xe}function Pe(be){var de=_.useState(null),xe=de[0],me=de[1];if(be!=null)throw be;if(xe!=null)throw xe;return me}a.ErrorBoundary=pe,a.useErrorHandler=Pe,a.withErrorBoundary=Te,Object.defineProperty(a,"__esModule",{value:!0})})},51812:(he,ve,p)=>{"use strict";p.d(ve,{f:()=>a});const a=({data:g})=>{try{return Object.keys(g).reduce(($,_)=>{const ee=g[_][0];return $[_]={id:ee,defaultMessage:ee},$},{})}catch{return{}}}},34514:(he,ve,p)=>{"use strict";p.r(ve),p.d(ve,{I:()=>ls,g:()=>Wn,i:()=>Jy});var a=p(56940),g=p(75937),$=p(65094),_=p(78054),ee=p(11674),T=p(66041),L=p(74065),Ce=p(81583),pe=p(24091),Te=p(87773),Pe=p(64923),be=p(22884),de=p(82180),xe=p(9144),me=p(91496),ye=p(96820),we=p(90019),De=p(58400),Oe=p(22512),Ze=p(95984),Ge=p(54997),lt=p(43669),wt=p(77346),mt=p(72082),ut=p(47479),vt=p(53295),Lt=p(7947),Vt=p(47599),Ct=p(78506),tt=p(78300),Dt=p(97371),Ht=p(44634),rn=p(72672),dt=p(10798),fs=p(93788),$t=p(64743),Ed=p(49135),To=p(85682),hs=p(71042),sn=p(31220),ae=p(19681);const Bd=ae.default.div`
  margin-right: ${({theme:e})=>e.spaces[3]};
  width: ${6/16}rem;
  height: ${6/16}rem;
  border-radius: 50%;
  background: ${({theme:e,backgroundColor:t})=>e.colors[t]};
`,Ad=(0,ae.default)($.x)`
  ${L.Z} {
    color: ${({theme:e,textColor:t})=>e.colors[t]};
  }
`,gs=({variant:e="primary",showBullet:t=!0,size:n="M",children:r,...s})=>{const o=`${e}100`,i=`${e}200`,l=`${e}600`,c=`${e}600`,d=n==="S"?2:5,h=n==="S"?1:4;return(0,a.jsx)(Ad,{borderColor:i,textColor:c,background:o,hasRadius:!0,paddingTop:h,paddingBottom:h,paddingLeft:d,paddingRight:d,...s,children:t?(0,a.jsxs)(T.k,{children:[(0,a.jsx)(Bd,{backgroundColor:l}),r]}):r})};var jd=p(95115),wd=p(60531),Dr=p(7393),br=p(83177),xr=p(49499),Mo=p(53917),Oo=p(5964),So=p(94684),Ft=p(44773),Io=p(39738),Fd=p(68835),Rd=p(87005);const Td=(0,ae.default)(T.k)`
  & > * + * {
    margin-left: -${Rd.N/2}px;
  }
`;var ps=p(84319),Po=p(38592),ko=p(9728),Md=p(96452),Od=p(66558),M=p(30956),Lo=p(53604),Sd=p(41480),Ee=p(48288),ze=p(93484),Ye=p(82018),Gn=p(47474),Id=p(30120),wn=p(63355),W=p(27469),u=p(14025),Pd=p(5660),yr=p(26488),Tt=p(50646),kd=p(56892),Mt=p(74419),Nt=p(78712),le=p(333),Se=p(21709),$o=p(71999),Ld=p(1205),$d=p(5337),No=p(95721),Yt=p(4549),Nd=p(49504),Zd=p(95584),zd=p(66298),Wd=p(20609),Yn=p(31941),Ud=p(26484),Vd=p(23987),Hd=p(85747),qd=p(55696),Er=p(13319),Kd=p(11964),Gd=p(16409),Yd=p(93377),ms=p(14843),Qd=p(31298),Jd=p(54096),Xd=p(11895),_d=p(29727),ef=p(13089),tf=p(90104),an=p(30454),nf=p(80778),rf=p(76550),Br=p(68475),vs=p(39416),Zo=p(78806),sf=p(79225),af=p(94682),of=p(49461),lf=p(12161),uf=p(86810),cf=p(11333),df=p(27432),ff=p(81420),hf=p(58296),gf=p(66225),pf=p(49604),mf=p(60649),vf=p(33362),Cf=p(75030),Df=p(99130),bf=p(27607),zo=p(26081),xf=p(5799),yf=p(14582),Ef=p(56200),Bf=p(63494),Af=p(37007),Wo=p(49745),jf=p(14534),wf=p(59069),Ff=p(78111),Rf=p(50893),Tf=p(76840),Mf=p(86198),Of=p(29093),Sf=p(87156),If=p(63964),Pf=p(94529),kf=p(17398),Ar=p(60845),Lf=p(29817),$f=p(81268),Cs=p(42971),Nf=p(78966),Zf=p(68497),Ds=p(72197),zf=p(16361),Wf=p(63172),Uf=p(22371),Vf=p(28295),Hf=p(19290),qf=p(25577),Kf=p(18424),Gf=p(27044),Yf=p(63907),Qf=p(31127),Jf=p(43226),Xf=p(63564),_f=p(25948),eh=p(83324),th=p(71722),nh=p(33695),rh=p(79035),Qt=p(95227),sh=p(92274),bs=p(43108),ah=p(75431),oh=p(7192),ih=p(90302),lh=p(40353),Fn=p(7047),uh=p(99311),ch=p(87887),dh=p(87879),xs=p(25913),ys=p(6942),fh=p(14234),hh=p(62803),gh=p(18936),ph=p(23554),mh=p(73690),vh=p(45216),Ch=p(72865),Dh=p(96e3),bh=p(62812),xh=p(52864),yh=p(84763),Eh=p(82166),Bh=p(63854),Ah=p(8937),jh=p(90351),Es=p(26656),wh=p(80717),Fh=p(16881),Rh=p(8942),Th=p(3583),Mh=p(850),Oh=p(93757),Sh=p(33453),jr=p(40745),Ih=p(65984),Ph=p(47221),kh=p(97474),Lh=p(19748),$h=p(40211),Nh=p(81194),qt=p(68333),on=p(64990),Qn=p(20696),Zh=p(46023),wr=p(42694),zh=p(16834),Uo=p(30288),Bs=p(49205),Wh=p(30142),As=p(89454),Uh=p(28108),Vh=p(59567),Hh=p(98867),qh=p(82299),Vo=p(48990),Kh=p(98572),Gh=p(12660),Yh=p(7887),Qh=p(50327),Jh=p(12109),Xh=p(71252),_h=p(78513),Ho=p(85057),js=p(94268),Jn=p(57120),eg=p(69960),Fr=p(35184),ws=p(13681),tg=p(27709),ng=p(21747),rg=p(11641),sg=p(24356),ag=p(70754),Ot=p(45641),Xn=p(28829),Bt=p(40829),_e=p(93468),qo=p(37434),og=p(1822),ig=p(78200),lg=p(57373),ug=p(26874),cg=p(37229),_n=p(88170),Ue=p(88720),dg=p(181),er=p(44386);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Ko(e){return Object.prototype.toString.call(e)==="[object Object]"}function pt(e){var t,n;return Ko(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(Ko(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var fg={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var s=O.transform(n,t,{affinity:r});e.current=s,s==null&&e.unref()}}},hg={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var s=We.transform(n,t,{affinity:r});e.current=s,s==null&&e.unref()}}},gg={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var s=G.transform(n,t,{affinity:r});e.current=s,s==null&&e.unref()}}},Rr=new WeakMap,Tr=new WeakMap,tr=new WeakMap,Go=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,O={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=O.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var s=e[r],o=t[r];if(s!==o)break;n.push(s)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),s=t.slice(0,n),o=e[n],i=t[n];return O.equals(r,s)&&o>i},endsAt(e,t){var n=e.length,r=e.slice(0,n),s=t.slice(0,n);return O.equals(r,s)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),s=t.slice(0,n),o=e[n],i=t[n];return O.equals(r,s)&&o<i},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return O.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&O.compare(e,t)===0},isBefore(e,t){return O.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&O.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&O.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&O.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&O.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1),s=e[e.length-1],o=t[t.length-1];return s!==o&&O.equals(n,r)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=[],s=0;s<=e.length;s++)r.push(e.slice(0,s));return n&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!O.isAncestor(t,e)&&!O.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:s="forward"}=n;if(e.length===0)return r;switch(t.type){case"insert_node":{var{path:o}=t;(O.equals(o,r)||O.endsBefore(o,r)||O.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:i}=t;if(O.equals(i,r)||O.isAncestor(i,r))return null;O.endsBefore(i,r)&&(r[i.length-1]-=1);break}case"merge_node":{var{path:l,position:c}=t;O.equals(l,r)||O.endsBefore(l,r)?r[l.length-1]-=1:O.isAncestor(l,r)&&(r[l.length-1]-=1,r[l.length]+=c);break}case"split_node":{var{path:d,position:h}=t;if(O.equals(d,r)){if(s==="forward")r[r.length-1]+=1;else if(s!=="backward")return null}else O.endsBefore(d,r)?r[d.length-1]+=1:O.isAncestor(d,r)&&e[d.length]>=h&&(r[d.length-1]+=1,r[d.length]-=h);break}case"move_node":{var{path:m,newPath:v}=t;if(O.equals(m,v))return r;if(O.isAncestor(m,r)||O.equals(m,r)){var C=v.slice();return O.endsBefore(m,v)&&m.length<v.length&&(C[m.length-1]-=1),C.concat(r.slice(m.length))}else O.isSibling(m,v)&&(O.isAncestor(v,r)||O.equals(v,r))?O.endsBefore(m,r)?r[m.length-1]-=1:r[m.length-1]+=1:O.endsBefore(v,r)||O.equals(v,r)||O.isAncestor(v,r)?(O.endsBefore(m,r)&&(r[m.length-1]-=1),r[v.length-1]+=1):O.endsBefore(m,r)&&(O.equals(v,r)&&(r[v.length-1]+=1),r[m.length-1]-=1);break}}return r}};function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xo(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pg=(e,t,n)=>{switch(n.type){case"insert_node":{var{path:r,node:s}=n,o=ge.parent(e,r),i=r[r.length-1];if(i>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(i,0,s),t)for(var[l,c]of G.points(t))t[c]=We.transform(l,n);break}case"insert_text":{var{path:d,offset:h,text:m}=n;if(m.length===0)break;var v=ge.leaf(e,d),C=v.text.slice(0,h),D=v.text.slice(h);if(v.text=C+m+D,t)for(var[f,y]of G.points(t))t[y]=We.transform(f,n);break}case"merge_node":{var{path:x}=n,B=ge.get(e,x),A=O.previous(x),S=ge.get(e,A),E=ge.parent(e,x),j=x[x.length-1];if(Fe.isText(B)&&Fe.isText(S))S.text+=B.text;else if(!Fe.isText(B)&&!Fe.isText(S))S.children.push(...B.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(x,"] to nodes of different interfaces: ").concat(ft.stringify(B)," ").concat(ft.stringify(S)));if(E.children.splice(j,1),t)for(var[R,Z]of G.points(t))t[Z]=We.transform(R,n);break}case"move_node":{var{path:F,newPath:P}=n;if(O.isAncestor(F,P))throw new Error("Cannot move a path [".concat(F,"] to new path [").concat(P,"] because the destination is inside itself."));var Q=ge.get(e,F),I=ge.parent(e,F),z=F[F.length-1];I.children.splice(z,1);var U=O.transform(F,n),k=ge.get(e,O.parent(U)),N=U[U.length-1];if(k.children.splice(N,0,Q),t)for(var[q,V]of G.points(t))t[V]=We.transform(q,n);break}case"remove_node":{var{path:re}=n,J=re[re.length-1],oe=ge.parent(e,re);if(oe.children.splice(J,1),t)for(var[ne,ue]of G.points(t)){var w=We.transform(ne,n);if(t!=null&&w!=null)t[ue]=w;else{var X=void 0,Y=void 0;for(var[se,H]of ge.texts(e))if(O.compare(H,re)===-1)X=[se,H];else{Y=[se,H];break}var ie=!1;X&&Y&&(O.equals(Y[1],re)?ie=!O.hasPrevious(Y[1]):ie=O.common(X[1],re).length<O.common(Y[1],re).length),X&&!ie?(ne.path=X[1],ne.offset=X[0].text.length):Y?(ne.path=Y[1],ne.offset=0):t=null}}break}case"remove_text":{var{path:Ae,offset:Me,text:Le}=n;if(Le.length===0)break;var Ve=ge.leaf(e,Ae),je=Ve.text.slice(0,Me),et=Ve.text.slice(Me+Le.length);if(Ve.text=je+et,t)for(var[Qe,He]of G.points(t))t[He]=We.transform(Qe,n);break}case"set_node":{var{path:ct,properties:ht,newProperties:$e}=n;if(ct.length===0)throw new Error("Cannot set properties on the root node!");var Je=ge.get(e,ct);for(var Ke in $e){if(Ke==="children"||Ke==="text")throw new Error('Cannot set the "'.concat(Ke,'" property of nodes!'));var gt=$e[Ke];gt==null?delete Je[Ke]:Je[Ke]=gt}for(var it in ht)$e.hasOwnProperty(it)||delete Je[it];break}case"set_selection":{var{newProperties:qe}=n;if(qe==null)t=qe;else{if(t==null){if(!G.isRange(qe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(ft.stringify(qe)," when there is no current selection."));t=nr({},qe)}for(var yt in qe){var nn=qe[yt];if(nn==null){if(yt==="anchor"||yt==="focus")throw new Error('Cannot remove the "'.concat(yt,'" selection property'));delete t[yt]}else t[yt]=nn}}break}case"split_node":{var{path:Et,position:Wt,properties:pn}=n;if(Et.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Et,"] because the root node cannot be split."));var Ut=ge.get(e,Et),Re=ge.parent(e,Et),Ne=Et[Et.length-1],ce;if(Fe.isText(Ut)){var fe=Ut.text.slice(0,Wt),Ie=Ut.text.slice(Wt);Ut.text=fe,ce=nr(nr({},pn),{},{text:Ie})}else{var ot=Ut.children.slice(0,Wt),Pt=Ut.children.slice(Wt);Ut.children=ot,ce=nr(nr({},pn),{},{children:Pt})}if(Re.children.splice(Ne+1,0,ce),t)for(var[kt,Cr]of G.points(t))t[Cr]=We.transform(kt,n);break}}return t},mg={transform(e,t){e.children=(0,Mt.createDraft)(e.children);var n=e.selection&&(0,Mt.createDraft)(e.selection);try{n=pg(e,n,t)}finally{e.children=(0,Mt.finishDraft)(e.children),n?e.selection=(0,Mt.isDraft)(n)?(0,Mt.finishDraft)(n):n:e.selection=null}}},vg={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},Cg={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},_o=(e,t)=>{for(var n in e){var r=e[n],s=t[n];if(pt(r)&&pt(s)){if(!_o(r,s))return!1}else if(Array.isArray(r)&&Array.isArray(s)){if(r.length!==s.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==s[o])return!1}else if(r!==s)return!1}for(var i in t)if(e[i]===void 0&&t[i]!==void 0)return!1;return!0};function Dg(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jt(e,t){if(e==null)return{};var n=Dg(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var bg=["anchor","focus"];function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function xg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ei(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var G={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:s}=e;return G.isBackward(e)===n?[r,s]:[s,r]},end(e){var[,t]=G.edges(e);return t},equals(e,t){return We.equals(e.anchor,t.anchor)&&We.equals(e.focus,t.focus)},includes(e,t){if(G.isRange(t)){if(G.includes(e,t.anchor)||G.includes(e,t.focus))return!0;var[n,r]=G.edges(e),[s,o]=G.edges(t);return We.isBefore(n,s)&&We.isAfter(r,o)}var[i,l]=G.edges(e),c=!1,d=!1;return We.isPoint(t)?(c=We.compare(t,i)>=0,d=We.compare(t,l)<=0):(c=O.compare(t,i.path)>=0,d=O.compare(t,l.path)<=0),c&&d},intersection(e,t){var n=Jt(e,bg),[r,s]=G.edges(e),[o,i]=G.edges(t),l=We.isBefore(r,o)?o:r,c=We.isBefore(s,i)?s:i;return We.isBefore(c,l)?null:xg({anchor:l,focus:c},n)},isBackward(e){var{anchor:t,focus:n}=e;return We.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return We.equals(t,n)},isExpanded(e){return!G.isCollapsed(e)},isForward(e){return!G.isBackward(e)},isRange(e){return pt(e)&&We.isPoint(e.anchor)&&We.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=G.edges(e);return t},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(0,Mt.produce)(e,r=>{if(r===null)return null;var{affinity:s="inward"}=n,o,i;if(s==="inward"){var l=G.isCollapsed(r);G.isForward(r)?(o="forward",i=l?o:"backward"):(o="backward",i=l?o:"forward")}else s==="outward"?G.isForward(r)?(o="backward",i="forward"):(o="forward",i="backward"):(o=s,i=s);var c=We.transform(r.anchor,t,{affinity:o}),d=We.transform(r.focus,t,{affinity:i});if(!c||!d)return null;r.anchor=c,r.focus=d})}},ti=e=>pt(e)&&ge.isNodeList(e.children)&&!b.isEditor(e),Be={isAncestor(e){return pt(e)&&ge.isNodeList(e.children)},isElement:ti,isElementList(e){return Array.isArray(e)&&e.every(t=>Be.isElement(t))},isElementProps(e){return e.children!==void 0},isElementType:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return ti(t)&&t[r]===n},matches(e,t){for(var n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},yg=["children"],Eg=["text"],ni=new WeakMap,ge={ancestor(e,t){var n=ge.get(e,t);if(Fe.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(ft.stringify(n)));return n},*ancestors(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var r of O.ancestors(t,n)){var s=ge.ancestor(e,r),o=[s,r];yield o}},child(e,t){if(Fe.isText(e))throw new Error("Cannot get the child of a text node: ".concat(ft.stringify(e)));var n=e.children[t];if(n==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(ft.stringify(e)));return n},*children(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:r=!1}=n,s=ge.ancestor(e,t),{children:o}=s,i=r?o.length-1:0;r?i>=0:i<o.length;){var l=ge.child(s,i),c=t.concat(i);yield[l,c],i=r?i-1:i+1}},common(e,t,n){var r=O.common(t,n),s=ge.get(e,r);return[s,r]},descendant(e,t){var n=ge.get(e,t);if(b.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(ft.stringify(n)));return n},*descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[n,r]of ge.nodes(e,t))r.length!==0&&(yield[n,r])},*elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[n,r]of ge.nodes(e,t))Be.isElement(n)&&(yield[n,r])},extractProps(e){if(Be.isAncestor(e)){var t=Jt(e,yg);return t}else{var t=Jt(e,Eg);return t}},first(e,t){for(var n=t.slice(),r=ge.get(e,n);r&&!(Fe.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(Fe.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(ft.stringify(e)));var n=(0,Mt.produce)({children:e.children},r=>{var[s,o]=G.edges(t),i=ge.nodes(r,{reverse:!0,pass:v=>{var[,C]=v;return!G.includes(t,C)}});for(var[,l]of i){if(!G.includes(t,l)){var c=ge.parent(r,l),d=l[l.length-1];c.children.splice(d,1)}if(O.equals(l,o.path)){var h=ge.leaf(r,l);h.text=h.text.slice(0,o.offset)}if(O.equals(l,s.path)){var m=ge.leaf(r,l);m.text=m.text.slice(s.offset)}}b.isEditor(r)&&(r.selection=null)});return n.children},get(e,t){for(var n=e,r=0;r<t.length;r++){var s=t[r];if(Fe.isText(n)||!n.children[s])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(ft.stringify(e)));n=n.children[s]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var s=t[r];if(Fe.isText(n)||!n.children[s])return!1;n=n.children[s]}return!0},isNode(e){return Fe.isText(e)||Be.isElement(e)||b.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var t=ni.get(e);if(t!==void 0)return t;var n=e.every(r=>ge.isNode(r));return ni.set(e,n),n},last(e,t){for(var n=t.slice(),r=ge.get(e,n);r&&!(Fe.isText(r)||r.children.length===0);){var s=r.children.length-1;r=r.children[s],n.push(s)}return[r,n]},leaf(e,t){var n=ge.get(e,t);if(!Fe.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(ft.stringify(n)));return n},*levels(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var r of O.levels(t,n)){var s=ge.get(e,r);yield[s,r]}},matches(e,t){return Be.isElement(e)&&Be.isElementProps(t)&&Be.matches(e,t)||Fe.isText(e)&&Fe.isTextProps(t)&&Fe.matches(e,t)},*nodes(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:n,reverse:r=!1}=t,{from:s=[],to:o}=t,i=new Set,l=[],c=e;!(o&&(r?O.isBefore(l,o):O.isAfter(l,o)));){if(i.has(c)||(yield[c,l]),!i.has(c)&&!Fe.isText(c)&&c.children.length!==0&&(n==null||n([c,l])===!1)){i.add(c);var d=r?c.children.length-1:0;O.isAncestor(l,s)&&(d=s[l.length]),l=l.concat(d),c=ge.get(e,l);continue}if(l.length===0)break;if(!r){var h=O.next(l);if(ge.has(e,h)){l=h,c=ge.get(e,l);continue}}if(r&&l[l.length-1]!==0){var m=O.previous(l);l=m,c=ge.get(e,l);continue}l=O.parent(l),c=ge.get(e,l),i.add(c)}},parent(e,t){var n=O.parent(t),r=ge.get(e,n);if(Fe.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string(e){return Fe.isText(e)?e.text:e.children.map(ge.string).join("")},*texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[n,r]of ge.nodes(e,t))Fe.isText(n)&&(yield[n,r])}};function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ri(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ln={isNodeOperation(e){return ln.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!pt(e))return!1;switch(e.type){case"insert_node":return O.isPath(e.path)&&ge.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&O.isPath(e.path);case"merge_node":return typeof e.position=="number"&&O.isPath(e.path)&&pt(e.properties);case"move_node":return O.isPath(e.path)&&O.isPath(e.newPath);case"remove_node":return O.isPath(e.path)&&ge.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&O.isPath(e.path);case"set_node":return O.isPath(e.path)&&pt(e.properties)&&pt(e.newProperties);case"set_selection":return e.properties===null&&G.isRange(e.newProperties)||e.newProperties===null&&G.isRange(e.properties)||pt(e.properties)&&pt(e.newProperties);case"split_node":return O.isPath(e.path)&&typeof e.position=="number"&&pt(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>ln.isOperation(t))},isSelectionOperation(e){return ln.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return ln.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return rt(rt({},e),{},{type:"remove_node"});case"insert_text":return rt(rt({},e),{},{type:"remove_text"});case"merge_node":return rt(rt({},e),{},{type:"split_node",path:O.previous(e.path)});case"move_node":{var{newPath:t,path:n}=e;if(O.equals(t,n))return e;if(O.isSibling(n,t))return rt(rt({},e),{},{path:t,newPath:n});var r=O.transform(n,e),s=O.transform(O.next(n),e);return rt(rt({},e),{},{path:r,newPath:s})}case"remove_node":return rt(rt({},e),{},{type:"insert_node"});case"remove_text":return rt(rt({},e),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:i}=e;return rt(rt({},e),{},{properties:i,newProperties:o})}case"set_selection":{var{properties:l,newProperties:c}=e;return l==null?rt(rt({},e),{},{properties:c,newProperties:null}):c==null?rt(rt({},e),{},{properties:null,newProperties:l}):rt(rt({},e),{},{properties:c,newProperties:l})}case"split_node":return rt(rt({},e),{},{type:"merge_node",path:O.next(e.path)})}}},si=new WeakMap,Bg=e=>{var t=si.get(e);if(t!==void 0)return t;if(!pt(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||pt(e.marks))&&(e.selection===null||G.isRange(e.selection))&&ge.isNodeList(e.children)&&ln.isOperationList(e.operations);return si.set(e,n),n},b={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor(e){return Bg(e)},isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)}},Xy={isLocation(e){return O.isPath(e)||We.isPoint(e)||G.isRange(e)}},Ag={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(O.isPath)}};function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ai(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var We={compare(e,t){var n=O.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return We.compare(e,t)===1},isBefore(e,t){return We.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&O.equals(e.path,t.path)},isPoint(e){return pt(e)&&typeof e.offset=="number"&&O.isPath(e.path)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(0,Mt.produce)(e,r=>{if(r===null)return null;var{affinity:s="forward"}=n,{path:o,offset:i}=r;switch(t.type){case"insert_node":case"move_node":{r.path=O.transform(o,t,n);break}case"insert_text":{O.equals(t.path,o)&&(t.offset<i||t.offset===i&&s==="forward")&&(r.offset+=t.text.length);break}case"merge_node":{O.equals(t.path,o)&&(r.offset+=t.position),r.path=O.transform(o,t,n);break}case"remove_text":{O.equals(t.path,o)&&t.offset<=i&&(r.offset-=Math.min(i-t.offset,t.text.length));break}case"remove_node":{if(O.equals(t.path,o)||O.isAncestor(t.path,o))return null;r.path=O.transform(o,t,n);break}case"split_node":{if(O.equals(t.path,o)){if(t.position===i&&s==null)return null;(t.position<i||t.position===i&&s==="forward")&&(r.offset-=t.position,r.path=O.transform(o,t,oi(oi({},n),{},{affinity:"forward"})))}else r.path=O.transform(o,t,n);break}}})}},ii=void 0,ft={setScrubber(e){ii=e},stringify(e){return JSON.stringify(e,ii)}},jg=["text"],wg=["anchor","focus"];function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?li(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fe={equals(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function s(o){var i=Jt(o,jg);return i}return _o(r?s(e):e,r?s(t):t)},isText(e){return pt(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>Fe.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var n in t)if(n!=="text"&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[Xt({},e)];for(var r of t){var s=Jt(r,wg),[o,i]=G.edges(r),l=[],c=0,d=o.offset,h=i.offset;for(var m of n){var{length:v}=m.text,C=c;if(c+=v,d<=C&&c<=h){Object.assign(m,s),l.push(m);continue}if(d!==h&&(d===c||h===C)||d>c||h<C||h===C&&C!==0){l.push(m);continue}var D=m,f=void 0,y=void 0;if(h<c){var x=h-C;y=Xt(Xt({},D),{},{text:D.text.slice(x)}),D=Xt(Xt({},D),{},{text:D.text.slice(0,x)})}if(d>C){var B=d-C;f=Xt(Xt({},D),{},{text:D.text.slice(0,B)}),D=Xt(Xt({},D),{},{text:D.text.slice(B)})}Object.assign(D,s),f&&l.push(f),l.push(D),y&&l.push(y)}n=l}return n}},Fs=e=>e.selection?e.selection:e.children.length>0?b.end(e,[]):[0],Rn=(e,t)=>{var[n]=b.node(e,t);return r=>r===n},Rs=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,s=n?Sg(t):t,o=ke.None,i=ke.None,l=0,c=null,d=null;for(var h of s){var m=h.codePointAt(0);if(!m)break;var v=Hg(h,m);if([o,i]=r?[i,v]:[v,o],Tn(o,ke.ZWJ)&&Tn(i,ke.ExtPict)&&(r?c=ui(t.substring(0,l)):c=ui(t.substring(0,t.length-l)),!c)||Tn(o,ke.RI)&&Tn(i,ke.RI)&&(d!==null?d=!d:r?d=!0:d=Qg(t.substring(0,t.length-l)),!d)||o!==ke.None&&i!==ke.None&&Kg(o,i))break;l+=h.length}return l||1},Fg=/\s/,Rg=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Tg=/['\u2018\u2019]/,Mg=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,s=!1;t.length>0;){var o=Rs(t,n),[i,l]=Ts(t,o,n);if(Og(i,l,n))s=!0,r+=o;else if(!s)r+=o;else break;t=l}return r},Ts=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},Og=function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Fg.test(t))return!1;if(Tg.test(t)){var s=Rs(n,r),[o,i]=Ts(n,s,r);if(e(o,i,r))return!0}return!Rg.test(t)},Sg=function*(t){for(var n=t.length-1,r=0;r<t.length;r++){var s=t.charAt(n-r);if(Pg(s.charCodeAt(0))){var o=t.charAt(n-r-1);if(Ig(o.charCodeAt(0))){yield o+s,r++;continue}}yield s}},Ig=e=>e>=55296&&e<=56319,Pg=e=>e>=56320&&e<=57343,ke;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(ke||(ke={}));var kg=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Lg=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,$g=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Ng=/^[\u1100-\u115F\uA960-\uA97C]$/,Zg=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,zg=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Wg=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Ug=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Vg=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Hg=(e,t)=>{var n=ke.Any;return e.search(kg)!==-1&&(n|=ke.Extend),t===8205&&(n|=ke.ZWJ),t>=127462&&t<=127487&&(n|=ke.RI),e.search(Lg)!==-1&&(n|=ke.Prepend),e.search($g)!==-1&&(n|=ke.SpacingMark),e.search(Ng)!==-1&&(n|=ke.L),e.search(Zg)!==-1&&(n|=ke.V),e.search(zg)!==-1&&(n|=ke.T),e.search(Wg)!==-1&&(n|=ke.LV),e.search(Ug)!==-1&&(n|=ke.LVT),e.search(Vg)!==-1&&(n|=ke.ExtPict),n};function Tn(e,t){return(e&t)!==0}var qg=[[ke.L,ke.L|ke.V|ke.LV|ke.LVT],[ke.LV|ke.V,ke.V|ke.T],[ke.LVT|ke.T,ke.T],[ke.Any,ke.Extend|ke.ZWJ],[ke.Any,ke.SpacingMark],[ke.Prepend,ke.Any],[ke.ZWJ,ke.ExtPict],[ke.RI,ke.RI]];function Kg(e,t){return qg.findIndex(n=>Tn(e,n[0])&&Tn(t,n[1]))===-1}var Gg=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,ui=e=>e.search(Gg)!==-1,Yg=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Qg=e=>{var t=e.match(Yg);if(t===null)return!1;var n=t[0].length/2;return n%2===1},Jg={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:s=Fs(e)}=n;if(O.isPath(s)&&(s=b.range(e,s)),G.isRange(s))if(G.isCollapsed(s))s=s.anchor;else{var o=G.end(s);if(!r&&b.void(e,{at:o}))return;var i=G.start(s),l=b.pointRef(e,i),c=b.pointRef(e,o);K.delete(e,{at:s,voids:r});var d=l.unref(),h=c.unref();s=d||h,K.setSelection(e,{anchor:s,focus:s})}if(!(!r&&b.void(e,{at:s})||b.elementReadOnly(e,{at:s}))){var{path:m,offset:v}=s;t.length>0&&e.apply({type:"insert_text",path:m,offset:v,text:t})}})}};function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ci(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var K=Mr(Mr(Mr(Mr({},mg),vg),Cg),Jg),Xg=(e,t)=>{for(var n of b.pathRefs(e))fg.transform(n,t);for(var r of b.pointRefs(e))hg.transform(r,t);for(var s of b.rangeRefs(e))gg.transform(s,t);var o=Rr.get(e)||[],i=Tr.get(e)||new Set,l,c,d=D=>{if(D){var f=D.join(",");c.has(f)||(c.add(f),l.push(D))}};if(O.operationCanTransformPath(t)){l=[],c=new Set;for(var h of o){var m=O.transform(h,t);d(m)}}else l=o,c=i;var v=e.getDirtyPaths(t);for(var C of v)d(C);Rr.set(e,l),Tr.set(e,c),K.transform(e,t),e.operations.push(t),b.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),tr.get(e)||(tr.set(e,!0),Promise.resolve().then(()=>{tr.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},_g=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=t;return O.levels(n)}case"insert_node":{var{node:r,path:s}=t,o=O.levels(s),i=Fe.isText(r)?[]:Array.from(ge.nodes(r),P=>{var[,Q]=P;return s.concat(Q)});return[...o,...i]}case"merge_node":{var{path:l}=t,c=O.ancestors(l),d=O.previous(l);return[...c,d]}case"move_node":{var{path:h,newPath:m}=t;if(O.equals(h,m))return[];var v=[],C=[];for(var D of O.ancestors(h)){var f=O.transform(D,t);v.push(f)}for(var y of O.ancestors(m)){var x=O.transform(y,t);C.push(x)}var B=C[C.length-1],A=m[m.length-1],S=B.concat(A);return[...v,...C,S]}case"remove_node":{var{path:E}=t,j=O.ancestors(E);return[...j]}case"split_node":{var{path:R}=t,Z=O.levels(R),F=O.next(R);return[...Z,F]}default:return[]}},ep=e=>{var{selection:t}=e;return t?ge.fragment(e,t):[]},tp=(e,t)=>{var[n,r]=t;if(!Fe.isText(n)){if(Be.isElement(n)&&n.children.length===0){var s={text:""};K.insertNodes(e,s,{at:r.concat(0),voids:!0});return}for(var o=b.isEditor(n)?!1:Be.isElement(n)&&(e.isInline(n)||n.children.length===0||Fe.isText(n.children[0])||e.isInline(n.children[0])),i=0,l=0;l<n.children.length;l++,i++){var c=ge.get(e,r);if(!Fe.isText(c)){var d=c.children[i],h=c.children[i-1],m=l===n.children.length-1,v=Fe.isText(d)||Be.isElement(d)&&e.isInline(d);if(v!==o)K.removeNodes(e,{at:r.concat(i),voids:!0}),i--;else if(Be.isElement(d)){if(e.isInline(d)){if(h==null||!Fe.isText(h)){var C={text:""};K.insertNodes(e,C,{at:r.concat(i),voids:!0}),i++}else if(m){var D={text:""};K.insertNodes(e,D,{at:r.concat(i+1),voids:!0}),i++}}}else h!=null&&Fe.isText(h)&&(Fe.equals(d,h,{loose:!0})?(K.mergeNodes(e,{at:r.concat(i),voids:!0}),i--):h.text===""?(K.removeNodes(e,{at:r.concat(i-1),voids:!0}),i--):d.text===""&&(K.removeNodes(e,{at:r.concat(i),voids:!0}),i--))}}}},np=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,s=r*42;if(n>s)throw new Error("Could not completely normalize the editor after ".concat(s," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},rp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:s="lowest",at:o=t.selection,match:i}=n;if(o){var l=b.path(t,o),c=s==="lowest";for(var[d,h]of b.levels(t,{at:l,voids:r,match:i,reverse:c}))if(!Fe.isText(d)){if(G.isRange(o)){if(O.isAncestor(h,o.anchor.path)&&O.isAncestor(h,o.focus.path))return[d,h]}else if(!O.equals(l,h))return[d,h]}}};function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?di(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var sp=(e,t,n)=>{var{selection:r}=e;if(r){var s=(m,v)=>{if(!Fe.isText(m))return!1;var[C,D]=b.parent(e,v);return!e.isVoid(C)||e.markableVoid(C)},o=G.isExpanded(r),i=!1;if(!o){var[l,c]=b.node(e,r);if(l&&s(l,c)){var[d]=b.parent(e,c);i=d&&e.markableVoid(d)}}if(o||i)K.setNodes(e,{[t]:n},{match:s,split:!0,voids:!0});else{var h=fi(fi({},b.marks(e)||{}),{},{[t]:n});e.marks=h,tr.get(e)||e.onChange()}}};function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hi(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ap=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=b.point(t,n,{edge:"end"}),o=b.end(t,[]),i={anchor:s,focus:o},{distance:l=1}=r,c=0,d;for(var h of b.positions(t,gi(gi({},r),{},{at:i}))){if(c>l)break;c!==0&&(d=h),c++}return d};function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pi(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var op=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=b.start(t,[]),o=b.point(t,n,{edge:"start"}),i={anchor:s,focus:o},{distance:l=1}=r,c=0,d;for(var h of b.positions(t,mi(mi({},r),{},{at:i,reverse:!0}))){if(c>l)break;c!==0&&(d=h),c++}return d},ip=(e,t)=>{var{selection:n}=e;n&&G.isCollapsed(n)&&K.delete(e,{unit:t,reverse:!0})},lp=(e,t)=>{var{selection:n}=e;n&&G.isCollapsed(n)&&K.delete(e,{unit:t})},up=function(t){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t;r&&G.isExpanded(r)&&K.delete(t,{reverse:n==="backward"})},cp=(e,t)=>[b.start(e,t),b.end(e,t)];function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vi(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var dp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return b.above(t,Ci(Ci({},n),{},{match:r=>Be.isElement(r)&&b.isElementReadOnly(t,r)}))},fp=(e,t)=>b.point(e,t,{edge:"end"}),hp=(e,t)=>{var n=b.path(e,t,{edge:"start"});return b.node(e,n)},gp=(e,t)=>{var n=b.range(e,t);return ge.fragment(e,n)};function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function bi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Di(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return b.above(t,bi(bi({},n),{},{match:r=>Be.isElement(r)&&b.isVoid(t,r)}))},mp=(e,t)=>t.children.some(n=>Be.isElement(n)&&b.isBlock(e,n)),vp=(e,t)=>t.children.some(n=>Fe.isText(n)||b.isInline(e,n)),Cp=(e,t)=>ge.has(e,t),Dp=(e,t)=>t.children.every(n=>Fe.isText(n)),bp=e=>{K.splitNodes(e,{always:!0})},xp=(e,t,n)=>{K.insertNodes(e,t,n)},yp=e=>{K.splitNodes(e,{always:!0})};function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xi(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Bp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:s,marks:o}=t;if(s){if(o){var i=Ep({text:n},o);K.insertNodes(t,i,{at:r.at,voids:r.voids})}else K.insertText(t,n,r);t.marks=null}},Ap=(e,t)=>!e.isInline(t),jp=(e,t,n)=>b.isStart(e,t,n)||b.isEnd(e,t,n),wp=(e,t)=>{var{children:n}=t,[r]=n;return n.length===0||n.length===1&&Fe.isText(r)&&r.text===""&&!e.isVoid(t)},Fp=(e,t,n)=>{var r=b.end(e,n);return We.equals(t,r)},Rp=e=>{var t=Go.get(e);return t===void 0?!0:t},Tp=(e,t,n)=>{if(t.offset!==0)return!1;var r=b.start(e,n);return We.equals(t,r)},Mp=(e,t)=>{var n=b.path(e,t,{edge:"end"});return b.node(e,n)},Op=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=b.path(t,n,r),o=ge.leaf(t,s);return[o,s]};function*Sp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:n=e.selection,reverse:r=!1,voids:s=!1}=t,{match:o}=t;if(o==null&&(o=()=>!0),!!n){var i=[],l=b.path(e,n);for(var[c,d]of ge.levels(e,l))if(o(c,d)&&(i.push([c,d]),!s&&Be.isElement(c)&&b.isVoid(e,c)))break;r&&i.reverse(),yield*i}}var Ip=["text"],Pp=["text"],kp=function(t){var{marks:n,selection:r}=t;if(!r)return null;if(n)return n;if(G.isExpanded(r)){var[s]=b.nodes(t,{match:Fe.isText});if(s){var[o]=s,i=Jt(o,Ip);return i}else return{}}var{anchor:l}=r,{path:c}=l,[d]=b.leaf(t,c);if(l.offset===0){var h=b.previous(t,{at:c,match:Fe.isText}),m=b.above(t,{match:x=>Be.isElement(x)&&b.isVoid(t,x)&&t.markableVoid(x)});if(!m){var v=b.above(t,{match:x=>Be.isElement(x)&&b.isBlock(t,x)});if(h&&v){var[C,D]=h,[,f]=v;O.isAncestor(f,D)&&(d=C)}}}var y=Jt(d,Pp);return y},Lp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:s=!1}=n,{match:o,at:i=t.selection}=n;if(i){var l=b.after(t,i,{voids:s});if(l){var[,c]=b.last(t,[]),d=[l.path,c];if(O.isPath(i)&&i.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(O.isPath(i)){var[h]=b.parent(t,i);o=v=>h.children.includes(v)}else o=()=>!0;var[m]=b.nodes(t,{at:d,match:o,mode:r,voids:s});return m}}},$p=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=b.path(t,n,r),o=ge.get(t,s);return[o,s]};function*Np(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:n=e.selection,mode:r="all",universal:s=!1,reverse:o=!1,voids:i=!1,ignoreNonSelectable:l=!1}=t,{match:c}=t;if(c||(c=()=>!0),!!n){var d,h;if(Ag.isSpan(n))d=n[0],h=n[1];else{var m=b.path(e,n,{edge:"start"}),v=b.path(e,n,{edge:"end"});d=o?v:m,h=o?m:v}var C=ge.nodes(e,{reverse:o,from:d,to:h,pass:S=>{var[E]=S;return Be.isElement(E)?!!(!i&&(b.isVoid(e,E)||b.isElementReadOnly(e,E))||l&&!b.isSelectable(e,E)):!1}}),D=[],f;for(var[y,x]of C)if(!(l&&Be.isElement(y)&&!b.isSelectable(e,y))){var B=f&&O.compare(x,f[1])===0;if(!(r==="highest"&&B)){if(!c(y,x)){if(s&&!B&&Fe.isText(y))return;continue}if(r==="lowest"&&B){f=[y,x];continue}var A=r==="lowest"?f:[y,x];A&&(s?D.push(A):yield A),f=[y,x]}}r==="lowest"&&f&&(s?D.push(f):yield f),s&&(yield*D)}}var Zp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:s}=n,o=h=>Rr.get(h)||[],i=h=>Tr.get(h)||new Set,l=h=>{var m=o(h).pop(),v=m.join(",");return i(h).delete(v),m};if(b.isNormalizing(t)){if(r){var c=Array.from(ge.nodes(t),h=>{var[,m]=h;return m}),d=new Set(c.map(h=>h.join(",")));Rr.set(t,c),Tr.set(t,d)}o(t).length!==0&&b.withoutNormalizing(t,()=>{for(var h of o(t))if(ge.has(t,h)){var m=b.node(t,h),[v,C]=m;Be.isElement(v)&&v.children.length===0&&t.normalizeNode(m,{operation:s})}for(var D=o(t),f=D.length,y=0;D.length!==0;){if(!t.shouldNormalize({dirtyPaths:D,iteration:y,initialDirtyPathsLength:f,operation:s}))return;var x=l(t);if(ge.has(t,x)){var B=b.node(t,x);t.normalizeNode(B,{operation:s})}y++,D=o(t)}})}},zp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=b.path(t,n,r),o=O.parent(s),i=b.node(t,o);return i},Wp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:s="forward"}=r,o={current:n,affinity:s,unref(){var{current:l}=o,c=b.pathRefs(t);return c.delete(o),o.current=null,l}},i=b.pathRefs(t);return i.add(o),o},Up=e=>{var t=Yo.get(e);return t||(t=new Set,Yo.set(e,t)),t},Vp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:s,edge:o}=r;if(O.isPath(n)){if(o==="start"){var[,i]=ge.first(t,n);n=i}else if(o==="end"){var[,l]=ge.last(t,n);n=l}}return G.isRange(n)&&(o==="start"?n=G.start(n):o==="end"?n=G.end(n):n=O.common(n.anchor.path,n.focus.path)),We.isPoint(n)&&(n=n.path),s!=null&&(n=n.slice(0,s)),n},Hp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:s="forward"}=r,o={current:n,affinity:s,unref(){var{current:l}=o,c=b.pointRefs(t);return c.delete(o),o.current=null,l}},i=b.pointRefs(t);return i.add(o),o},qp=e=>{var t=Qo.get(e);return t||(t=new Set,Qo.set(e,t)),t},Kp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:s="start"}=r;if(O.isPath(n)){var o;if(s==="end"){var[,i]=ge.last(t,n);o=i}else{var[,l]=ge.first(t,n);o=l}var c=ge.get(t,o);if(!Fe.isText(c))throw new Error("Cannot get the ".concat(s," point in the node at path [").concat(n,"] because it has no ").concat(s," text node."));return{path:o,offset:s==="end"?c.text.length:0}}if(G.isRange(n)){var[d,h]=G.edges(n);return s==="start"?d:h}return n};function*Gp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:n=e.selection,unit:r="offset",reverse:s=!1,voids:o=!1,ignoreNonSelectable:i=!1}=t;if(!n)return;var l=b.range(e,n),[c,d]=G.edges(l),h=s?d:c,m=!1,v="",C=0,D=0,f=0;for(var[y,x]of b.nodes(e,{at:n,reverse:s,voids:o,ignoreNonSelectable:i})){if(Be.isElement(y)){if(!o&&(e.isVoid(y)||e.isElementReadOnly(y))){yield b.start(e,x);continue}if(e.isInline(y))continue;if(b.hasInlines(e,y)){var B=O.isAncestor(x,d.path)?d:b.end(e,x),A=O.isAncestor(x,c.path)?c:b.start(e,x);v=b.string(e,{anchor:A,focus:B},{voids:o}),m=!0}}if(Fe.isText(y)){var S=O.equals(x,h.path);for(S?(D=s?h.offset:y.text.length-h.offset,f=h.offset):(D=y.text.length,f=s?D:0),(S||m||r==="offset")&&(yield{path:x,offset:f},m=!1);;){if(C===0){if(v==="")break;C=E(v,r,s),v=Ts(v,C,s)[1]}if(f=s?f-C:f+C,D=D-C,D<0){C=-D;break}C=0,yield{path:x,offset:f}}}}function E(j,R,Z){return R==="character"?Rs(j,Z):R==="word"?Mg(j,Z):R==="line"||R==="block"?j.length:1}}var Yp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:s=!1}=n,{match:o,at:i=t.selection}=n;if(i){var l=b.before(t,i,{voids:s});if(l){var[,c]=b.first(t,[]),d=[l.path,c];if(O.isPath(i)&&i.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(O.isPath(i)){var[h]=b.parent(t,i);o=v=>h.children.includes(v)}else o=()=>!0;var[m]=b.nodes(t,{reverse:!0,at:d,match:o,mode:r,voids:s});return m}}},Qp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:s="forward"}=r,o={current:n,affinity:s,unref(){var{current:l}=o,c=b.rangeRefs(t);return c.delete(o),o.current=null,l}},i=b.rangeRefs(t);return i.add(o),o},Jp=e=>{var t=Jo.get(e);return t||(t=new Set,Jo.set(e,t)),t},Xp=(e,t,n)=>{if(G.isRange(t)&&!n)return t;var r=b.start(e,t),s=b.end(e,n||t);return{anchor:r,focus:s}};function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yi(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var e0=(e,t)=>{var{selection:n}=e;if(n){var r=(h,m)=>{if(!Fe.isText(h))return!1;var[v,C]=b.parent(e,m);return!e.isVoid(v)||e.markableVoid(v)},s=G.isExpanded(n),o=!1;if(!s){var[i,l]=b.node(e,n);if(i&&r(i,l)){var[c]=b.parent(e,l);o=c&&e.markableVoid(c)}}if(s||o)K.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var d=_p({},b.marks(e)||{});delete d[t],e.marks=d,tr.get(e)||e.onChange()}}},t0=(e,t)=>{Go.set(e,t)},n0=(e,t)=>b.point(e,t,{edge:"start"}),r0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:s=!1}=r,o=b.range(t,n),[i,l]=G.edges(o),c="";for(var[d,h]of b.nodes(t,{at:o,match:Fe.isText,voids:s})){var m=d.text;O.equals(h,l.path)&&(m=m.slice(0,l.offset)),O.equals(h,i.path)&&(m=m.slice(i.offset)),c+=m}return c},s0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:s=!1}=r,[o,i]=G.edges(n);if(o.offset!==0||i.offset!==0||G.isCollapsed(n)||O.hasPrevious(i.path))return n;var l=b.above(t,{at:i,match:D=>Be.isElement(D)&&b.isBlock(t,D),voids:s}),c=l?l[1]:[],d=b.start(t,o),h={anchor:d,focus:i},m=!0;for(var[v,C]of b.nodes(t,{at:h,match:Fe.isText,reverse:!0,voids:s})){if(m){m=!1;continue}if(v.text!==""||O.isBefore(C,c)){i={path:C,offset:v.text.length};break}}return{anchor:o,focus:i}},a0=(e,t)=>{var n=b.isNormalizing(e);b.setNormalizing(e,!1);try{t()}finally{b.setNormalizing(e,n)}b.normalize(e)},o0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.withoutNormalizing(t,()=>{var r,s,{reverse:o=!1,unit:i="character",distance:l=1,voids:c=!1}=n,{at:d=t.selection,hanging:h=!1}=n;if(d){var m=!1;if(G.isRange(d)&&G.isCollapsed(d)&&(m=!0,d=d.anchor),We.isPoint(d)){var v=b.void(t,{at:d,mode:"highest"});if(!c&&v){var[,C]=v;d=C}else{var D={unit:i,distance:l},f=o?b.before(t,d,D)||b.start(t,[]):b.after(t,d,D)||b.end(t,[]);d={anchor:d,focus:f},h=!0}}if(O.isPath(d)){K.removeNodes(t,{at:d,voids:c});return}if(!G.isCollapsed(d)){if(!h){var[,y]=G.edges(d),x=b.end(t,[]);We.equals(y,x)||(d=b.unhangRange(t,d,{voids:c}))}var[B,A]=G.edges(d),S=b.above(t,{match:je=>Be.isElement(je)&&b.isBlock(t,je),at:B,voids:c}),E=b.above(t,{match:je=>Be.isElement(je)&&b.isBlock(t,je),at:A,voids:c}),j=S&&E&&!O.equals(S[1],E[1]),R=O.equals(B.path,A.path),Z=c?null:(r=b.void(t,{at:B,mode:"highest"}))!==null&&r!==void 0?r:b.elementReadOnly(t,{at:B,mode:"highest"}),F=c?null:(s=b.void(t,{at:A,mode:"highest"}))!==null&&s!==void 0?s:b.elementReadOnly(t,{at:A,mode:"highest"});if(Z){var P=b.before(t,B);P&&S&&O.isAncestor(S[1],P.path)&&(B=P)}if(F){var Q=b.after(t,A);Q&&E&&O.isAncestor(E[1],Q.path)&&(A=Q)}var I=[],z;for(var U of b.nodes(t,{at:d,voids:c})){var[k,N]=U;z&&O.compare(N,z)===0||(!c&&Be.isElement(k)&&(b.isVoid(t,k)||b.isElementReadOnly(t,k))||!O.isCommon(N,B.path)&&!O.isCommon(N,A.path))&&(I.push(U),z=N)}var q=Array.from(I,je=>{var[,et]=je;return b.pathRef(t,et)}),V=b.pointRef(t,B),re=b.pointRef(t,A),J="";if(!R&&!Z){var oe=V.current,[ne]=b.leaf(t,oe),{path:ue}=oe,{offset:w}=B,X=ne.text.slice(w);X.length>0&&(t.apply({type:"remove_text",path:ue,offset:w,text:X}),J=X)}if(q.reverse().map(je=>je.unref()).filter(je=>je!==null).forEach(je=>K.removeNodes(t,{at:je,voids:c})),!F){var Y=re.current,[se]=b.leaf(t,Y),{path:H}=Y,ie=R?B.offset:0,Ae=se.text.slice(ie,A.offset);Ae.length>0&&(t.apply({type:"remove_text",path:H,offset:ie,text:Ae}),J=Ae)}!R&&j&&re.current&&V.current&&K.mergeNodes(t,{at:re.current,hanging:!0,voids:c}),m&&o&&i==="character"&&J.length>1&&J.match(/[\u0E00-\u0E7F]+/)&&K.insertText(t,J.slice(0,J.length-l));var Me=V.unref(),Le=re.unref(),Ve=o?Me||Le:Le||Me;n.at==null&&Ve&&K.select(t,Ve)}}})},i0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.withoutNormalizing(t,()=>{var{hanging:s=!1,voids:o=!1}=r,{at:i=Fs(t)}=r;if(n.length){if(G.isRange(i))if(s||(i=b.unhangRange(t,i,{voids:o})),G.isCollapsed(i))i=i.anchor;else{var[,l]=G.edges(i);if(!o&&b.void(t,{at:l}))return;var c=b.pointRef(t,l);K.delete(t,{at:i}),i=c.unref()}else O.isPath(i)&&(i=b.start(t,i));if(!(!o&&b.void(t,{at:i}))){var d=b.above(t,{at:i,match:w=>Be.isElement(w)&&b.isInline(t,w),mode:"highest",voids:o});if(d){var[,h]=d;if(b.isEnd(t,i,h)){var m=b.after(t,h);i=m}else if(b.isStart(t,i,h)){var v=b.before(t,h);i=v}}var C=b.above(t,{match:w=>Be.isElement(w)&&b.isBlock(t,w),at:i,voids:o}),[,D]=C,f=b.isStart(t,i,D),y=b.isEnd(t,i,D),x=f&&y,B=!f||f&&y,A=!y,[,S]=ge.first({children:n},[]),[,E]=ge.last({children:n},[]),j=[],R=w=>{var[X,Y]=w,se=Y.length===0;return se?!1:x?!0:!(B&&O.isAncestor(Y,S)&&Be.isElement(X)&&!t.isVoid(X)&&!t.isInline(X)||A&&O.isAncestor(Y,E)&&Be.isElement(X)&&!t.isVoid(X)&&!t.isInline(X))};for(var Z of ge.nodes({children:n},{pass:R}))R(Z)&&j.push(Z);var F=[],P=[],Q=[],I=!0,z=!1;for(var[U]of j)Be.isElement(U)&&!t.isInline(U)?(I=!1,z=!0,P.push(U)):I?F.push(U):Q.push(U);var[k]=b.nodes(t,{at:i,match:w=>Fe.isText(w)||b.isInline(t,w),mode:"highest",voids:o}),[,N]=k,q=b.isStart(t,i,N),V=b.isEnd(t,i,N),re=b.pathRef(t,y&&!Q.length?O.next(D):D),J=b.pathRef(t,V?O.next(N):N);K.splitNodes(t,{at:i,match:w=>z?Be.isElement(w)&&b.isBlock(t,w):Fe.isText(w)||b.isInline(t,w),mode:z?"lowest":"highest",always:z&&(!f||F.length>0)&&(!y||Q.length>0),voids:o});var oe=b.pathRef(t,!q||q&&V?O.next(N):N);if(K.insertNodes(t,F,{at:oe.current,match:w=>Fe.isText(w)||b.isInline(t,w),mode:"highest",voids:o}),x&&!F.length&&P.length&&!Q.length&&K.delete(t,{at:D,voids:o}),K.insertNodes(t,P,{at:re.current,match:w=>Be.isElement(w)&&b.isBlock(t,w),mode:"lowest",voids:o}),K.insertNodes(t,Q,{at:J.current,match:w=>Fe.isText(w)||b.isInline(t,w),mode:"highest",voids:o}),!r.at){var ne;if(Q.length>0&&J.current?ne=O.previous(J.current):P.length>0&&re.current?ne=O.previous(re.current):oe.current&&(ne=O.previous(oe.current)),ne){var ue=b.end(t,ne);K.select(t,ue)}}oe.unref(),re.unref(),J.unref()}}})},l0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:s}=t;if(s){if(r==="anchor")K.select(t,s.anchor);else if(r==="focus")K.select(t,s.focus);else if(r==="start"){var[o]=G.edges(s);K.select(t,o)}else if(r==="end"){var[,i]=G.edges(s);K.select(t,i)}}else return},u0=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},c0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t,{distance:s=1,unit:o="character",reverse:i=!1}=n,{edge:l=null}=n;if(r){l==="start"&&(l=G.isBackward(r)?"focus":"anchor"),l==="end"&&(l=G.isBackward(r)?"anchor":"focus");var{anchor:c,focus:d}=r,h={distance:s,unit:o,ignoreNonSelectable:!0},m={};if(l==null||l==="anchor"){var v=i?b.before(t,c,h):b.after(t,c,h);v&&(m.anchor=v)}if(l==null||l==="focus"){var C=i?b.before(t,d,h):b.after(t,d,h);C&&(m.focus=C)}K.setSelection(t,m)}},d0=(e,t)=>{var{selection:n}=e;if(t=b.range(e,t),n){K.setSelection(e,t);return}if(!G.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(ft.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})};function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ei(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var f0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:s}=t,{edge:o="both"}=r;if(s){o==="start"&&(o=G.isBackward(s)?"focus":"anchor"),o==="end"&&(o=G.isBackward(s)?"anchor":"focus");var{anchor:i,focus:l}=s,c=o==="anchor"?i:l;K.setSelection(t,{[o==="anchor"?"anchor":"focus"]:Bi(Bi({},c),n)})}},h0=(e,t)=>{var{selection:n}=e,r={},s={};if(n){for(var o in t)(o==="anchor"&&t.anchor!=null&&!We.equals(t.anchor,n.anchor)||o==="focus"&&t.focus!=null&&!We.equals(t.focus,n.focus)||o!=="anchor"&&o!=="focus"&&t[o]!==n[o])&&(r[o]=n[o],s[o]=t[o]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:s})}},g0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.withoutNormalizing(t,()=>{var{hanging:s=!1,voids:o=!1,mode:i="lowest"}=r,{at:l,match:c,select:d}=r;if(ge.isNode(n)&&(n=[n]),n.length!==0){var[h]=n;if(l||(l=Fs(t),d=!0),d==null&&(d=!1),G.isRange(l))if(s||(l=b.unhangRange(t,l,{voids:o})),G.isCollapsed(l))l=l.anchor;else{var[,m]=G.edges(l),v=b.pointRef(t,m);K.delete(t,{at:l}),l=v.unref()}if(We.isPoint(l)){c==null&&(Fe.isText(h)?c=R=>Fe.isText(R):t.isInline(h)?c=R=>Fe.isText(R)||b.isInline(t,R):c=R=>Be.isElement(R)&&b.isBlock(t,R));var[C]=b.nodes(t,{at:l.path,match:c,mode:i,voids:o});if(C){var[,D]=C,f=b.pathRef(t,D),y=b.isEnd(t,l,D);K.splitNodes(t,{at:l,match:c,mode:i,voids:o});var x=f.unref();l=y?O.next(x):x}else return}var B=O.parent(l),A=l[l.length-1];if(!(!o&&b.void(t,{at:B}))){for(var S of n){var E=B.concat(A);A++,t.apply({type:"insert_node",path:E,node:S}),l=O.next(l)}if(l=O.previous(l),d){var j=b.end(t,l);j&&K.select(t,j)}}}})},p0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.withoutNormalizing(t,()=>{var{at:r=t.selection,mode:s="lowest",voids:o=!1}=n,{match:i}=n;if(i==null&&(i=O.isPath(r)?Rn(t,r):S=>Be.isElement(S)&&b.isBlock(t,S)),!!r){var l=b.nodes(t,{at:r,match:i,mode:s,voids:o}),c=Array.from(l,S=>{var[,E]=S;return b.pathRef(t,E)});for(var d of c){var h=d.unref();if(h.length<2)throw new Error("Cannot lift node at a path [".concat(h,"] because it has a depth of less than `2`."));var m=b.node(t,O.parent(h)),[v,C]=m,D=h[h.length-1],{length:f}=v.children;if(f===1){var y=O.next(C);K.moveNodes(t,{at:h,to:y,voids:o}),K.removeNodes(t,{at:C,voids:o})}else if(D===0)K.moveNodes(t,{at:h,to:C,voids:o});else if(D===f-1){var x=O.next(C);K.moveNodes(t,{at:h,to:x,voids:o})}else{var B=O.next(h),A=O.next(C);K.splitNodes(t,{at:B,voids:o}),K.moveNodes(t,{at:h,to:A,voids:o})}}}})},m0=["text"],v0=["children"],Ai=(e,t)=>{if(Be.isElement(t)){var n=t;return b.isVoid(e,t)?!0:n.children.length===1?Ai(e,n.children[0]):!1}else return!b.isEditor(t)},C0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.withoutNormalizing(t,()=>{var{match:r,at:s=t.selection}=n,{hanging:o=!1,voids:i=!1,mode:l="lowest"}=n;if(s){if(r==null)if(O.isPath(s)){var[c]=b.parent(t,s);r=P=>c.children.includes(P)}else r=P=>Be.isElement(P)&&b.isBlock(t,P);if(!o&&G.isRange(s)&&(s=b.unhangRange(t,s,{voids:i})),G.isRange(s))if(G.isCollapsed(s))s=s.anchor;else{var[,d]=G.edges(s),h=b.pointRef(t,d);K.delete(t,{at:s}),s=h.unref(),n.at==null&&K.select(t,s)}var[m]=b.nodes(t,{at:s,match:r,voids:i,mode:l}),v=b.previous(t,{at:s,match:r,voids:i,mode:l});if(!(!m||!v)){var[C,D]=m,[f,y]=v;if(!(D.length===0||y.length===0)){var x=O.next(y),B=O.common(D,y),A=O.isSibling(D,y),S=Array.from(b.levels(t,{at:D}),P=>{var[Q]=P;return Q}).slice(B.length).slice(0,-1),E=b.above(t,{at:D,mode:"highest",match:P=>S.includes(P)&&Ai(t,P)}),j=E&&b.pathRef(t,E[1]),R,Z;if(Fe.isText(C)&&Fe.isText(f)){var F=Jt(C,m0);Z=f.text.length,R=F}else if(Be.isElement(C)&&Be.isElement(f)){var F=Jt(C,v0);Z=f.children.length,R=F}else throw new Error("Cannot merge the node at path [".concat(D,"] with the previous sibling because it is not the same kind: ").concat(ft.stringify(C)," ").concat(ft.stringify(f)));A||K.moveNodes(t,{at:D,to:x,voids:i}),j&&K.removeNodes(t,{at:j.current,voids:i}),Be.isElement(f)&&b.isEmpty(t,f)||Fe.isText(f)&&f.text===""&&y[y.length-1]!==0?K.removeNodes(t,{at:y,voids:i}):t.apply({type:"merge_node",path:x,position:Z,properties:R}),j&&j.unref()}}}})},D0=(e,t)=>{b.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:s="lowest",voids:o=!1}=t,{match:i}=t;if(r){i==null&&(i=O.isPath(r)?Rn(e,r):C=>Be.isElement(C)&&b.isBlock(e,C));var l=b.pathRef(e,n),c=b.nodes(e,{at:r,match:i,mode:s,voids:o}),d=Array.from(c,C=>{var[,D]=C;return b.pathRef(e,D)});for(var h of d){var m=h.unref(),v=l.current;m.length!==0&&e.apply({type:"move_node",path:m,newPath:v}),l.current&&O.isSibling(v,m)&&O.isAfter(v,m)&&(l.current=O.next(l.current))}l.unref()}})},b0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.withoutNormalizing(t,()=>{var{hanging:r=!1,voids:s=!1,mode:o="lowest"}=n,{at:i=t.selection,match:l}=n;if(i){l==null&&(l=O.isPath(i)?Rn(t,i):C=>Be.isElement(C)&&b.isBlock(t,C)),!r&&G.isRange(i)&&(i=b.unhangRange(t,i,{voids:s}));var c=b.nodes(t,{at:i,match:l,mode:o,voids:s}),d=Array.from(c,C=>{var[,D]=C;return b.pathRef(t,D)});for(var h of d){var m=h.unref();if(m){var[v]=b.node(t,m);t.apply({type:"remove_node",path:m,node:v})}}}})},x0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.withoutNormalizing(t,()=>{var{match:s,at:o=t.selection,compare:i,merge:l}=r,{hanging:c=!1,mode:d="lowest",split:h=!1,voids:m=!1}=r;if(o){if(s==null&&(s=O.isPath(o)?Rn(t,o):Z=>Be.isElement(Z)&&b.isBlock(t,Z)),!c&&G.isRange(o)&&(o=b.unhangRange(t,o,{voids:m})),h&&G.isRange(o)){if(G.isCollapsed(o)&&b.leaf(t,o.anchor)[0].text.length>0)return;var v=b.rangeRef(t,o,{affinity:"inward"}),[C,D]=G.edges(o),f=d==="lowest"?"lowest":"highest",y=b.isEnd(t,D,D.path);K.splitNodes(t,{at:D,match:s,mode:f,voids:m,always:!y});var x=b.isStart(t,C,C.path);K.splitNodes(t,{at:C,match:s,mode:f,voids:m,always:!x}),o=v.unref(),r.at==null&&K.select(t,o)}i||(i=(Z,F)=>Z!==F);for(var[B,A]of b.nodes(t,{at:o,match:s,mode:d,voids:m})){var S={},E={};if(A.length!==0){var j=!1;for(var R in n)R==="children"||R==="text"||i(n[R],B[R])&&(j=!0,B.hasOwnProperty(R)&&(S[R]=B[R]),l?n[R]!=null&&(E[R]=l(B[R],n[R])):n[R]!=null&&(E[R]=n[R]));j&&t.apply({type:"set_node",path:A,properties:S,newProperties:E})}}}})},y0=(e,t)=>{if(G.isCollapsed(t))return t.anchor;var[,n]=G.edges(t),r=b.pointRef(e,n);return K.delete(e,{at:t}),r.unref()},E0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.withoutNormalizing(t,()=>{var{mode:r="lowest",voids:s=!1}=n,{match:o,at:i=t.selection,height:l=0,always:c=!1}=n;if(o==null&&(o=re=>Be.isElement(re)&&b.isBlock(t,re)),G.isRange(i)&&(i=y0(t,i)),O.isPath(i)){var d=i,h=b.point(t,d),[m]=b.parent(t,d);o=re=>re===m,l=h.path.length-d.length+1,i=h,c=!0}if(i){var v=b.pointRef(t,i,{affinity:"backward"}),C;try{var[D]=b.nodes(t,{at:i,match:o,mode:r,voids:s});if(!D)return;var f=b.void(t,{at:i,mode:"highest"}),y=0;if(!s&&f){var[x,B]=f;if(Be.isElement(x)&&t.isInline(x)){var A=b.after(t,B);if(!A){var S={text:""},E=O.next(B);K.insertNodes(t,S,{at:E,voids:s}),A=b.point(t,E)}i=A,c=!0}var j=i.path.length-B.length;l=j+1,c=!0}C=b.pointRef(t,i);var R=i.path.length-l,[,Z]=D,F=i.path.slice(0,R),P=l===0?i.offset:i.path[R]+y;for(var[Q,I]of b.levels(t,{at:F,reverse:!0,voids:s})){var z=!1;if(I.length<Z.length||I.length===0||!s&&Be.isElement(Q)&&b.isVoid(t,Q))break;var U=v.current,k=b.isEnd(t,U,I);if(c||!v||!b.isEdge(t,U,I)){z=!0;var N=ge.extractProps(Q);t.apply({type:"split_node",path:I,position:P,properties:N})}P=I[I.length-1]+(z||k?1:0)}if(n.at==null){var q=C.current||b.end(t,[]);K.select(t,q)}}finally{var V;v.unref(),(V=C)===null||V===void 0||V.unref()}}})},B0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var s={};for(var o of n)s[o]=null;K.setNodes(t,s,r)},A0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.withoutNormalizing(t,()=>{var{mode:r="lowest",split:s=!1,voids:o=!1}=n,{at:i=t.selection,match:l}=n;if(i){l==null&&(l=O.isPath(i)?Rn(t,i):C=>Be.isElement(C)&&b.isBlock(t,C)),O.isPath(i)&&(i=b.range(t,i));var c=G.isRange(i)?b.rangeRef(t,i):null,d=b.nodes(t,{at:i,match:l,mode:r,voids:o}),h=Array.from(d,C=>{var[,D]=C;return b.pathRef(t,D)}).reverse(),m=function(D){var f=D.unref(),[y]=b.node(t,f),x=b.range(t,f);s&&c&&(x=G.intersection(c.current,x)),K.liftNodes(t,{at:x,match:B=>Be.isAncestor(y)&&y.children.includes(B),voids:o})};for(var v of h)m(v);c&&c.unref()}})};function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ji(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var j0=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.withoutNormalizing(t,()=>{var{mode:s="lowest",split:o=!1,voids:i=!1}=r,{match:l,at:c=t.selection}=r;if(c){if(l==null&&(O.isPath(c)?l=Rn(t,c):t.isInline(n)?l=x=>Be.isElement(x)&&b.isInline(t,x)||Fe.isText(x):l=x=>Be.isElement(x)&&b.isBlock(t,x)),o&&G.isRange(c)){var[d,h]=G.edges(c),m=b.rangeRef(t,c,{affinity:"inward"});K.splitNodes(t,{at:h,match:l,voids:i}),K.splitNodes(t,{at:d,match:l,voids:i}),c=m.unref(),r.at==null&&K.select(t,c)}var v=Array.from(b.nodes(t,{at:c,match:t.isInline(n)?x=>Be.isElement(x)&&b.isBlock(t,x):x=>b.isEditor(x),mode:"lowest",voids:i}));for(var[,C]of v){var D=G.isRange(c)?G.intersection(c,b.range(t,C)):c;if(D){var f=Array.from(b.nodes(t,{at:D,match:l,mode:s,voids:i}));if(f.length>0){var y=function(){var[x]=f,B=f[f.length-1],[,A]=x,[,S]=B;if(A.length===0&&S.length===0)return"continue";var E=O.equals(A,S)?O.parent(A):O.common(A,S),j=b.range(t,A,S),R=b.node(t,E),[Z]=R,F=E.length+1,P=O.next(S.slice(0,F)),Q=wi(wi({},n),{},{children:[]});K.insertNodes(t,Q,{at:P,voids:i}),K.moveNodes(t,{at:j,match:I=>Be.isAncestor(Z)&&Z.children.includes(I),to:P.concat(0),voids:i})}();if(y==="continue")continue}}}}})},w0=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Xg(e,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return sp(e,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return ip(e,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return lp(e,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return up(e,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return ep(e,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return bp(e,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return yp(e,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i0(e,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return xp(e,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Bp(e,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return tp(e,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e0(e,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return _g(e,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return np(e,...r)},above:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return rp(e,...r)},after:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return ap(e,...r)},before:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return op(e,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return l0(e,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return o0(e,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return u0(e,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return cp(e,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return dp(e,...r)},end:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return fp(e,...r)},first:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return hp(e,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return gp(e,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return kp(e,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return mp(e,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return vp(e,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Cp(e,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Dp(e,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return g0(e,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Ap(e,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return jp(e,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return wp(e,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Fp(e,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Rp(e,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Tp(e,...r)},last:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Mp(e,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Op(e,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Sp(e,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return p0(e,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return C0(e,...r)},move:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return c0(e,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return D0(e,...r)},next:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Lp(e,...r)},node:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return $p(e,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Np(e,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Zp(e,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return zp(e,...r)},path:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Vp(e,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Wp(e,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Up(e,...r)},point:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Kp(e,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Hp(e,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return qp(e,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Gp(e,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Yp(e,...r)},range:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Xp(e,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Qp(e,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Jp(e,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return b0(e,...r)},select:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return d0(e,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return x0(e,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t0(e,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return f0(e,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return h0(e,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return E0(e,...r)},start:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return n0(e,...r)},string:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return r0(e,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return s0(e,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return B0(e,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return A0(e,...r)},void:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return pp(e,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a0(e,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return j0(e,...r)}};return e},F0={isHistory(e){return pt(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||ln.isOperationList(e.redos[0].operations))&&(e.undos.length===0||ln.isOperationList(e.undos[0].operations))}},_y=new WeakMap,Ms=new WeakMap,Os=new WeakMap,Mn={isHistoryEditor(e){return F0.isHistory(e.history)&&b.isEditor(e)},isMerging(e){return Os.get(e)},isSaving(e){return Ms.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=Mn.isMerging(e);Os.set(e,!1),t(),Os.set(e,n)},withoutSaving(e,t){var n=Mn.isSaving(e);Ms.set(e,!1),t(),Ms.set(e,n)}},R0=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:r}=t,{redos:s}=r;if(s.length>0){var o=s[s.length-1];o.selectionBefore&&K.setSelection(t,o.selectionBefore),Mn.withoutSaving(t,()=>{b.withoutNormalizing(t,()=>{for(var i of o.operations)t.apply(i)})}),r.redos.pop(),t.writeHistory("undos",o)}},t.undo=()=>{var{history:r}=t,{undos:s}=r;if(s.length>0){var o=s[s.length-1];Mn.withoutSaving(t,()=>{b.withoutNormalizing(t,()=>{var i=o.operations.map(ln.inverse).reverse();for(var l of i)t.apply(l);o.selectionBefore&&K.setSelection(t,o.selectionBefore)})}),t.writeHistory("redos",o),r.undos.pop()}},t.apply=r=>{var{operations:s,history:o}=t,{undos:i}=o,l=i[i.length-1],c=l&&l.operations[l.operations.length-1],d=Mn.isSaving(t),h=Mn.isMerging(t);if(d==null&&(d=M0(r)),d){if(h==null&&(l==null?h=!1:s.length!==0?h=!0:h=T0(r,c)),l&&h)l.operations.push(r);else{var m={operations:[r],selectionBefore:t.selection};t.writeHistory("undos",m)}for(;i.length>100;)i.shift();o.redos=[]}n(r)},t.writeHistory=(r,s)=>{t.history[r].push(s)},t},T0=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&O.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&O.equals(e.path,t.path)),M0=(e,t)=>e.type!=="set_selection",O0=p(7018),Fi=p.n(O0),S0=p(29577),I0=p.n(S0),P0=p(14846),k0=p.n(P0);function Ri(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function Ti(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function Ss(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return Ti(n.overflowY,t)||Ti(n.overflowX,t)||function(r){var s=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}}(r);return!!s&&(s.clientHeight<r.scrollHeight||s.clientWidth<r.scrollWidth)}(e)}return!1}function Or(e,t,n,r,s,o,i,l){return o<e&&i>t||o>e&&i<t?0:o<=e&&l<=n||i>=t&&l>=n?o-e-r:i>t&&l<n||o<e&&l>n?i-t+s:0}var Mi=function(e,t){var n=window,r=t.scrollMode,s=t.block,o=t.inline,i=t.boundary,l=t.skipOverflowHiddenElements,c=typeof i=="function"?i:function(je){return je!==i};if(!Ri(e))throw new TypeError("Invalid target");for(var d,h,m=document.scrollingElement||document.documentElement,v=[],C=e;Ri(C)&&c(C);){if((C=(h=(d=C).parentElement)==null?d.getRootNode().host||null:h)===m){v.push(C);break}C!=null&&C===document.body&&Ss(C)&&!Ss(document.documentElement)||C!=null&&Ss(C,l)&&v.push(C)}for(var D=n.visualViewport?n.visualViewport.width:innerWidth,f=n.visualViewport?n.visualViewport.height:innerHeight,y=window.scrollX||pageXOffset,x=window.scrollY||pageYOffset,B=e.getBoundingClientRect(),A=B.height,S=B.width,E=B.top,j=B.right,R=B.bottom,Z=B.left,F=s==="start"||s==="nearest"?E:s==="end"?R:E+A/2,P=o==="center"?Z+S/2:o==="end"?j:Z,Q=[],I=0;I<v.length;I++){var z=v[I],U=z.getBoundingClientRect(),k=U.height,N=U.width,q=U.top,V=U.right,re=U.bottom,J=U.left;if(r==="if-needed"&&E>=0&&Z>=0&&R<=f&&j<=D&&E>=q&&R<=re&&Z>=J&&j<=V)return Q;var oe=getComputedStyle(z),ne=parseInt(oe.borderLeftWidth,10),ue=parseInt(oe.borderTopWidth,10),w=parseInt(oe.borderRightWidth,10),X=parseInt(oe.borderBottomWidth,10),Y=0,se=0,H="offsetWidth"in z?z.offsetWidth-z.clientWidth-ne-w:0,ie="offsetHeight"in z?z.offsetHeight-z.clientHeight-ue-X:0,Ae="offsetWidth"in z?z.offsetWidth===0?0:N/z.offsetWidth:0,Me="offsetHeight"in z?z.offsetHeight===0?0:k/z.offsetHeight:0;if(m===z)Y=s==="start"?F:s==="end"?F-f:s==="nearest"?Or(x,x+f,f,ue,X,x+F,x+F+A,A):F-f/2,se=o==="start"?P:o==="center"?P-D/2:o==="end"?P-D:Or(y,y+D,D,ne,w,y+P,y+P+S,S),Y=Math.max(0,Y+x),se=Math.max(0,se+y);else{Y=s==="start"?F-q-ue:s==="end"?F-re+X+ie:s==="nearest"?Or(q,re,k,ue,X+ie,F,F+A,A):F-(q+k/2)+ie/2,se=o==="start"?P-J-ne:o==="center"?P-(J+N/2)+H/2:o==="end"?P-V+w+H:Or(J,V,N,ne,w+H,P,P+S,S);var Le=z.scrollLeft,Ve=z.scrollTop;F+=Ve-(Y=Math.max(0,Math.min(Ve+Y/Me,z.scrollHeight-k/Me+ie))),P+=Le-(se=Math.max(0,Math.min(Le+se/Ae,z.scrollWidth-N/Ae+H)))}Q.push({el:z,top:Y,left:se})}return Q};function Oi(e){return e===Object(e)&&Object.keys(e).length!==0}function L0(e,t){t===void 0&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(r){var s=r.el,o=r.top,i=r.left;s.scroll&&n?s.scroll({top:o,left:i,behavior:t}):(s.scrollTop=o,s.scrollLeft=i)})}function $0(e){return e===!1?{block:"end",inline:"nearest"}:Oi(e)?e:{block:"start",inline:"nearest"}}function N0(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Oi(t)&&typeof t.behavior=="function")return t.behavior(n?Mi(e,t):[]);if(n){var r=$0(t);return L0(Mi(e,r),r.behavior)}}const Z0=N0;var mn=[],z0=function(){return mn.some(function(e){return e.activeTargets.length>0})},W0=function(){return mn.some(function(e){return e.skippedTargets.length>0})},Si="ResizeObserver loop completed with undelivered notifications.",U0=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Si}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Si),window.dispatchEvent(e)},rr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(rr||(rr={}));var vn=function(e){return Object.freeze(e)},V0=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,vn(this)}return e}(),Ii=function(){function e(t,n,r,s){return this.x=t,this.y=n,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,vn(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,s=t.top,o=t.right,i=t.bottom,l=t.left,c=t.width,d=t.height;return{x:n,y:r,top:s,right:o,bottom:i,left:l,width:c,height:d}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Is=function(e){return e instanceof SVGElement&&"getBBox"in e},Pi=function(e){if(Is(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var s=e,o=s.offsetWidth,i=s.offsetHeight;return!(o||i||e.getClientRects().length)},ki=function(e){var t;if(e instanceof Element)return!0;var n=(t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},H0=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},sr=typeof window<"u"?window:{},Sr=new WeakMap,Li=/auto|scroll/,q0=/^tb|vertical/,K0=/msie|trident/i.test(sr.navigator&&sr.navigator.userAgent),Kt=function(e){return parseFloat(e||"0")},On=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new V0((n?t:e)||0,(n?e:t)||0)},$i=vn({devicePixelContentBoxSize:On(),borderBoxSize:On(),contentBoxSize:On(),contentRect:new Ii(0,0,0,0)}),Ni=function(e,t){if(t===void 0&&(t=!1),Sr.has(e)&&!t)return Sr.get(e);if(Pi(e))return Sr.set(e,$i),$i;var n=getComputedStyle(e),r=Is(e)&&e.ownerSVGElement&&e.getBBox(),s=!K0&&n.boxSizing==="border-box",o=q0.test(n.writingMode||""),i=!r&&Li.test(n.overflowY||""),l=!r&&Li.test(n.overflowX||""),c=r?0:Kt(n.paddingTop),d=r?0:Kt(n.paddingRight),h=r?0:Kt(n.paddingBottom),m=r?0:Kt(n.paddingLeft),v=r?0:Kt(n.borderTopWidth),C=r?0:Kt(n.borderRightWidth),D=r?0:Kt(n.borderBottomWidth),f=r?0:Kt(n.borderLeftWidth),y=m+d,x=c+h,B=f+C,A=v+D,S=l?e.offsetHeight-A-e.clientHeight:0,E=i?e.offsetWidth-B-e.clientWidth:0,j=s?y+B:0,R=s?x+A:0,Z=r?r.width:Kt(n.width)-j-E,F=r?r.height:Kt(n.height)-R-S,P=Z+y+E+B,Q=F+x+S+A,I=vn({devicePixelContentBoxSize:On(Math.round(Z*devicePixelRatio),Math.round(F*devicePixelRatio),o),borderBoxSize:On(P,Q,o),contentBoxSize:On(Z,F,o),contentRect:new Ii(m,c,Z,F)});return Sr.set(e,I),I},Zi=function(e,t,n){var r=Ni(e,n),s=r.borderBoxSize,o=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case rr.DEVICE_PIXEL_CONTENT_BOX:return i;case rr.BORDER_BOX:return s;default:return o}},G0=function(){function e(t){var n=Ni(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=vn([n.borderBoxSize]),this.contentBoxSize=vn([n.contentBoxSize]),this.devicePixelContentBoxSize=vn([n.devicePixelContentBoxSize])}return e}(),zi=function(e){if(Pi(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Y0=function(){var e=1/0,t=[];mn.forEach(function(i){if(i.activeTargets.length!==0){var l=[];i.activeTargets.forEach(function(d){var h=new G0(d.target),m=zi(d.target);l.push(h),d.lastReportedSize=Zi(d.target,d.observedBox),m<e&&(e=m)}),t.push(function(){i.callback.call(i.observer,l,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var s=r[n];s()}return e},Wi=function(e){mn.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(zi(s.target)>e?n.activeTargets.push(s):n.skippedTargets.push(s))})})},Q0=function(){var e=0;for(Wi(e);z0();)e=Y0(),Wi(e);return W0()&&U0(),e>0},Ps,Ui=[],J0=function(){return Ui.splice(0).forEach(function(e){return e()})},X0=function(e){if(!Ps){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return J0()}).observe(n,r),Ps=function(){n.textContent="".concat(t?t--:t++)}}Ui.push(e),Ps()},_0=function(e){X0(function(){requestAnimationFrame(e)})},Ir=0,em=function(){return!!Ir},tm=250,nm={attributes:!0,characterData:!0,childList:!0,subtree:!0},Vi=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Hi=function(e){return e===void 0&&(e=0),Date.now()+e},ks=!1,rm=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=tm),!ks){ks=!0;var r=Hi(t);_0(function(){var s=!1;try{s=Q0()}finally{if(ks=!1,t=r-Hi(),!em())return;s?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,nm)};document.body?n():sr.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Vi.forEach(function(n){return sr.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Vi.forEach(function(n){return sr.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),Ls=new rm,qi=function(e){!Ir&&e>0&&Ls.start(),Ir+=e,!Ir&&Ls.stop()},sm=function(e){return!Is(e)&&!H0(e)&&getComputedStyle(e).display==="inline"},am=function(){function e(t,n){this.target=t,this.observedBox=n||rr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Zi(this.target,this.observedBox,!0);return sm(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),om=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),Pr=new WeakMap,Ki=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},kr=function(){function e(){}return e.connect=function(t,n){var r=new om(t,n);Pr.set(t,r)},e.observe=function(t,n,r){var s=Pr.get(t),o=s.observationTargets.length===0;Ki(s.observationTargets,n)<0&&(o&&mn.push(s),s.observationTargets.push(new am(n,r&&r.box)),qi(1),Ls.schedule())},e.unobserve=function(t,n){var r=Pr.get(t),s=Ki(r.observationTargets,n),o=r.observationTargets.length===1;s>=0&&(o&&mn.splice(mn.indexOf(r),1),r.observationTargets.splice(s,1),qi(-1))},e.disconnect=function(t){var n=this,r=Pr.get(t);r.observationTargets.slice().forEach(function(s){return n.unobserve(t,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),im=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");kr.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ki(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");kr.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ki(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");kr.unobserve(this,t)},e.prototype.disconnect=function(){kr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),$s=p(62549),Ns=p(48497);function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lm(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Sn(e,t){if(e==null)return{};var n=lm(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var $r=(0,g.createContext)(null),un=()=>{var e=(0,g.useContext)($r);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Gi=parseInt(g.version.split(".")[0],10),um=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Yi=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),At=typeof navigator<"u"&&/Android/.test(navigator.userAgent),ar=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),or=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),cm=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Qi=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),dm=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),fm=At&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),hm=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),gm=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),pm=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Nr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cn=(!dm||!fm)&&!cm&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Zs=new WeakMap,zs=new WeakMap,Ji=new WeakMap,Zr=new WeakMap,Ws=new WeakMap,ir=new WeakMap,Cn=new WeakMap,Us=new WeakMap,zr=new WeakMap,Vs=new WeakMap,Dn=new WeakMap,bn=new WeakMap,lr=new WeakMap,Hs=new WeakMap,qs=new WeakMap,Zt=new WeakMap,_t=new WeakMap,jt=new WeakMap,dn=new WeakMap,fn=new WeakMap,Xi=new WeakMap,In=Symbol("placeholder"),_i=Symbol("mark-placeholder"),mm=globalThis.Text,Ks=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,vm=e=>hn(e)&&e.nodeType===8,St=e=>hn(e)&&e.nodeType===1,hn=e=>{var t=Ks(e);return!!t&&e instanceof t.Node},Gs=e=>{var t=e&&e.anchorNode&&Ks(e.anchorNode);return!!t&&e instanceof t.Selection},el=e=>hn(e)&&e.nodeType===3,Cm=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,Dm=e=>{var[t,n]=e;if(St(t)&&t.childNodes.length){var r=n===t.childNodes.length,s=r?n-1:n;for([t,s]=tl(t,s,r?"backward":"forward"),r=s<n;St(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=xm(t,o,r?"backward":"forward")}n=r&&t.textContent!=null?t.textContent.length:0}return[t,n]},bm=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},tl=(e,t,n)=>{for(var{childNodes:r}=e,s=r[t],o=t,i=!1,l=!1;(vm(s)||St(s)&&s.childNodes.length===0||St(s)&&s.getAttribute("contenteditable")==="false")&&!(i&&l);){if(o>=r.length){i=!0,o=t-1,n="backward";continue}if(o<0){l=!0,o=t+1,n="forward";continue}s=r[o],t=o,o+=n==="forward"?1:-1}return[s,t]},xm=(e,t,n)=>{var[r]=tl(e,t,n);return r},nl=e=>{var t="";if(el(e)&&e.nodeValue)return e.nodeValue;if(St(e)){for(var n of Array.from(e.childNodes))t+=nl(n);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(t+=`
`)}return t},ym=/data-slate-fragment="(.+?)"/m,Em=e=>{var t=e.getData("text/html"),[,n]=t.match(ym)||[];return n},Ys=(e,t,n)=>{var{target:r}=t;if(St(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:s}=te.getWindow(e);if(s.contains(r))return te.hasDOMNode(e,r,{editable:!0});var o=n.find(i=>{var{addedNodes:l,removedNodes:c}=i;for(var d of l)if(d===r||d.contains(r))return!0;for(var h of c)if(h===r||h.contains(r))return!0});return!o||o===t?!1:Ys(e,o,n)},Bm=0;class Am{constructor(){this.id="".concat(Bm++)}}var te={androidPendingDiffs:e=>jt.get(e),androidScheduleFlush:e=>{var t;(t=qs.get(e))===null||t===void 0||t()},blur:e=>{var t=te.toDOMNode(e,e),n=te.findDocumentOrShadowRoot(e);Dn.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=te.findDocumentOrShadowRoot(e),r=n.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&K.deselect(e)},findDocumentOrShadowRoot:e=>{var t=te.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:s}=t;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o=te.toSlateNode(e,t.target),i=te.findPath(e,o);if(Be.isElement(o)&&b.isVoid(e,o)){var l=s.getBoundingClientRect(),c=e.isInline(o)?n-l.left<l.left+l.width-n:r-l.top<l.top+l.height-r,d=b.point(e,i,{edge:c?"start":"end"}),h=c?b.before(e,d):b.after(e,d);if(h){var m=b.range(e,h);return m}}var v,{document:C}=te.getWindow(e);if(C.caretRangeFromPoint)v=C.caretRangeFromPoint(n,r);else{var D=C.caretPositionFromPoint(n,r);D&&(v=C.createRange(),v.setStart(D.offsetNode,D.offset),v.setEnd(D.offsetNode,D.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var f=te.toSlateRange(e,v,{exactMatch:!1,suppressThrow:!1});return f},findKey:(e,t)=>{var n=Us.get(t);return n||(n=new Am,Us.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var s=zs.get(r);if(s==null){if(b.isEditor(r))return n;break}var o=Zs.get(r);if(o==null)break;n.unshift(o),r=s}throw new Error("Unable to find the path for Slate node: ".concat(ft.stringify(t)))},focus:e=>{var t=te.toDOMNode(e,e),n=te.findDocumentOrShadowRoot(e);Dn.set(e,!0),n.activeElement!==t&&t.focus({preventScroll:!0})},getWindow:e=>{var t=Ji.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:s=!1}=r,o=te.toDOMNode(t,t),i;try{i=St(n)?n:n.parentElement}catch(l){if(!l.message.includes('Permission denied to access property "nodeType"'))throw l}return i?i.closest("[data-slate-editor]")===o&&(!s||i.isContentEditable?!0:typeof i.isContentEditable=="boolean"&&i.closest('[contenteditable="false"]')===o||!!i.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>hn(t)&&te.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return b.hasPath(e,n.path)&&b.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>te.hasEditableTarget(e,t)||te.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>hn(t)&&te.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!bn.get(e),isFocused:e=>!!Dn.get(e),isReadOnly:e=>!!Vs.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(Vs.get(e))return!1;var n=te.hasTarget(e,t)&&te.toSlateNode(e,t);return Be.isElement(n)&&b.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=zr.get(e),r=b.isEditor(t)?Zr.get(e):n?.get(te.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(ft.stringify(t)));return r},toDOMPoint:(e,t)=>{var[n]=b.node(e,t.path),r=te.toDOMNode(e,n),s;b.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",i=Array.from(r.querySelectorAll(o)),l=0,c=0;c<i.length;c++){var d=i[c],h=d.childNodes[0];if(!(h==null||h.textContent==null)){var{length:m}=h.textContent,v=d.getAttribute("data-slate-length"),C=v==null?m:parseInt(v,10),D=l+C,f=i[c+1];if(t.offset===D&&f!==null&&f!==void 0&&f.hasAttribute("data-slate-mark-placeholder")){var y,x=f.childNodes[0];s=[x instanceof mm?x:f,(y=f.textContent)!==null&&y!==void 0&&y.startsWith("\uFEFF")?1:0];break}if(t.offset<=D){var B=Math.min(m,Math.max(0,t.offset-l));s=[h,B];break}l=D}}if(!s)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(ft.stringify(t)));return s},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,s=G.isBackward(t),o=te.toDOMPoint(e,n),i=G.isCollapsed(t)?o:te.toDOMPoint(e,r),l=te.getWindow(e),c=l.document.createRange(),[d,h]=s?i:o,[m,v]=s?o:i,C=St(d)?d:d.parentElement,D=!!C.getAttribute("data-slate-zero-width"),f=St(m)?m:m.parentElement,y=!!f.getAttribute("data-slate-zero-width");return c.setStart(d,D?1:h),c.setEnd(m,y?1:v),c},toSlateNode:(e,t)=>{var n=St(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?ir.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:s}=n,[o,i]=r?t:Dm(t),l=o.parentNode,c=null,d=0;if(l){var h,m,v=te.toDOMNode(e,e),C=l.closest('[data-slate-void="true"]'),D=C&&v.contains(C)?C:null,f=l.closest("[data-slate-leaf]"),y=null;if(f){if(c=f.closest('[data-slate-node="text"]'),c){var x=te.getWindow(e),B=x.document.createRange();B.setStart(c,0),B.setEnd(o,i);var A=B.cloneContents(),S=[...Array.prototype.slice.call(A.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(A.querySelectorAll("[contenteditable=false]"))];S.forEach(U=>{if(At&&!r&&U.hasAttribute("data-slate-zero-width")&&U.textContent.length>0&&U.textContext!=="\uFEFF"){U.textContent.startsWith("\uFEFF")&&(U.textContent=U.textContent.slice(1));return}U.parentNode.removeChild(U)}),d=A.textContent.length,y=c}}else if(D){for(var E=D.querySelectorAll("[data-slate-leaf]"),j=0;j<E.length;j++){var R=E[j];if(te.hasDOMNode(e,R)){f=R;break}}f?(c=f.closest('[data-slate-node="text"]'),y=f,d=y.textContent.length,y.querySelectorAll("[data-slate-zero-width]").forEach(U=>{d-=U.textContent.length})):d=1}y&&d===y.textContent.length&&At&&y.getAttribute("data-slate-zero-width")==="z"&&(h=y.textContent)!==null&&h!==void 0&&h.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||ar&&(m=y.textContent)!==null&&m!==void 0&&m.endsWith(`

`))&&d--}if(At&&!c&&!r){var Z=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(Z&&te.hasDOMNode(e,Z,{editable:!0})){var F=te.toSlateNode(e,Z),{path:P,offset:Q}=b.start(e,te.findPath(e,F));return Z.querySelector("[data-slate-leaf]")||(Q=i),{path:P,offset:Q}}}if(!c){if(s)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var I=te.toSlateNode(e,c),z=te.findPath(e,I);return{path:z,offset:d}},toSlateRange:(e,t,n)=>{var{exactMatch:r,suppressThrow:s}=n,o=Gs(t)?t.anchorNode:t.startContainer,i,l,c,d,h;if(o)if(Gs(t)){if(ar&&t.rangeCount>1){c=t.focusNode;var m=t.getRangeAt(0),v=t.getRangeAt(t.rangeCount-1);if(c instanceof HTMLTableRowElement&&m.startContainer instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement){let E=function(j){return j.childElementCount>0?E(j.children[0]):j};var C=m.startContainer,D=v.startContainer,f=E(C.children[m.startOffset]),y=E(D.children[v.startOffset]);d=0,y.childNodes.length>0?i=y.childNodes[0]:i=y,f.childNodes.length>0?c=f.childNodes[0]:c=f,y instanceof HTMLElement?l=y.innerHTML.length:l=0}else m.startContainer===c?(i=v.endContainer,l=v.endOffset,d=m.startOffset):(i=m.startContainer,l=m.endOffset,d=v.startOffset)}else i=t.anchorNode,l=t.anchorOffset,c=t.focusNode,d=t.focusOffset;Qi&&bm(i)||ar?h=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:h=t.isCollapsed}else i=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset,h=t.collapsed;if(i==null||c==null||l==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));if("getAttribute"in c&&c.getAttribute("contenteditable")==="false"&&c.getAttribute("data-slate-void")!=="true"){var x;c=i,d=((x=i.textContent)===null||x===void 0?void 0:x.length)||0}var B=te.toSlatePoint(e,[i,l],{exactMatch:r,suppressThrow:s});if(!B)return null;var A=h?B:te.toSlatePoint(e,[c,d],{exactMatch:r,suppressThrow:s});if(!A)return null;var S={anchor:B,focus:A};return G.isExpanded(S)&&G.isForward(S)&&St(c)&&b.void(e,{at:S.focus,mode:"highest"})&&(S=b.unhangRange(e,S,{voids:!0})),S}};function jm(e,t){var{path:n,diff:r}=t;if(!b.hasPath(e,n))return!1;var s=ge.get(e,n);if(!Fe.isText(s))return!1;if(r.start!==s.text.length||r.text.length===0)return s.text.slice(r.start,r.start+r.text.length)===r.text;var o=O.next(n);if(!b.hasPath(e,o))return!1;var i=ge.get(e,o);return Fe.isText(i)&&i.text.startsWith(r.text)}function rl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((s,o)=>s.slice(0,o.start)+o.text+s.slice(o.end),e)}function wm(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function Fm(e,t,n){for(var r=Math.min(e.length,t.length,n),s=0;s<r;s++)if(e.charAt(e.length-s-1)!==t.charAt(t.length-s-1))return s;return r}function sl(e,t){var{start:n,end:r,text:s}=t,o=e.slice(n,r),i=wm(o,s),l=Math.min(o.length-i,s.length-i),c=Fm(o,s,l),d={start:n+i,end:r-c,text:s.slice(i,s.length-c)};return d.start===d.end&&d.text.length===0?null:d}function Rm(e,t,n){var r=Math.min(t.start,n.start),s=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=rl(e,t,n),i=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-s),l=o.slice(r,i),c=Math.max(t.end,n.end-t.text.length+(t.end-t.start));return sl(e,{start:r,end:c,text:l})}function Tm(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function Qs(e,t){var{path:n,offset:r}=t;if(!b.hasPath(e,n))return null;var s=ge.get(e,n);if(!Fe.isText(s))return null;var o=b.above(e,{match:l=>Be.isElement(l)&&b.isBlock(e,l),at:n});if(!o)return null;for(;r>s.text.length;){var i=b.next(e,{at:n,match:Fe.isText});if(!i||!O.isDescendant(i[1],o[1]))return null;r-=s.text.length,s=i[0],n=i[1]}return{path:n,offset:r}}function al(e,t){var n=Qs(e,t.anchor);if(!n)return null;if(G.isCollapsed(t))return{anchor:n,focus:n};var r=Qs(e,t.focus);return r?{anchor:n,focus:r}:null}function Js(e,t,n){var r=jt.get(e),s=r?.find(h=>{var{path:m}=h;return O.equals(m,t.path)});if(!s||t.offset<=s.diff.start)return We.transform(t,n,{affinity:"backward"});var{diff:o}=s;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=We.transform(i,n,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var c={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=We.transform(c,n,{affinity:"backward"});return d?n.type==="split_node"&&O.equals(n.path,t.path)&&c.offset<n.position&&o.start<n.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function ol(e,t,n){var r=Js(e,t.anchor,n);if(!r)return null;if(G.isCollapsed(t))return{anchor:r,focus:r};var s=Js(e,t.focus,n);return s?{anchor:r,focus:s}:null}function Mm(e,t){var{path:n,diff:r,id:s}=e;switch(t.type){case"insert_text":return!O.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:s,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:s,path:n};case"remove_text":return!O.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:s,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:s,path:n};case"split_node":return!O.equals(t.path,n)||t.position>=r.end?{diff:r,id:s,path:O.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:s,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:s,path:O.transform(n,t,{affinity:"forward"})};case"merge_node":return O.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:s,path:O.transform(n,t)}:{diff:r,id:s,path:O.transform(n,t)}}var o=O.transform(n,t);return o?{diff:r,path:o,id:s}:null}function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?il(Object(n),!0).forEach(function(r){Lr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Om=25,Sm=200,Im=function(){},Pm=e=>e?.constructor.name==="DataTransfer";function km(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,s=!1,o=null,i=null,l=null,c=0,d=!1,h=()=>{var I=fn.get(t);if(fn.delete(t),I){var{selection:z}=t,U=al(t,I);U&&(!z||!G.equals(U,z))&&K.select(t,U)}},m=()=>{var I=dn.get(t);if(dn.delete(t),!!I){if(I.at){var z=We.isPoint(I.at)?Qs(t,I.at):al(t,I.at);if(!z)return;var U=b.range(t,z);(!t.selection||!G.equals(t.selection,U))&&K.select(t,z)}I.run()}},v=()=>{if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),!S()&&!A()){h();return}s||(s=!0,setTimeout(()=>s=!1)),A()&&(s="action");var I=t.selection&&b.rangeRef(t,t.selection,{affinity:"forward"});_t.set(t,t.marks),Im("flush",dn.get(t),jt.get(t));for(var z=S(),U;U=(k=jt.get(t))===null||k===void 0?void 0:k[0];){var k,N,q=Zt.get(t);q!==void 0&&(Zt.delete(t),t.marks=q),q&&d===!1&&(d=null);var V=Tm(U);(!t.selection||!G.equals(t.selection,V))&&K.select(t,V),U.diff.text?b.insertText(t,U.diff.text):b.deleteFragment(t),jt.set(t,(N=jt.get(t))===null||N===void 0?void 0:N.filter(oe=>{var{id:ne}=oe;return ne!==U.id})),jm(t,U)||(z=!1,dn.delete(t),_t.delete(t),s="action",fn.delete(t),n.cancel(),r.cancel(),I?.unref())}var re=I?.unref();if(re&&!fn.get(t)&&(!t.selection||!G.equals(re,t.selection))&&K.select(t,re),A()){m();return}z&&n(),n.flush(),r.flush(),h();var J=_t.get(t);_t.delete(t),J!==void 0&&(t.marks=J,t.onChange())},C=I=>{o&&clearTimeout(o),o=setTimeout(()=>{bn.set(t,!1),v()},Om)},D=I=>{bn.set(t,!0),o&&(clearTimeout(o),o=null)},f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,U=Ws.get(t);if(U){if(S()||z){U.style.display="none";return}U.style.removeProperty("display")}},y=(I,z)=>{var U,k=(U=jt.get(t))!==null&&U!==void 0?U:[];jt.set(t,k);var N=ge.leaf(t,I),q=k.findIndex(J=>O.equals(J.path,I));if(q<0){var V=sl(N.text,z);V&&k.push({path:I,diff:z,id:c++}),f();return}var re=Rm(N.text,k[q].diff,z);if(!re){k.splice(q,1),f();return}k[q]=Wr(Wr({},k[q]),{},{diff:re})},x=function(z){var{at:U}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d=!1,fn.delete(t),n.cancel(),r.cancel(),A()&&v(),dn.set(t,{at:U,run:z}),l=setTimeout(v)},B=I=>{var z;i&&(clearTimeout(i),i=null);var{inputType:U}=I,k=null,N=I.dataTransfer||I.data||void 0;d!==!1&&U!=="insertText"&&U!=="insertCompositionText"&&(d=!1);var[q]=I.getTargetRanges();q&&(k=te.toSlateRange(t,q,{exactMatch:!1,suppressThrow:!0}));var V=te.getWindow(t),re=V.getSelection();if(!k&&re&&(q=re,k=te.toSlateRange(t,re,{exactMatch:!1,suppressThrow:!0})),k=(z=k)!==null&&z!==void 0?z:t.selection,!!k){var J=!0;if(U.startsWith("delete")){if(G.isExpanded(k)){var[oe,ne]=G.edges(k),ue=ge.leaf(t,oe.path);if(ue.text.length===oe.offset&&ne.offset===0){var w=b.next(t,{at:oe.path,match:Fe.isText});w&&O.equals(w[1],ne.path)&&(k={anchor:ne,focus:ne})}}var X=U.endsWith("Backward")?"backward":"forward",[Y,se]=G.edges(k),[H,ie]=b.leaf(t,Y.path),Ae={text:"",start:Y.offset,end:se.offset},Me=jt.get(t),Le=Me?.find(Et=>O.equals(Et.path,ie)),Ve=Le?[Le.diff,Ae]:[Ae],je=rl(H.text,...Ve);if(je.length===0&&(J=!1),G.isExpanded(k)){if(J&&O.equals(k.anchor.path,k.focus.path)){var et={path:k.anchor.path,offset:Y.offset},Qe=b.range(t,et,et);return R(Qe),y(k.anchor.path,{text:"",end:se.offset,start:Y.offset})}return x(()=>b.deleteFragment(t,{direction:X}),{at:k})}}switch(U){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return x(()=>b.deleteFragment(t),{at:k});case"deleteContent":case"deleteContentForward":{var{anchor:He}=k;if(J&&G.isCollapsed(k)){var ct=ge.leaf(t,He.path);if(He.offset<ct.text.length)return y(He.path,{text:"",start:He.offset,end:He.offset+1})}return x(()=>b.deleteForward(t),{at:k})}case"deleteContentBackward":{var ht,{anchor:$e}=k,Je=Gs(q)?q.isCollapsed:!!((ht=q)!==null&&ht!==void 0&&ht.collapsed);return J&&Je&&G.isCollapsed(k)&&$e.offset>0?y($e.path,{text:"",start:$e.offset-1,end:$e.offset}):x(()=>b.deleteBackward(t),{at:k})}case"deleteEntireSoftLine":return x(()=>{b.deleteBackward(t,{unit:"line"}),b.deleteForward(t,{unit:"line"})},{at:k});case"deleteHardLineBackward":return x(()=>b.deleteBackward(t,{unit:"block"}),{at:k});case"deleteSoftLineBackward":return x(()=>b.deleteBackward(t,{unit:"line"}),{at:k});case"deleteHardLineForward":return x(()=>b.deleteForward(t,{unit:"block"}),{at:k});case"deleteSoftLineForward":return x(()=>b.deleteForward(t,{unit:"line"}),{at:k});case"deleteWordBackward":return x(()=>b.deleteBackward(t,{unit:"word"}),{at:k});case"deleteWordForward":return x(()=>b.deleteForward(t,{unit:"word"}),{at:k});case"insertLineBreak":return x(()=>b.insertSoftBreak(t),{at:k});case"insertParagraph":return x(()=>b.insertBreak(t),{at:k});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Pm(N))return x(()=>te.insertData(t,N),{at:k});var Ke=N??"";if(Zt.get(t)&&(Ke=Ke.replace("\uFEFF","")),U==="insertText"&&/.*\n.*\n$/.test(Ke)&&(Ke=Ke.slice(0,-1)),Ke.includes(`
`))return x(()=>{var Et=Ke.split(`
`);Et.forEach((Wt,pn)=>{Wt&&b.insertText(t,Wt),pn!==Et.length-1&&b.insertSoftBreak(t)})},{at:k});if(O.equals(k.anchor.path,k.focus.path)){var[gt,it]=G.edges(k),qe={start:gt.offset,end:it.offset,text:Ke};if(Ke&&d&&U==="insertCompositionText"){var yt=d.start+d.text.search(/\S|$/),nn=qe.start+qe.text.search(/\S|$/);nn===yt+1&&qe.end===d.start+d.text.length?(qe.start-=1,d=null,P()):d=!1}else U==="insertText"?d===null?d=qe:d&&G.isCollapsed(k)&&d.end+d.text.length===gt.offset?d=Wr(Wr({},d),{},{text:d.text+Ke}):d=!1:d=!1;if(J){y(gt.path,qe);return}}return x(()=>b.insertText(t,Ke),{at:k})}}}},A=()=>!!dn.get(t),S=()=>{var I;return!!((I=jt.get(t))!==null&&I!==void 0&&I.length)},E=()=>A()||S(),j=()=>s,R=I=>{fn.set(t,I),i&&(clearTimeout(i),i=null);var{selection:z}=t;if(I){var U=!z||!O.equals(z.anchor.path,I.anchor.path),k=!z||!O.equals(z.anchor.path.slice(0,-1),I.anchor.path.slice(0,-1));(U&&d||k)&&(d=!1),(U||S())&&(i=setTimeout(v,Sm))}},Z=()=>{(A()||!S())&&v()},F=I=>{S()||(f(!0),setTimeout(f))},P=()=>{A()||(l=setTimeout(v))},Q=I=>{if(!(S()||A())&&I.some(U=>Ys(t,U,I))){var z;(z=Xi.get(t))===null||z===void 0||z()}};return{flush:v,scheduleFlush:P,hasPendingDiffs:S,hasPendingAction:A,hasPendingChanges:E,isFlushing:j,handleUserSelect:R,handleCompositionEnd:C,handleCompositionStart:D,handleDOMBeforeInput:B,handleKeyDown:F,handleDomMutations:Q,handleInput:Z}}function Lm(){var e=(0,g.useRef)(!1);return(0,g.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var xn=Nr?g.useLayoutEffect:g.useEffect;function $m(e,t,n){var[r]=(0,g.useState)(()=>new MutationObserver(t));xn(()=>{r.takeRecords()}),(0,g.useEffect)(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var Nm=["node"];function ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Zm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ll(Object(n),!0).forEach(function(r){Lr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var zm={subtree:!0,childList:!0,characterData:!0},Wm=At?e=>{var{node:t}=e,n=Sn(e,Nm);if(!At)return null;var r=un(),s=Lm(),[o]=(0,g.useState)(()=>km(Zm({editor:r},n)));return $m(t,o.handleDomMutations,zm),qs.set(r,o.scheduleFlush),s&&o.flush(),o}:()=>null,Um=["anchor","focus"],Vm=["anchor","focus"],Hm=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),ul=(e,t)=>{var n=Sn(e,Um),r=Sn(t,Vm);return e[In]===t[In]&&Hm(n,r)},qm=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],s=t[n];if(!G.equals(r,s)||!ul(r,s))return!1}return!0},Km=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],s=t[n];if(r.anchor.offset!==s.anchor.offset||r.focus.offset!==s.focus.offset||!ul(r,s))return!1}return!0},Gm=e=>{var{isLast:t,leaf:n,parent:r,text:s}=e,o=un(),i=te.findPath(o,s),l=O.parent(i),c=n[_i]===!0;return o.isVoid(r)?g.createElement(Xs,{length:ge.string(r).length}):n.text===""&&r.children[r.children.length-1]===s&&!o.isInline(r)&&b.string(o,l)===""?g.createElement(Xs,{isLineBreak:!0,isMarkPlaceholder:c}):n.text===""?g.createElement(Xs,{isMarkPlaceholder:c}):t&&n.text.slice(-1)===`
`?g.createElement(cl,{isTrailing:!0,text:n.text}):g.createElement(cl,{text:n.text})},cl=e=>{var{text:t,isTrailing:n=!1}=e,r=(0,g.useRef)(null),s=()=>"".concat(t??"").concat(n?`
`:""),[o]=(0,g.useState)(s);return xn(()=>{var i=s();r.current&&r.current.textContent!==i&&(r.current.textContent=i)}),g.createElement(Ym,{ref:r},o)},Ym=(0,g.memo)((0,g.forwardRef)((e,t)=>g.createElement("span",{"data-slate-string":!0,ref:t},e.children))),Xs=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,s={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(s["data-slate-mark-placeholder"]=!0),g.createElement("span",Object.assign({},s),!At||!n?"\uFEFF":null,n?g.createElement("br",null):null)};function Qm(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function dl(e){e.current&&(clearTimeout(e.current),e.current=null)}var Jm=e=>{var{leaf:t,isLast:n,text:r,parent:s,renderPlaceholder:o,renderLeaf:i=B=>g.createElement(_m,Object.assign({},B))}=e,l=un(),c=(0,g.useRef)(null),d=(0,g.useRef)(null),[h,m]=(0,g.useState)(!1),v=(0,g.useRef)(null),C=(0,g.useCallback)(B=>{if(Qm(c,B==null),B==null){var A;Ws.delete(l),(A=t.onPlaceholderResize)===null||A===void 0||A.call(t,null)}else{if(Ws.set(l,B),!c.current){var S=window.ResizeObserver||im;c.current=new S(()=>{var E;(E=t.onPlaceholderResize)===null||E===void 0||E.call(t,B)})}c.current.observe(B),d.current=B}},[d,t,l]),D=g.createElement(Gm,{isLast:n,leaf:t,parent:s,text:r}),f=t[In];if((0,g.useEffect)(()=>(f?v.current||(v.current=setTimeout(()=>{m(!0),v.current=null},300)):(dl(v),m(!1)),()=>dl(v)),[f,m]),f&&h){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:or?"inherit":void 0},contentEditable:!1,ref:C}};D=g.createElement(g.Fragment,null,o(y),D)}var x={"data-slate-leaf":!0};return i({attributes:x,children:D,leaf:t,text:r})},Xm=g.memo(Jm,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&Fe.equals(t.leaf,e.leaf)&&t.leaf[In]===e.leaf[In]),_m=e=>{var{attributes:t,children:n}=e;return g.createElement("span",Object.assign({},t),n)},ev=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:s,renderLeaf:o,text:i}=e,l=un(),c=(0,g.useRef)(null),d=Fe.decorations(i,t),h=te.findKey(l,i),m=[],v=0;v<d.length;v++){var C=d[v];m.push(g.createElement(Xm,{isLast:n&&v===d.length-1,key:"".concat(h.id,"-").concat(v),renderPlaceholder:s,leaf:C,text:i,parent:r,renderLeaf:o}))}var D=(0,g.useCallback)(f=>{var y=zr.get(l);f?(y?.set(h,f),Cn.set(i,f),ir.set(f,i)):(y?.delete(h),Cn.delete(i),c.current&&ir.delete(c.current)),c.current=f},[c,l,h,i]);return g.createElement("span",{"data-slate-node":"text",ref:D},m)},fl=g.memo(ev,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&Km(t.decorations,e.decorations)),tv=e=>{var{decorations:t,element:n,renderElement:r=B=>g.createElement(rv,Object.assign({},B)),renderPlaceholder:s,renderLeaf:o,selection:i}=e,l=un(),c=av(),d=l.isInline(n),h=te.findKey(l,n),m=(0,g.useCallback)(B=>{var A=zr.get(l);B?(A?.set(h,B),Cn.set(n,B),ir.set(B,n)):(A?.delete(h),Cn.delete(n))},[l,h,n]),v=pl({decorations:t,node:n,renderElement:r,renderPlaceholder:s,renderLeaf:o,selection:i}),C={"data-slate-node":"element",ref:m};if(d&&(C["data-slate-inline"]=!0),!d&&b.hasInlines(l,n)){var D=ge.string(n),f=Fi()(D);f==="rtl"&&(C.dir=f)}if(b.isVoid(l,n)){C["data-slate-void"]=!0,!c&&d&&(C.contentEditable=!1);var y=d?"span":"div",[[x]]=ge.texts(n);v=g.createElement(y,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},g.createElement(fl,{renderPlaceholder:s,decorations:[],isLast:!1,parent:n,text:x})),Zs.set(x,0),zs.set(x,n)}return r({attributes:C,children:v,element:n})},nv=g.memo(tv,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&qm(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&G.equals(e.selection,t.selection))),rv=e=>{var{attributes:t,children:n,element:r}=e,s=un(),o=s.isInline(r)?"span":"div";return g.createElement(o,Object.assign({},t,{style:{position:"relative"}}),n)},hl=(0,g.createContext)(()=>[]),sv=()=>(0,g.useContext)(hl),gl=(0,g.createContext)(!1),eE=()=>useContext(gl),pl=e=>{for(var{decorations:t,node:n,renderElement:r,renderPlaceholder:s,renderLeaf:o,selection:i}=e,l=sv(),c=un(),d=te.findPath(c,n),h=[],m=Be.isElement(n)&&!c.isInline(n)&&b.hasInlines(c,n),v=0;v<n.children.length;v++){var C=d.concat(v),D=n.children[v],f=te.findKey(c,D),y=b.range(c,C),x=i&&G.intersection(y,i),B=l([D,C]);for(var A of t){var S=G.intersection(A,y);S&&B.push(S)}Be.isElement(D)?h.push(g.createElement(gl.Provider,{key:"provider-".concat(f.id),value:!!x},g.createElement(nv,{decorations:B,element:D,key:f.id,renderElement:r,renderPlaceholder:s,renderLeaf:o,selection:x}))):h.push(g.createElement(fl,{decorations:B,key:f.id,isLast:m&&v===n.children.length-1,parent:n,renderPlaceholder:s,renderLeaf:o,text:D})),Zs.set(D,v),zs.set(D,n)}return h},ml=(0,g.createContext)(!1),av=()=>(0,g.useContext)(ml),_s=(0,g.createContext)(null),Gt=()=>{var e=(0,g.useContext)(_s);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},tE=()=>{var e=useContext(_s);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return e};function ov(){var e=un(),t=(0,g.useRef)(!1),n=(0,g.useRef)(0),r=(0,g.useCallback)(()=>{if(!t.current){t.current=!0;var s=te.getWindow(e);s.cancelAnimationFrame(n.current),n.current=s.requestAnimationFrame(()=>{t.current=!1})}},[e]);return(0,g.useEffect)(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var iv=3,lv={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},uv={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},cv={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},st=e=>{var t=lv[e],n=uv[e],r=cv[e],s=t&&(0,$s.P6)(t),o=n&&(0,$s.P6)(n),i=r&&(0,$s.P6)(r);return l=>!!(s&&s(l)||Yi&&o&&o(l)||!Yi&&i&&i(l))},at={isBold:st("bold"),isCompose:st("compose"),isMoveBackward:st("moveBackward"),isMoveForward:st("moveForward"),isDeleteBackward:st("deleteBackward"),isDeleteForward:st("deleteForward"),isDeleteLineBackward:st("deleteLineBackward"),isDeleteLineForward:st("deleteLineForward"),isDeleteWordBackward:st("deleteWordBackward"),isDeleteWordForward:st("deleteWordForward"),isExtendBackward:st("extendBackward"),isExtendForward:st("extendForward"),isExtendLineBackward:st("extendLineBackward"),isExtendLineForward:st("extendLineForward"),isItalic:st("italic"),isMoveLineBackward:st("moveLineBackward"),isMoveLineForward:st("moveLineForward"),isMoveWordBackward:st("moveWordBackward"),isMoveWordForward:st("moveWordForward"),isRedo:st("redo"),isSoftBreak:st("insertSoftBreak"),isSplitBlock:st("splitBlock"),isTransposeCharacter:st("transposeCharacter"),isUndo:st("undo")},dv=(e,t)=>{var n=[],r=()=>{n=[]},s=i=>{if(t.current){var l=i.filter(c=>Ys(e,c,i));n.push(...l)}};function o(){n.length>0&&(n.reverse().forEach(i=>{i.type!=="characterData"&&(i.removedNodes.forEach(l=>{i.target.insertBefore(l,i.nextSibling)}),i.addedNodes.forEach(l=>{i.target.removeChild(l)}))}),r())}return{registerMutations:s,restoreDOM:o,clear:r}},fv={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class vl extends g.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var t,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(n.current,fv)}componentDidMount(){var{receivedUserInput:t}=this.props,n=this.context;this.manager=dv(n,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,n,r,s=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(s!=null&&s.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(s)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}vl.contextType=$r;var hv=At?vl:e=>{var{children:t}=e;return g.createElement(g.Fragment,null,t)},gv=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],pv=["text"];function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cl(Object(n),!0).forEach(function(r){Lr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var mv=e=>g.createElement(g.Fragment,null,pl(e)),vv=e=>{var t=(0,g.useCallback)(w=>g.createElement(Cv,Object.assign({},w)),[]),{autoFocus:n,decorate:r=Dv,onDOMBeforeInput:s,placeholder:o,readOnly:i=!1,renderElement:l,renderLeaf:c,renderPlaceholder:d=t,scrollSelectionIntoView:h=bv,style:m={},as:v="div",disableDefaultStyles:C=!1}=e,D=Sn(e,gv),f=Gt(),[y,x]=(0,g.useState)(!1),B=(0,g.useRef)(null),A=(0,g.useRef)([]),[S,E]=(0,g.useState)(),{onUserInput:j,receivedUserInput:R}=ov(),[,Z]=(0,g.useReducer)(w=>w+1,0);Xi.set(f,Z),Vs.set(f,i);var F=(0,g.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,g.useEffect)(()=>{B.current&&n&&B.current.focus()},[n]);var P=(0,g.useRef)(),Q=(0,g.useMemo)(()=>k0()(()=>{var w=P.current;if((At||!te.isComposing(f))&&(!F.isUpdatingSelection||w!=null&&w.isFlushing())&&!F.isDraggingInternally){var X=te.findDocumentOrShadowRoot(f),{activeElement:Y}=X,se=te.toDOMNode(f,f),H=X.getSelection();if(Y===se?(F.latestElement=Y,Dn.set(f,!0)):Dn.delete(f),!H)return K.deselect(f);var{anchorNode:ie,focusNode:Ae}=H,Me=te.hasEditableTarget(f,ie)||te.isTargetInsideNonReadonlyVoid(f,ie),Le=te.hasEditableTarget(f,Ae)||te.isTargetInsideNonReadonlyVoid(f,Ae);if(Me&&Le){var Ve=te.toSlateRange(f,H,{exactMatch:!1,suppressThrow:!0});Ve&&(!te.isComposing(f)&&!(w!=null&&w.hasPendingChanges())&&!(w!=null&&w.isFlushing())?K.select(f,Ve):w?.handleUserSelect(Ve))}i&&(!Me||!Le)&&K.deselect(f)}},100),[f,i,F]),I=(0,g.useMemo)(()=>I0()(Q,0),[Q]);P.current=Wm({node:B,onDOMSelectionChange:Q,scheduleOnDOMSelectionChange:I}),xn(()=>{var w,X,Y;B.current&&(Y=Ks(B.current))?(Ji.set(f,Y),Zr.set(f,B.current),Cn.set(f,B.current),ir.set(B.current,f)):Cn.delete(f);var{selection:se}=f,H=te.findDocumentOrShadowRoot(f),ie=H.getSelection();if(!(!ie||!te.isFocused(f)||(w=P.current)!==null&&w!==void 0&&w.hasPendingAction())){var Ae=je=>{var et=ie.type!=="None";if(!(!se&&!et)){var Qe=ie.focusNode,He;if(ar&&ie.rangeCount>1){var ct=ie.getRangeAt(0),ht=ie.getRangeAt(ie.rangeCount-1);ct.startContainer===Qe?He=ht.endContainer:He=ct.startContainer}else He=ie.anchorNode;var $e=Zr.get(f),Je=!1;if($e.contains(He)&&$e.contains(Qe)&&(Je=!0),et&&Je&&se&&!je){var Ke=te.toSlateRange(f,ie,{exactMatch:!0,suppressThrow:!0});if(Ke&&G.equals(Ke,se)){var gt,it;if(!F.hasMarkPlaceholder||(gt=He)!==null&&gt!==void 0&&(it=gt.parentElement)!==null&&it!==void 0&&it.hasAttribute("data-slate-mark-placeholder"))return}}if(se&&!te.hasRange(f,se)){f.selection=te.toSlateRange(f,ie,{exactMatch:!1,suppressThrow:!0});return}F.isUpdatingSelection=!0;var qe=se&&te.toDOMRange(f,se);return qe?(te.isComposing(f)&&!At?ie.collapseToEnd():G.isBackward(se)?ie.setBaseAndExtent(qe.endContainer,qe.endOffset,qe.startContainer,qe.startOffset):ie.setBaseAndExtent(qe.startContainer,qe.startOffset,qe.endContainer,qe.endOffset),h(f,qe)):ie.removeAllRanges(),qe}};ie.rangeCount<=1&&Ae();var Me=((X=P.current)===null||X===void 0?void 0:X.isFlushing())==="action";if(!At||!Me){setTimeout(()=>{F.isUpdatingSelection=!1});return}var Le=null,Ve=requestAnimationFrame(()=>{if(Me){var je=et=>{try{var Qe=te.toDOMNode(f,f);Qe.focus(),Ae(et)}catch{}};je(),Le=setTimeout(()=>{je(!0),F.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Ve),Le&&clearTimeout(Le)}}});var z=(0,g.useCallback)(w=>{if(j(),!i&&te.hasEditableTarget(f,w.target)&&!xv(w,s)){var X;if(P.current)return P.current.handleDOMBeforeInput(w);I.flush(),Q.flush();var{selection:Y}=f,{inputType:se}=w,H=w.dataTransfer||w.data||void 0,ie=se==="insertCompositionText"||se==="deleteCompositionText";if(ie&&te.isComposing(f))return;var Ae=!1;if(se==="insertText"&&Y&&G.isCollapsed(Y)&&w.data&&w.data.length===1&&/[a-z ]/i.test(w.data)&&Y.anchor.offset!==0){var Me,Le;Ae=!0,f.marks&&(Ae=!1);var{anchor:Ve}=Y,[je,et]=te.toDOMPoint(f,Ve),Qe=(Me=je.parentElement)===null||Me===void 0?void 0:Me.closest("a"),He=te.getWindow(f);if(Ae&&Qe&&te.hasDOMNode(f,Qe)){var ct,ht=He?.document.createTreeWalker(Qe,NodeFilter.SHOW_TEXT).lastChild();ht===je&&((ct=ht.textContent)===null||ct===void 0?void 0:ct.length)===et&&(Ae=!1)}if(Ae&&je.parentElement&&(He==null||(Le=He.getComputedStyle(je.parentElement))===null||Le===void 0?void 0:Le.whiteSpace)==="pre"){var $e=b.above(f,{at:Ve.path,match:yt=>Be.isElement(yt)&&b.isBlock(f,yt)});$e&&ge.string($e[0]).includes("	")&&(Ae=!1)}}if(!se.startsWith("delete")||se.startsWith("deleteBy")){var[Je]=w.getTargetRanges();if(Je){var Ke=te.toSlateRange(f,Je,{exactMatch:!1,suppressThrow:!1});if(!Y||!G.equals(Y,Ke)){Ae=!1;var gt=!ie&&f.selection&&b.rangeRef(f,f.selection);K.select(f,Ke),gt&&lr.set(f,gt)}}}if(ie)return;if(Ae||w.preventDefault(),Y&&G.isExpanded(Y)&&se.startsWith("delete")){var it=se.endsWith("Backward")?"backward":"forward";b.deleteFragment(f,{direction:it});return}switch(se){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{b.deleteFragment(f);break}case"deleteContent":case"deleteContentForward":{b.deleteForward(f);break}case"deleteContentBackward":{b.deleteBackward(f);break}case"deleteEntireSoftLine":{b.deleteBackward(f,{unit:"line"}),b.deleteForward(f,{unit:"line"});break}case"deleteHardLineBackward":{b.deleteBackward(f,{unit:"block"});break}case"deleteSoftLineBackward":{b.deleteBackward(f,{unit:"line"});break}case"deleteHardLineForward":{b.deleteForward(f,{unit:"block"});break}case"deleteSoftLineForward":{b.deleteForward(f,{unit:"line"});break}case"deleteWordBackward":{b.deleteBackward(f,{unit:"word"});break}case"deleteWordForward":{b.deleteForward(f,{unit:"word"});break}case"insertLineBreak":b.insertSoftBreak(f);break;case"insertParagraph":{b.insertBreak(f);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{se==="insertFromComposition"&&te.isComposing(f)&&(x(!1),bn.set(f,!1)),H?.constructor.name==="DataTransfer"?te.insertData(f,H):typeof H=="string"&&(Ae?A.current.push(()=>b.insertText(f,H)):b.insertText(f,H));break}}var qe=(X=lr.get(f))===null||X===void 0?void 0:X.unref();lr.delete(f),qe&&(!f.selection||!G.equals(f.selection,qe))&&K.select(f,qe)}},[f,Q,j,s,i,I]),U=(0,g.useCallback)(w=>{w==null?(Q.cancel(),I.cancel(),Zr.delete(f),Cn.delete(f),B.current&&cn&&B.current.removeEventListener("beforeinput",z)):cn&&w.addEventListener("beforeinput",z),B.current=w},[Q,I,f,z]);xn(()=>{var w=te.getWindow(f);return w.document.addEventListener("selectionchange",I),()=>{w.document.removeEventListener("selectionchange",I)}},[I]);var k=r([f,[]]),N=o&&f.children.length===1&&Array.from(ge.texts(f)).length===1&&ge.string(f)===""&&!y,q=(0,g.useCallback)(w=>{if(w&&N){var X;E((X=w.getBoundingClientRect())===null||X===void 0?void 0:X.height)}else E(void 0)},[N]);if(N){var V=b.start(f,[]);k.push({[In]:!0,placeholder:o,onPlaceholderResize:q,anchor:V,focus:V})}var{marks:re}=f;if(F.hasMarkPlaceholder=!1,f.selection&&G.isCollapsed(f.selection)&&re){var{anchor:J}=f.selection,oe=ge.leaf(f,J.path),ne=Sn(oe,pv);if(!Fe.equals(oe,re,{loose:!0})){F.hasMarkPlaceholder=!0;var ue=Object.fromEntries(Object.keys(ne).map(w=>[w,null]));k.push(Pn(Pn(Pn({[_i]:!0},ue),re),{},{anchor:J,focus:J}))}}return(0,g.useEffect)(()=>{setTimeout(()=>{var{selection:w}=f;if(w){var{anchor:X}=w,Y=ge.leaf(f,X.path);if(re&&!Fe.equals(Y,re,{loose:!0})){Zt.set(f,re);return}}Zt.delete(f)})}),g.createElement(ml.Provider,{value:i},g.createElement(hl.Provider,{value:r},g.createElement(hv,{node:B,receivedUserInput:R},g.createElement(v,Object.assign({role:i?void 0:"textbox","aria-multiline":i?void 0:!0},D,{spellCheck:cn||!Nr?D.spellCheck:!1,autoCorrect:cn||!Nr?D.autoCorrect:"false",autoCapitalize:cn||!Nr?D.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i,zindex:-1,suppressContentEditableWarning:!0,ref:U,style:Pn(Pn({},C?{}:Pn({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},S?{minHeight:S}:{})),m),onBeforeInput:(0,g.useCallback)(w=>{if(!cn&&!i&&!xt(w,D.onBeforeInput)&&te.hasSelectableTarget(f,w.target)&&(w.preventDefault(),!te.isComposing(f))){var X=w.data;b.insertText(f,X)}},[D.onBeforeInput,f,i]),onInput:(0,g.useCallback)(w=>{if(!xt(w,D.onInput)){if(P.current){P.current.handleInput();return}for(var X of A.current)X();A.current=[]}},[D.onInput]),onBlur:(0,g.useCallback)(w=>{if(!(i||F.isUpdatingSelection||!te.hasSelectableTarget(f,w.target)||xt(w,D.onBlur))){var X=te.findDocumentOrShadowRoot(f);if(F.latestElement!==X.activeElement){var{relatedTarget:Y}=w,se=te.toDOMNode(f,f);if(Y!==se&&!(St(Y)&&Y.hasAttribute("data-slate-spacer"))){if(Y!=null&&hn(Y)&&te.hasDOMNode(f,Y)){var H=te.toSlateNode(f,Y);if(Be.isElement(H)&&!f.isVoid(H))return}if(or){var ie=X.getSelection();ie?.removeAllRanges()}Dn.delete(f)}}}},[i,F.isUpdatingSelection,F.latestElement,f,D.onBlur]),onClick:(0,g.useCallback)(w=>{if(te.hasTarget(f,w.target)&&!xt(w,D.onClick)&&hn(w.target)){var X=te.toSlateNode(f,w.target),Y=te.findPath(f,X);if(!b.hasPath(f,Y)||ge.get(f,Y)!==X)return;if(w.detail===iv&&Y.length>=1){var se=Y;if(!(Be.isElement(X)&&b.isBlock(f,X))){var H,ie=b.above(f,{match:Qe=>Be.isElement(Qe)&&b.isBlock(f,Qe),at:Y});se=(H=ie?.[1])!==null&&H!==void 0?H:Y.slice(0,1)}var Ae=b.range(f,se);K.select(f,Ae);return}if(i)return;var Me=b.start(f,Y),Le=b.end(f,Y),Ve=b.void(f,{at:Me}),je=b.void(f,{at:Le});if(Ve&&je&&O.equals(Ve[1],je[1])){var et=b.range(f,Me);K.select(f,et)}}},[f,D.onClick,i]),onCompositionEnd:(0,g.useCallback)(w=>{if(te.hasSelectableTarget(f,w.target)){var X;if(te.isComposing(f)&&(x(!1),bn.set(f,!1)),(X=P.current)===null||X===void 0||X.handleCompositionEnd(w),xt(w,D.onCompositionEnd)||At)return;if(!or&&!hm&&!um&&!pm&&!gm&&w.data){var Y=Zt.get(f);Zt.delete(f),Y!==void 0&&(_t.set(f,f.marks),f.marks=Y),b.insertText(f,w.data);var se=_t.get(f);_t.delete(f),se!==void 0&&(f.marks=se)}}},[D.onCompositionEnd,f]),onCompositionUpdate:(0,g.useCallback)(w=>{te.hasSelectableTarget(f,w.target)&&!xt(w,D.onCompositionUpdate)&&(te.isComposing(f)||(x(!0),bn.set(f,!0)))},[D.onCompositionUpdate,f]),onCompositionStart:(0,g.useCallback)(w=>{if(te.hasSelectableTarget(f,w.target)){var X;if((X=P.current)===null||X===void 0||X.handleCompositionStart(w),xt(w,D.onCompositionStart)||At)return;x(!0);var{selection:Y}=f;if(Y){if(G.isExpanded(Y)){b.deleteFragment(f);return}var se=b.above(f,{match:Ae=>Be.isElement(Ae)&&b.isInline(f,Ae),mode:"highest"});if(se){var[,H]=se;if(b.isEnd(f,Y.anchor,H)){var ie=b.after(f,H);K.setSelection(f,{anchor:ie,focus:ie})}}}}},[D.onCompositionStart,f]),onCopy:(0,g.useCallback)(w=>{te.hasSelectableTarget(f,w.target)&&!xt(w,D.onCopy)&&!Dl(w)&&(w.preventDefault(),te.setFragmentData(f,w.clipboardData,"copy"))},[D.onCopy,f]),onCut:(0,g.useCallback)(w=>{if(!i&&te.hasSelectableTarget(f,w.target)&&!xt(w,D.onCut)&&!Dl(w)){w.preventDefault(),te.setFragmentData(f,w.clipboardData,"cut");var{selection:X}=f;if(X)if(G.isExpanded(X))b.deleteFragment(f);else{var Y=ge.parent(f,X.anchor.path);b.isVoid(f,Y)&&K.delete(f)}}},[i,f,D.onCut]),onDragOver:(0,g.useCallback)(w=>{if(te.hasTarget(f,w.target)&&!xt(w,D.onDragOver)){var X=te.toSlateNode(f,w.target);Be.isElement(X)&&b.isVoid(f,X)&&w.preventDefault()}},[D.onDragOver,f]),onDragStart:(0,g.useCallback)(w=>{if(!i&&te.hasTarget(f,w.target)&&!xt(w,D.onDragStart)){var X=te.toSlateNode(f,w.target),Y=te.findPath(f,X),se=Be.isElement(X)&&b.isVoid(f,X)||b.void(f,{at:Y,voids:!0});if(se){var H=b.range(f,Y);K.select(f,H)}F.isDraggingInternally=!0,te.setFragmentData(f,w.dataTransfer,"drag")}},[i,f,D.onDragStart,F]),onDrop:(0,g.useCallback)(w=>{if(!i&&te.hasTarget(f,w.target)&&!xt(w,D.onDrop)){w.preventDefault();var X=f.selection,Y=te.findEventRange(f,w),se=w.dataTransfer;K.select(f,Y),F.isDraggingInternally&&X&&!G.equals(X,Y)&&!b.void(f,{at:Y,voids:!0})&&K.delete(f,{at:X}),te.insertData(f,se),te.isFocused(f)||te.focus(f)}F.isDraggingInternally=!1},[i,f,D.onDrop,F]),onDragEnd:(0,g.useCallback)(w=>{!i&&F.isDraggingInternally&&D.onDragEnd&&te.hasTarget(f,w.target)&&D.onDragEnd(w),F.isDraggingInternally=!1},[i,F,D,f]),onFocus:(0,g.useCallback)(w=>{if(!i&&!F.isUpdatingSelection&&te.hasEditableTarget(f,w.target)&&!xt(w,D.onFocus)){var X=te.toDOMNode(f,f),Y=te.findDocumentOrShadowRoot(f);if(F.latestElement=Y.activeElement,ar&&w.target!==X){X.focus();return}Dn.set(f,!0)}},[i,F,f,D.onFocus]),onKeyDown:(0,g.useCallback)(w=>{if(!i&&te.hasEditableTarget(f,w.target)){var X;(X=P.current)===null||X===void 0||X.handleKeyDown(w);var{nativeEvent:Y}=w;if(te.isComposing(f)&&Y.isComposing===!1&&(bn.set(f,!1),x(!1)),xt(w,D.onKeyDown)||te.isComposing(f))return;var{selection:se}=f,H=f.children[se!==null?se.focus.path[0]:0],ie=Fi()(ge.string(H))==="rtl";if(at.isRedo(Y)){w.preventDefault();var Ae=f;typeof Ae.redo=="function"&&Ae.redo();return}if(at.isUndo(Y)){w.preventDefault();var Me=f;typeof Me.undo=="function"&&Me.undo();return}if(at.isMoveLineBackward(Y)){w.preventDefault(),K.move(f,{unit:"line",reverse:!0});return}if(at.isMoveLineForward(Y)){w.preventDefault(),K.move(f,{unit:"line"});return}if(at.isExtendLineBackward(Y)){w.preventDefault(),K.move(f,{unit:"line",edge:"focus",reverse:!0});return}if(at.isExtendLineForward(Y)){w.preventDefault(),K.move(f,{unit:"line",edge:"focus"});return}if(at.isMoveBackward(Y)){w.preventDefault(),se&&G.isCollapsed(se)?K.move(f,{reverse:!ie}):K.collapse(f,{edge:"start"});return}if(at.isMoveForward(Y)){w.preventDefault(),se&&G.isCollapsed(se)?K.move(f,{reverse:ie}):K.collapse(f,{edge:"end"});return}if(at.isMoveWordBackward(Y)){w.preventDefault(),se&&G.isExpanded(se)&&K.collapse(f,{edge:"focus"}),K.move(f,{unit:"word",reverse:!ie});return}if(at.isMoveWordForward(Y)){w.preventDefault(),se&&G.isExpanded(se)&&K.collapse(f,{edge:"focus"}),K.move(f,{unit:"word",reverse:ie});return}if(cn){if((Qi||or)&&se&&(at.isDeleteBackward(Y)||at.isDeleteForward(Y))&&G.isCollapsed(se)){var Le=ge.parent(f,se.anchor.path);if(Be.isElement(Le)&&b.isVoid(f,Le)&&(b.isInline(f,Le)||b.isBlock(f,Le))){w.preventDefault(),b.deleteBackward(f,{unit:"block"});return}}}else{if(at.isBold(Y)||at.isItalic(Y)||at.isTransposeCharacter(Y)){w.preventDefault();return}if(at.isSoftBreak(Y)){w.preventDefault(),b.insertSoftBreak(f);return}if(at.isSplitBlock(Y)){w.preventDefault(),b.insertBreak(f);return}if(at.isDeleteBackward(Y)){w.preventDefault(),se&&G.isExpanded(se)?b.deleteFragment(f,{direction:"backward"}):b.deleteBackward(f);return}if(at.isDeleteForward(Y)){w.preventDefault(),se&&G.isExpanded(se)?b.deleteFragment(f,{direction:"forward"}):b.deleteForward(f);return}if(at.isDeleteLineBackward(Y)){w.preventDefault(),se&&G.isExpanded(se)?b.deleteFragment(f,{direction:"backward"}):b.deleteBackward(f,{unit:"line"});return}if(at.isDeleteLineForward(Y)){w.preventDefault(),se&&G.isExpanded(se)?b.deleteFragment(f,{direction:"forward"}):b.deleteForward(f,{unit:"line"});return}if(at.isDeleteWordBackward(Y)){w.preventDefault(),se&&G.isExpanded(se)?b.deleteFragment(f,{direction:"backward"}):b.deleteBackward(f,{unit:"word"});return}if(at.isDeleteWordForward(Y)){w.preventDefault(),se&&G.isExpanded(se)?b.deleteFragment(f,{direction:"forward"}):b.deleteForward(f,{unit:"word"});return}}}},[i,f,D.onKeyDown]),onPaste:(0,g.useCallback)(w=>{!i&&te.hasEditableTarget(f,w.target)&&!xt(w,D.onPaste)&&(!cn||Cm(w.nativeEvent)||or)&&(w.preventDefault(),te.insertData(f,w.clipboardData))},[i,f,D.onPaste])}),g.createElement(mv,{decorations:k,node:f,renderElement:l,renderPlaceholder:d,renderLeaf:c,selection:f.selection})))))},Cv=e=>{var{attributes:t,children:n}=e;return g.createElement("span",Object.assign({},t),n,At&&g.createElement("br",null))},Dv=()=>[],bv=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&G.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),Z0(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},xt=(e,t)=>{if(!t)return!1;var n=t(e);return n??(e.isDefaultPrevented()||e.isPropagationStopped())},Dl=e=>hn(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),xv=(e,t)=>{if(!t)return!1;var n=t(e);return n??e.defaultPrevented},bl=(0,g.createContext)(!1),nE=()=>useContext(bl);function yv(e){return e instanceof Error}var xl=(0,g.createContext)({}),Ev=(e,t)=>e===t;function Bv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ev,[,n]=useReducer(h=>h+1,0),r=useContext(xl);if(!r)throw new Error("The `useSlateSelector` hook must be used inside the <Slate> component's context.");var{getSlate:s,addEventListener:o}=r,i=useRef(),l=useRef(()=>null),c=useRef(null),d;try{e!==l.current||i.current?d=e(s()):d=c.current}catch(h){throw i.current&&yv(h)&&(h.message+=`
The error may be correlated with this previous error:
`.concat(i.current.stack,`

`)),h}return xn(()=>{l.current=e,c.current=d,i.current=void 0}),xn(()=>{function h(){try{var v=l.current(s());if(t(v,c.current))return;c.current=v}catch(C){i.current=C}n()}var m=o(h);return h(),()=>m()},[o,s]),d}function Av(e){var t=(0,g.useRef)([]).current,n=(0,g.useRef)({editor:e}).current,r=(0,g.useCallback)(o=>{n.editor=o,t.forEach(i=>i(o))},[t,n]),s=(0,g.useMemo)(()=>({getSlate:()=>n.editor,addEventListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1)})}),[t,n]);return{selectorContext:s,onChange:r}}var jv=["editor","children","onChange","initialValue"],wv=e=>{var{editor:t,children:n,onChange:r,initialValue:s}=e,o=Sn(e,jv),i=(0,g.useRef)(!1),[l,c]=g.useState(()=>{if(!ge.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(ft.stringify(s)));if(!b.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(ft.stringify(t)));return t.children=s,Object.assign(t,o),{v:0,editor:t}}),{selectorContext:d,onChange:h}=Av(t),m=(0,g.useCallback)(()=>{r&&r(t.children),c(D=>({v:D.v+1,editor:t})),h(t)},[t,h,r]);(0,g.useEffect)(()=>(Hs.set(t,m),()=>{Hs.set(t,()=>{}),i.current=!0}),[t,m]);var[v,C]=(0,g.useState)(te.isFocused(t));return(0,g.useEffect)(()=>{C(te.isFocused(t))},[t]),xn(()=>{var D=()=>C(te.isFocused(t));return Gi>=17?(document.addEventListener("focusin",D),document.addEventListener("focusout",D),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",D)}):(document.addEventListener("focus",D,!0),document.addEventListener("blur",D,!0),()=>{document.removeEventListener("focus",D,!0),document.removeEventListener("blur",D,!0)})},[]),g.createElement(xl.Provider,{value:d},g.createElement(_s.Provider,{value:l},g.createElement($r.Provider,{value:l.editor},g.createElement(bl.Provider,{value:v},n))))},rE=()=>{var e=useContext($r);if(!e)throw new Error("The `useEditor` hook must be used inside the <Slate> component's context.");return e},sE=()=>Bv(e=>e.selection,Fv),Fv=(e,t)=>!e&&!t?!0:!e||!t?!1:Range.equals(e,t),yl=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},El=(e,t,n)=>{var r=te.toDOMRange(e,t).getBoundingClientRect(),s=te.toDOMRange(e,n).getBoundingClientRect();return yl(r,s)&&yl(s,r)},Rv=(e,t)=>{var n=b.range(e,G.end(t)),r=Array.from(b.positions(e,{at:t})),s=0,o=r.length,i=Math.floor(o/2);if(El(e,b.range(e,r[s]),n))return b.range(e,r[s],n);if(r.length<2)return b.range(e,r[r.length-1],n);for(;i!==r.length&&i!==s;)El(e,b.range(e,r[i]),n)?o=i:s=i,i=Math.floor((s+o)/2);return b.range(e,r[o],n)};function Bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bl(Object(n),!0).forEach(function(r){Lr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bl(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Tv=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t,{apply:s,onChange:o,deleteBackward:i,addMark:l,removeMark:c}=r;return zr.set(r,new WeakMap),r.addMark=(d,h)=>{var m,v;(m=qs.get(r))===null||m===void 0||m(),!Zt.get(r)&&(v=jt.get(r))!==null&&v!==void 0&&v.length&&Zt.set(r,null),_t.delete(r),l(d,h)},r.removeMark=d=>{var h;!Zt.get(r)&&(h=jt.get(r))!==null&&h!==void 0&&h.length&&Zt.set(r,null),_t.delete(r),c(d)},r.deleteBackward=d=>{if(d!=="line")return i(d);if(r.selection&&G.isCollapsed(r.selection)){var h=b.above(r,{match:D=>Be.isElement(D)&&b.isBlock(r,D),at:r.selection});if(h){var[,m]=h,v=b.range(r,m,r.selection.anchor),C=Rv(r,v);G.isCollapsed(C)||K.delete(r,{at:C})}}},r.apply=d=>{var h=[],m=jt.get(r);if(m!=null&&m.length){var v=m.map(j=>Mm(j,d)).filter(Boolean);jt.set(r,v)}var C=fn.get(r);C&&fn.set(r,ol(r,C,d));var D=dn.get(r);if(D!=null&&D.at){var f=We.isPoint(D?.at)?Js(r,D.at,d):ol(r,D.at,d);dn.set(r,f?Al(Al({},D),{},{at:f}):null)}switch(d.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{h.push(...Ur(r,d.path));break}case"set_selection":{var y;(y=lr.get(r))===null||y===void 0||y.unref(),lr.delete(r);break}case"insert_node":case"remove_node":{h.push(...Ur(r,O.parent(d.path)));break}case"merge_node":{var x=O.previous(d.path);h.push(...Ur(r,x));break}case"move_node":{var B=O.common(O.parent(d.path),O.parent(d.newPath));h.push(...Ur(r,B));break}}s(d);for(var[A,S]of h){var[E]=b.node(r,A);Us.set(E,S)}},r.setFragmentData=d=>{var{selection:h}=r;if(h){var[m,v]=G.edges(h),C=b.void(r,{at:m.path}),D=b.void(r,{at:v.path});if(!(G.isCollapsed(h)&&!C)){var f=te.toDOMRange(r,h),y=f.cloneContents(),x=y.childNodes[0];if(y.childNodes.forEach(P=>{P.textContent&&P.textContent.trim()!==""&&(x=P)}),D){var[B]=D,A=f.cloneRange(),S=te.toDOMNode(r,B);A.setEndAfter(S),y=A.cloneContents()}if(C&&(x=y.querySelector("[data-slate-spacer]")),Array.from(y.querySelectorAll("[data-slate-zero-width]")).forEach(P=>{var Q=P.getAttribute("data-slate-zero-width")==="n";P.textContent=Q?`
`:""}),el(x)){var E=x.ownerDocument.createElement("span");E.style.whiteSpace="pre",E.appendChild(x),y.appendChild(E),x=E}var j=r.getFragment(),R=JSON.stringify(j),Z=window.btoa(encodeURIComponent(R));x.setAttribute("data-slate-fragment",Z),d.setData("application/".concat(n),Z);var F=y.ownerDocument.createElement("div");return F.appendChild(y),F.setAttribute("hidden","true"),y.ownerDocument.body.appendChild(F),d.setData("text/html",F.innerHTML),d.setData("text/plain",nl(F)),y.ownerDocument.body.removeChild(F),d}}},r.insertData=d=>{r.insertFragmentData(d)||r.insertTextData(d)},r.insertFragmentData=d=>{var h=d.getData("application/".concat(n))||Em(d);if(h){var m=decodeURIComponent(window.atob(h)),v=JSON.parse(m);return r.insertFragment(v),!0}return!1},r.insertTextData=d=>{var h=d.getData("text/plain");if(h){var m=h.split(/\r\n|\r|\n/),v=!1;for(var C of m)v&&K.splitNodes(r,{always:!0}),r.insertText(C),v=!0;return!0}return!1},r.onChange=d=>{var h=Gi<18?Ns.unstable_batchedUpdates:m=>m();h(()=>{var m=Hs.get(r);m&&m(),o(d)})},r},Ur=(e,t)=>{var n=[];for(var[r,s]of b.levels(e,{at:t})){var o=te.findKey(e,r);n.push([s,o])}return n},nt=p(50809),jl=p(25917),wl=p(26420),en=p(51483),yn=p(96616);const Mv="Separator",ea="horizontal",Ov=["horizontal","vertical"],ta=(0,g.forwardRef)((e,t)=>{const{decorative:n,orientation:r=ea,...s}=e,o=Fl(r)?r:ea,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return(0,g.createElement)(yn.WV.div,(0,nt.Z)({"data-orientation":o},l,s,{ref:t}))});ta.propTypes={orientation(e,t,n){const r=e[t],s=String(r);return r&&!Fl(r)?new Error(Sv(s,n)):null}};function Sv(e,t){return`Invalid prop \`orientation\` of value \`${e}\` supplied to \`${t}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${ea}\`.`}function Fl(e){return Ov.includes(e)}const Iv=ta;var na=p(44595);const Pv="Toggle",Rl=(0,g.forwardRef)((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:s,...o}=e,[i=!1,l]=(0,na.T)({prop:n,onChange:s,defaultProp:r});return(0,g.createElement)(yn.WV.button,(0,nt.Z)({type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0},o,{ref:t,onClick:(0,jl.M)(e.onClick,()=>{e.disabled||l(!i)})}))}),aE=null;var Tl=p(88773);const kn="ToggleGroup",[Ml,Ol]=(0,wl.b)(kn,[en.Pc]),Sl=(0,en.Pc)(),ra=g.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return g.createElement(kv,(0,nt.Z)({},s,{ref:t}))}if(n==="multiple"){const s=r;return g.createElement(Lv,(0,nt.Z)({},s,{ref:t}))}throw new Error(`Missing prop \`type\` expected on \`${kn}\``)}),[Il,Pl]=Ml(kn),kv=g.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[i,l]=(0,na.T)({prop:n,defaultProp:r,onChange:s});return g.createElement(Il,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:g.useCallback(()=>l(""),[l])},g.createElement(kl,(0,nt.Z)({},o,{ref:t})))}),Lv=g.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[i=[],l]=(0,na.T)({prop:n,defaultProp:r,onChange:s}),c=g.useCallback(h=>l((m=[])=>[...m,h]),[l]),d=g.useCallback(h=>l((m=[])=>m.filter(v=>v!==h)),[l]);return g.createElement(Il,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d},g.createElement(kl,(0,nt.Z)({},o,{ref:t})))}),[$v,Nv]=Ml(kn),kl=g.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:o,dir:i,loop:l=!0,...c}=e,d=Sl(n),h=(0,Tl.gm)(i),m={role:"group",dir:h,...c};return g.createElement($v,{scope:n,rovingFocus:s,disabled:r},s?g.createElement(en.fC,(0,nt.Z)({asChild:!0},d,{orientation:o,dir:h,loop:l}),g.createElement(yn.WV.div,(0,nt.Z)({},m,{ref:t}))):g.createElement(yn.WV.div,(0,nt.Z)({},m,{ref:t})))}),Vr="ToggleGroupItem",Ll=g.forwardRef((e,t)=>{const n=Pl(Vr,e.__scopeToggleGroup),r=Nv(Vr,e.__scopeToggleGroup),s=Sl(e.__scopeToggleGroup),o=n.value.includes(e.value),i=r.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=g.useRef(null);return r.rovingFocus?g.createElement(en.ck,(0,nt.Z)({asChild:!0},s,{focusable:!i,active:o,ref:c}),g.createElement($l,(0,nt.Z)({},l,{ref:t}))):g.createElement($l,(0,nt.Z)({},l,{ref:t}))}),$l=g.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,o=Pl(Vr,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return g.createElement(Rl,(0,nt.Z)({},l,s,{ref:t,onPressedChange:c=>{c?o.onItemActivate(r):o.onItemDeactivate(r)}}))}),Zv=ra,zv=Ll,sa="Toolbar",[Wv,oE]=(0,wl.b)(sa,[en.Pc,Ol]),aa=(0,en.Pc)(),Nl=Ol(),[Uv,Zl]=Wv(sa),zl=(0,g.forwardRef)((e,t)=>{const{__scopeToolbar:n,orientation:r="horizontal",dir:s,loop:o=!0,...i}=e,l=aa(n),c=(0,Tl.gm)(s);return(0,g.createElement)(Uv,{scope:n,orientation:r,dir:c},(0,g.createElement)(en.fC,(0,nt.Z)({asChild:!0},l,{orientation:r,dir:c,loop:o}),(0,g.createElement)(yn.WV.div,(0,nt.Z)({role:"toolbar","aria-orientation":r,dir:c},i,{ref:t}))))}),Wl="ToolbarSeparator",Ul=(0,g.forwardRef)((e,t)=>{const{__scopeToolbar:n,...r}=e,s=Zl(Wl,n);return(0,g.createElement)(Iv,(0,nt.Z)({orientation:s.orientation==="horizontal"?"vertical":"horizontal"},r,{ref:t}))}),Vv="ToolbarButton",Vl=(0,g.forwardRef)((e,t)=>{const{__scopeToolbar:n,...r}=e,s=aa(n);return(0,g.createElement)(en.ck,(0,nt.Z)({asChild:!0},s,{focusable:!e.disabled}),(0,g.createElement)(yn.WV.button,(0,nt.Z)({type:"button"},r,{ref:t})))}),Hv="ToolbarLink",qv=(0,g.forwardRef)((e,t)=>{const{__scopeToolbar:n,...r}=e,s=aa(n);return(0,g.createElement)(en.ck,(0,nt.Z)({asChild:!0},s,{focusable:!0}),(0,g.createElement)(yn.WV.a,(0,nt.Z)({},r,{ref:t,onKeyDown:(0,jl.M)(e.onKeyDown,o=>{o.key===" "&&o.currentTarget.click()})})))}),Hl="ToolbarToggleGroup",ql=(0,g.forwardRef)((e,t)=>{const{__scopeToolbar:n,...r}=e,s=Zl(Hl,n),o=Nl(n);return(0,g.createElement)(Zv,(0,nt.Z)({"data-orientation":s.orientation,dir:s.dir},o,r,{ref:t,rovingFocus:!1}))}),Kv="ToolbarToggleItem",Kl=(0,g.forwardRef)((e,t)=>{const{__scopeToolbar:n,...r}=e,s=Nl(n),o={__scopeToolbar:e.__scopeToolbar};return(0,g.createElement)(Vl,(0,nt.Z)({asChild:!0},o),(0,g.createElement)(zv,(0,nt.Z)({},s,r,{ref:t})))}),Gv=zl,Yv=Ul,iE=null,lE=null,Gl=ql,Qv=Kl;var Jv=p(14113),Xv=p(4357),Hr=p(21538),Yl=p(90975),Ql=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function _v(e,t){return!!(e===t||Ql(e)&&Ql(t))}function eC(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!_v(e[n],t[n]))return!1;return!0}function tC(e,t){t===void 0&&(t=eC);var n,r=[],s,o=!1;function i(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return o&&n===this&&t(l,r)||(s=e.apply(this,l),o=!0,n=this,r=l),s}return i}const Ln=tC;var nC=typeof performance=="object"&&typeof performance.now=="function",Jl=nC?function(){return performance.now()}:function(){return Date.now()};function qr(e){cancelAnimationFrame(e.id)}function Xl(e,t){var n=Jl();function r(){Jl()-n>=t?e.call(null):s.id=requestAnimationFrame(r)}var s={id:requestAnimationFrame(r)};return s}var oa=-1;function ia(e){if(e===void 0&&(e=!1),oa===-1||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),oa=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return oa}var $n=null;function Kr(e){if(e===void 0&&(e=!1),$n===null||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),s=r.style;return s.width="100px",s.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?$n="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?$n="negative":$n="positive-ascending"),document.body.removeChild(t),$n}return $n}var rC=150,sC=function(t){var n=t.columnIndex,r=t.data,s=t.rowIndex;return s+":"+n},uE=null,cE=null,dE=null;function _l(e){var t,n=e.getColumnOffset,r=e.getColumnStartIndexForOffset,s=e.getColumnStopIndexForStartIndex,o=e.getColumnWidth,i=e.getEstimatedTotalHeight,l=e.getEstimatedTotalWidth,c=e.getOffsetForColumnAndAlignment,d=e.getOffsetForRowAndAlignment,h=e.getRowHeight,m=e.getRowOffset,v=e.getRowStartIndexForOffset,C=e.getRowStopIndexForStartIndex,D=e.initInstanceProps,f=e.shouldResetStyleCacheOnItemSizeChange,y=e.validateProps;return t=function(x){(0,Yl.Z)(B,x);function B(S){var E;return E=x.call(this,S)||this,E._instanceProps=D(E.props,(0,Hr.Z)(E)),E._resetIsScrollingTimeoutId=null,E._outerRef=void 0,E.state={instance:(0,Hr.Z)(E),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof E.props.initialScrollLeft=="number"?E.props.initialScrollLeft:0,scrollTop:typeof E.props.initialScrollTop=="number"?E.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},E._callOnItemsRendered=void 0,E._callOnItemsRendered=Ln(function(j,R,Z,F,P,Q,I,z){return E.props.onItemsRendered({overscanColumnStartIndex:j,overscanColumnStopIndex:R,overscanRowStartIndex:Z,overscanRowStopIndex:F,visibleColumnStartIndex:P,visibleColumnStopIndex:Q,visibleRowStartIndex:I,visibleRowStopIndex:z})}),E._callOnScroll=void 0,E._callOnScroll=Ln(function(j,R,Z,F,P){return E.props.onScroll({horizontalScrollDirection:Z,scrollLeft:j,scrollTop:R,verticalScrollDirection:F,scrollUpdateWasRequested:P})}),E._getItemStyle=void 0,E._getItemStyle=function(j,R){var Z=E.props,F=Z.columnWidth,P=Z.direction,Q=Z.rowHeight,I=E._getItemStyleCache(f&&F,f&&P,f&&Q),z=j+":"+R,U;if(I.hasOwnProperty(z))U=I[z];else{var k=n(E.props,R,E._instanceProps),N=P==="rtl";I[z]=U={position:"absolute",left:N?void 0:k,right:N?k:void 0,top:m(E.props,j,E._instanceProps),height:h(E.props,j,E._instanceProps),width:o(E.props,R,E._instanceProps)}}return U},E._getItemStyleCache=void 0,E._getItemStyleCache=Ln(function(j,R,Z){return{}}),E._onScroll=function(j){var R=j.currentTarget,Z=R.clientHeight,F=R.clientWidth,P=R.scrollLeft,Q=R.scrollTop,I=R.scrollHeight,z=R.scrollWidth;E.setState(function(U){if(U.scrollLeft===P&&U.scrollTop===Q)return null;var k=E.props.direction,N=P;if(k==="rtl")switch(Kr()){case"negative":N=-P;break;case"positive-descending":N=z-F-P;break}N=Math.max(0,Math.min(N,z-F));var q=Math.max(0,Math.min(Q,I-Z));return{isScrolling:!0,horizontalScrollDirection:U.scrollLeft<P?"forward":"backward",scrollLeft:N,scrollTop:q,verticalScrollDirection:U.scrollTop<Q?"forward":"backward",scrollUpdateWasRequested:!1}},E._resetIsScrollingDebounced)},E._outerRefSetter=function(j){var R=E.props.outerRef;E._outerRef=j,typeof R=="function"?R(j):R!=null&&typeof R=="object"&&R.hasOwnProperty("current")&&(R.current=j)},E._resetIsScrollingDebounced=function(){E._resetIsScrollingTimeoutId!==null&&qr(E._resetIsScrollingTimeoutId),E._resetIsScrollingTimeoutId=Xl(E._resetIsScrolling,rC)},E._resetIsScrolling=function(){E._resetIsScrollingTimeoutId=null,E.setState({isScrolling:!1},function(){E._getItemStyleCache(-1)})},E}B.getDerivedStateFromProps=function(E,j){return aC(E,j),y(E),null};var A=B.prototype;return A.scrollTo=function(E){var j=E.scrollLeft,R=E.scrollTop;j!==void 0&&(j=Math.max(0,j)),R!==void 0&&(R=Math.max(0,R)),this.setState(function(Z){return j===void 0&&(j=Z.scrollLeft),R===void 0&&(R=Z.scrollTop),Z.scrollLeft===j&&Z.scrollTop===R?null:{horizontalScrollDirection:Z.scrollLeft<j?"forward":"backward",scrollLeft:j,scrollTop:R,scrollUpdateWasRequested:!0,verticalScrollDirection:Z.scrollTop<R?"forward":"backward"}},this._resetIsScrollingDebounced)},A.scrollToItem=function(E){var j=E.align,R=j===void 0?"auto":j,Z=E.columnIndex,F=E.rowIndex,P=this.props,Q=P.columnCount,I=P.height,z=P.rowCount,U=P.width,k=this.state,N=k.scrollLeft,q=k.scrollTop,V=ia();Z!==void 0&&(Z=Math.max(0,Math.min(Z,Q-1))),F!==void 0&&(F=Math.max(0,Math.min(F,z-1)));var re=i(this.props,this._instanceProps),J=l(this.props,this._instanceProps),oe=J>U?V:0,ne=re>I?V:0;this.scrollTo({scrollLeft:Z!==void 0?c(this.props,Z,R,N,this._instanceProps,ne):N,scrollTop:F!==void 0?d(this.props,F,R,q,this._instanceProps,oe):q})},A.componentDidMount=function(){var E=this.props,j=E.initialScrollLeft,R=E.initialScrollTop;if(this._outerRef!=null){var Z=this._outerRef;typeof j=="number"&&(Z.scrollLeft=j),typeof R=="number"&&(Z.scrollTop=R)}this._callPropsCallbacks()},A.componentDidUpdate=function(){var E=this.props.direction,j=this.state,R=j.scrollLeft,Z=j.scrollTop,F=j.scrollUpdateWasRequested;if(F&&this._outerRef!=null){var P=this._outerRef;if(E==="rtl")switch(Kr()){case"negative":P.scrollLeft=-R;break;case"positive-ascending":P.scrollLeft=R;break;default:var Q=P.clientWidth,I=P.scrollWidth;P.scrollLeft=I-Q-R;break}else P.scrollLeft=Math.max(0,R);P.scrollTop=Math.max(0,Z)}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&qr(this._resetIsScrollingTimeoutId)},A.render=function(){var E=this.props,j=E.children,R=E.className,Z=E.columnCount,F=E.direction,P=E.height,Q=E.innerRef,I=E.innerElementType,z=E.innerTagName,U=E.itemData,k=E.itemKey,N=k===void 0?sC:k,q=E.outerElementType,V=E.outerTagName,re=E.rowCount,J=E.style,oe=E.useIsScrolling,ne=E.width,ue=this.state.isScrolling,w=this._getHorizontalRangeToRender(),X=w[0],Y=w[1],se=this._getVerticalRangeToRender(),H=se[0],ie=se[1],Ae=[];if(Z>0&&re)for(var Me=H;Me<=ie;Me++)for(var Le=X;Le<=Y;Le++)Ae.push((0,g.createElement)(j,{columnIndex:Le,data:U,isScrolling:oe?ue:void 0,key:N({columnIndex:Le,data:U,rowIndex:Me}),rowIndex:Me,style:this._getItemStyle(Me,Le)}));var Ve=i(this.props,this._instanceProps),je=l(this.props,this._instanceProps);return(0,g.createElement)(q||V||"div",{className:R,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,nt.Z)({position:"relative",height:P,width:ne,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:F},J)},(0,g.createElement)(I||z||"div",{children:Ae,ref:Q,style:{height:Ve,pointerEvents:ue?"none":void 0,width:je}}))},A._callPropsCallbacks=function(){var E=this.props,j=E.columnCount,R=E.onItemsRendered,Z=E.onScroll,F=E.rowCount;if(typeof R=="function"&&j>0&&F>0){var P=this._getHorizontalRangeToRender(),Q=P[0],I=P[1],z=P[2],U=P[3],k=this._getVerticalRangeToRender(),N=k[0],q=k[1],V=k[2],re=k[3];this._callOnItemsRendered(Q,I,N,q,z,U,V,re)}if(typeof Z=="function"){var J=this.state,oe=J.horizontalScrollDirection,ne=J.scrollLeft,ue=J.scrollTop,w=J.scrollUpdateWasRequested,X=J.verticalScrollDirection;this._callOnScroll(ne,ue,oe,X,w)}},A._getHorizontalRangeToRender=function(){var E=this.props,j=E.columnCount,R=E.overscanColumnCount,Z=E.overscanColumnsCount,F=E.overscanCount,P=E.rowCount,Q=this.state,I=Q.horizontalScrollDirection,z=Q.isScrolling,U=Q.scrollLeft,k=R||Z||F||1;if(j===0||P===0)return[0,0,0,0];var N=r(this.props,U,this._instanceProps),q=s(this.props,N,U,this._instanceProps),V=!z||I==="backward"?Math.max(1,k):1,re=!z||I==="forward"?Math.max(1,k):1;return[Math.max(0,N-V),Math.max(0,Math.min(j-1,q+re)),N,q]},A._getVerticalRangeToRender=function(){var E=this.props,j=E.columnCount,R=E.overscanCount,Z=E.overscanRowCount,F=E.overscanRowsCount,P=E.rowCount,Q=this.state,I=Q.isScrolling,z=Q.verticalScrollDirection,U=Q.scrollTop,k=Z||F||R||1;if(j===0||P===0)return[0,0,0,0];var N=v(this.props,U,this._instanceProps),q=C(this.props,N,U,this._instanceProps),V=!I||z==="backward"?Math.max(1,k):1,re=!I||z==="forward"?Math.max(1,k):1;return[Math.max(0,N-V),Math.max(0,Math.min(P-1,q+re)),N,q]},B}(g.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var aC=function(t,n){var r=t.children,s=t.direction,o=t.height,i=t.innerTagName,l=t.outerTagName,c=t.overscanColumnsCount,d=t.overscanCount,h=t.overscanRowsCount,m=t.width,v=n.instance},eu=50,tu=function(t,n){var r=t.rowCount,s=n.rowMetadataMap,o=n.estimatedRowHeight,i=n.lastMeasuredRowIndex,l=0;if(i>=r&&(i=r-1),i>=0){var c=s[i];l=c.offset+c.size}var d=r-i-1,h=d*o;return l+h},nu=function(t,n){var r=t.columnCount,s=n.columnMetadataMap,o=n.estimatedColumnWidth,i=n.lastMeasuredColumnIndex,l=0;if(i>=r&&(i=r-1),i>=0){var c=s[i];l=c.offset+c.size}var d=r-i-1,h=d*o;return l+h},tn=function(t,n,r,s){var o,i,l;if(t==="column"?(o=s.columnMetadataMap,i=n.columnWidth,l=s.lastMeasuredColumnIndex):(o=s.rowMetadataMap,i=n.rowHeight,l=s.lastMeasuredRowIndex),r>l){var c=0;if(l>=0){var d=o[l];c=d.offset+d.size}for(var h=l+1;h<=r;h++){var m=i(h);o[h]={offset:c,size:m},c+=m}t==="column"?s.lastMeasuredColumnIndex=r:s.lastMeasuredRowIndex=r}return o[r]},ru=function(t,n,r,s){var o,i;t==="column"?(o=r.columnMetadataMap,i=r.lastMeasuredColumnIndex):(o=r.rowMetadataMap,i=r.lastMeasuredRowIndex);var l=i>0?o[i].offset:0;return l>=s?su(t,n,r,i,0,s):oC(t,n,r,Math.max(0,i),s)},su=function(t,n,r,s,o,i){for(;o<=s;){var l=o+Math.floor((s-o)/2),c=tn(t,n,l,r).offset;if(c===i)return l;c<i?o=l+1:c>i&&(s=l-1)}return o>0?o-1:0},oC=function(t,n,r,s,o){for(var i=t==="column"?n.columnCount:n.rowCount,l=1;s<i&&tn(t,n,s,r).offset<o;)s+=l,l*=2;return su(t,n,r,Math.min(s,i-1),Math.floor(s/2),o)},au=function(t,n,r,s,o,i,l){var c=t==="column"?n.width:n.height,d=tn(t,n,r,i),h=t==="column"?nu(n,i):tu(n,i),m=Math.max(0,Math.min(h-c,d.offset)),v=Math.max(0,d.offset-c+l+d.size);switch(s==="smart"&&(o>=v-c&&o<=m+c?s="auto":s="center"),s){case"start":return m;case"end":return v;case"center":return Math.round(v+(m-v)/2);case"auto":default:return o>=v&&o<=m?o:v>m||o<v?v:m}},fE=_l({getColumnOffset:function(t,n,r){return tn("column",t,n,r).offset},getColumnStartIndexForOffset:function(t,n,r){return ru("column",t,r,n)},getColumnStopIndexForStartIndex:function(t,n,r,s){for(var o=t.columnCount,i=t.width,l=tn("column",t,n,s),c=r+i,d=l.offset+l.size,h=n;h<o-1&&d<c;)h++,d+=tn("column",t,h,s).size;return h},getColumnWidth:function(t,n,r){return r.columnMetadataMap[n].size},getEstimatedTotalHeight:tu,getEstimatedTotalWidth:nu,getOffsetForColumnAndAlignment:function(t,n,r,s,o,i){return au("column",t,n,r,s,o,i)},getOffsetForRowAndAlignment:function(t,n,r,s,o,i){return au("row",t,n,r,s,o,i)},getRowOffset:function(t,n,r){return tn("row",t,n,r).offset},getRowHeight:function(t,n,r){return r.rowMetadataMap[n].size},getRowStartIndexForOffset:function(t,n,r){return ru("row",t,r,n)},getRowStopIndexForStartIndex:function(t,n,r,s){for(var o=t.rowCount,i=t.height,l=tn("row",t,n,s),c=r+i,d=l.offset+l.size,h=n;h<o-1&&d<c;)h++,d+=tn("row",t,h,s).size;return h},initInstanceProps:function(t,n){var r=t,s=r.estimatedColumnWidth,o=r.estimatedRowHeight,i={columnMetadataMap:{},estimatedColumnWidth:s||eu,estimatedRowHeight:o||eu,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return n.resetAfterColumnIndex=function(l,c){c===void 0&&(c=!0),n.resetAfterIndices({columnIndex:l,shouldForceUpdate:c})},n.resetAfterRowIndex=function(l,c){c===void 0&&(c=!0),n.resetAfterIndices({rowIndex:l,shouldForceUpdate:c})},n.resetAfterIndices=function(l){var c=l.columnIndex,d=l.rowIndex,h=l.shouldForceUpdate,m=h===void 0?!0:h;typeof c=="number"&&(i.lastMeasuredColumnIndex=Math.min(i.lastMeasuredColumnIndex,c-1)),typeof d=="number"&&(i.lastMeasuredRowIndex=Math.min(i.lastMeasuredRowIndex,d-1)),n._getItemStyleCache(-1),m&&n.forceUpdate()},i},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){var n=t.columnWidth,r=t.rowHeight}}),iC=150,lC=function(t,n){return t},hE=null,gE=null;function ou(e){var t,n=e.getItemOffset,r=e.getEstimatedTotalSize,s=e.getItemSize,o=e.getOffsetForIndexAndAlignment,i=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,d=e.shouldResetStyleCacheOnItemSizeChange,h=e.validateProps;return t=function(m){(0,Yl.Z)(v,m);function v(D){var f;return f=m.call(this,D)||this,f._instanceProps=c(f.props,(0,Hr.Z)(f)),f._outerRef=void 0,f._resetIsScrollingTimeoutId=null,f.state={instance:(0,Hr.Z)(f),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof f.props.initialScrollOffset=="number"?f.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},f._callOnItemsRendered=void 0,f._callOnItemsRendered=Ln(function(y,x,B,A){return f.props.onItemsRendered({overscanStartIndex:y,overscanStopIndex:x,visibleStartIndex:B,visibleStopIndex:A})}),f._callOnScroll=void 0,f._callOnScroll=Ln(function(y,x,B){return f.props.onScroll({scrollDirection:y,scrollOffset:x,scrollUpdateWasRequested:B})}),f._getItemStyle=void 0,f._getItemStyle=function(y){var x=f.props,B=x.direction,A=x.itemSize,S=x.layout,E=f._getItemStyleCache(d&&A,d&&S,d&&B),j;if(E.hasOwnProperty(y))j=E[y];else{var R=n(f.props,y,f._instanceProps),Z=s(f.props,y,f._instanceProps),F=B==="horizontal"||S==="horizontal",P=B==="rtl",Q=F?R:0;E[y]=j={position:"absolute",left:P?void 0:Q,right:P?Q:void 0,top:F?0:R,height:F?"100%":Z,width:F?Z:"100%"}}return j},f._getItemStyleCache=void 0,f._getItemStyleCache=Ln(function(y,x,B){return{}}),f._onScrollHorizontal=function(y){var x=y.currentTarget,B=x.clientWidth,A=x.scrollLeft,S=x.scrollWidth;f.setState(function(E){if(E.scrollOffset===A)return null;var j=f.props.direction,R=A;if(j==="rtl")switch(Kr()){case"negative":R=-A;break;case"positive-descending":R=S-B-A;break}return R=Math.max(0,Math.min(R,S-B)),{isScrolling:!0,scrollDirection:E.scrollOffset<A?"forward":"backward",scrollOffset:R,scrollUpdateWasRequested:!1}},f._resetIsScrollingDebounced)},f._onScrollVertical=function(y){var x=y.currentTarget,B=x.clientHeight,A=x.scrollHeight,S=x.scrollTop;f.setState(function(E){if(E.scrollOffset===S)return null;var j=Math.max(0,Math.min(S,A-B));return{isScrolling:!0,scrollDirection:E.scrollOffset<j?"forward":"backward",scrollOffset:j,scrollUpdateWasRequested:!1}},f._resetIsScrollingDebounced)},f._outerRefSetter=function(y){var x=f.props.outerRef;f._outerRef=y,typeof x=="function"?x(y):x!=null&&typeof x=="object"&&x.hasOwnProperty("current")&&(x.current=y)},f._resetIsScrollingDebounced=function(){f._resetIsScrollingTimeoutId!==null&&qr(f._resetIsScrollingTimeoutId),f._resetIsScrollingTimeoutId=Xl(f._resetIsScrolling,iC)},f._resetIsScrolling=function(){f._resetIsScrollingTimeoutId=null,f.setState({isScrolling:!1},function(){f._getItemStyleCache(-1,null)})},f}v.getDerivedStateFromProps=function(f,y){return uC(f,y),h(f),null};var C=v.prototype;return C.scrollTo=function(f){f=Math.max(0,f),this.setState(function(y){return y.scrollOffset===f?null:{scrollDirection:y.scrollOffset<f?"forward":"backward",scrollOffset:f,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},C.scrollToItem=function(f,y){y===void 0&&(y="auto");var x=this.props,B=x.itemCount,A=x.layout,S=this.state.scrollOffset;f=Math.max(0,Math.min(f,B-1));var E=0;if(this._outerRef){var j=this._outerRef;A==="vertical"?E=j.scrollWidth>j.clientWidth?ia():0:E=j.scrollHeight>j.clientHeight?ia():0}this.scrollTo(o(this.props,f,y,S,this._instanceProps,E))},C.componentDidMount=function(){var f=this.props,y=f.direction,x=f.initialScrollOffset,B=f.layout;if(typeof x=="number"&&this._outerRef!=null){var A=this._outerRef;y==="horizontal"||B==="horizontal"?A.scrollLeft=x:A.scrollTop=x}this._callPropsCallbacks()},C.componentDidUpdate=function(){var f=this.props,y=f.direction,x=f.layout,B=this.state,A=B.scrollOffset,S=B.scrollUpdateWasRequested;if(S&&this._outerRef!=null){var E=this._outerRef;if(y==="horizontal"||x==="horizontal")if(y==="rtl")switch(Kr()){case"negative":E.scrollLeft=-A;break;case"positive-ascending":E.scrollLeft=A;break;default:var j=E.clientWidth,R=E.scrollWidth;E.scrollLeft=R-j-A;break}else E.scrollLeft=A;else E.scrollTop=A}this._callPropsCallbacks()},C.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&qr(this._resetIsScrollingTimeoutId)},C.render=function(){var f=this.props,y=f.children,x=f.className,B=f.direction,A=f.height,S=f.innerRef,E=f.innerElementType,j=f.innerTagName,R=f.itemCount,Z=f.itemData,F=f.itemKey,P=F===void 0?lC:F,Q=f.layout,I=f.outerElementType,z=f.outerTagName,U=f.style,k=f.useIsScrolling,N=f.width,q=this.state.isScrolling,V=B==="horizontal"||Q==="horizontal",re=V?this._onScrollHorizontal:this._onScrollVertical,J=this._getRangeToRender(),oe=J[0],ne=J[1],ue=[];if(R>0)for(var w=oe;w<=ne;w++)ue.push((0,g.createElement)(y,{data:Z,key:P(w,Z),index:w,isScrolling:k?q:void 0,style:this._getItemStyle(w)}));var X=r(this.props,this._instanceProps);return(0,g.createElement)(I||z||"div",{className:x,onScroll:re,ref:this._outerRefSetter,style:(0,nt.Z)({position:"relative",height:A,width:N,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:B},U)},(0,g.createElement)(E||j||"div",{children:ue,ref:S,style:{height:V?"100%":X,pointerEvents:q?"none":void 0,width:V?X:"100%"}}))},C._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var f=this.props.itemCount;if(f>0){var y=this._getRangeToRender(),x=y[0],B=y[1],A=y[2],S=y[3];this._callOnItemsRendered(x,B,A,S)}}if(typeof this.props.onScroll=="function"){var E=this.state,j=E.scrollDirection,R=E.scrollOffset,Z=E.scrollUpdateWasRequested;this._callOnScroll(j,R,Z)}},C._getRangeToRender=function(){var f=this.props,y=f.itemCount,x=f.overscanCount,B=this.state,A=B.isScrolling,S=B.scrollDirection,E=B.scrollOffset;if(y===0)return[0,0,0,0];var j=i(this.props,E,this._instanceProps),R=l(this.props,j,E,this._instanceProps),Z=!A||S==="backward"?Math.max(1,x):1,F=!A||S==="forward"?Math.max(1,x):1;return[Math.max(0,j-Z),Math.max(0,Math.min(y-1,R+F)),j,R]},v}(g.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var uC=function(t,n){var r=t.children,s=t.direction,o=t.height,i=t.layout,l=t.innerTagName,c=t.outerTagName,d=t.width,h=n.instance;if(!1)var m},cC=50,Nn=function(t,n,r){var s=t,o=s.itemSize,i=r.itemMetadataMap,l=r.lastMeasuredIndex;if(n>l){var c=0;if(l>=0){var d=i[l];c=d.offset+d.size}for(var h=l+1;h<=n;h++){var m=o(h);i[h]={offset:c,size:m},c+=m}r.lastMeasuredIndex=n}return i[n]},dC=function(t,n,r){var s=n.itemMetadataMap,o=n.lastMeasuredIndex,i=o>0?s[o].offset:0;return i>=r?iu(t,n,o,0,r):fC(t,n,Math.max(0,o),r)},iu=function(t,n,r,s,o){for(;s<=r;){var i=s+Math.floor((r-s)/2),l=Nn(t,i,n).offset;if(l===o)return i;l<o?s=i+1:l>o&&(r=i-1)}return s>0?s-1:0},fC=function(t,n,r,s){for(var o=t.itemCount,i=1;r<o&&Nn(t,r,n).offset<s;)r+=i,i*=2;return iu(t,n,Math.min(r,o-1),Math.floor(r/2),s)},lu=function(t,n){var r=t.itemCount,s=n.itemMetadataMap,o=n.estimatedItemSize,i=n.lastMeasuredIndex,l=0;if(i>=r&&(i=r-1),i>=0){var c=s[i];l=c.offset+c.size}var d=r-i-1,h=d*o;return l+h},pE=ou({getItemOffset:function(t,n,r){return Nn(t,n,r).offset},getItemSize:function(t,n,r){return r.itemMetadataMap[n].size},getEstimatedTotalSize:lu,getOffsetForIndexAndAlignment:function(t,n,r,s,o,i){var l=t.direction,c=t.height,d=t.layout,h=t.width,m=l==="horizontal"||d==="horizontal",v=m?h:c,C=Nn(t,n,o),D=lu(t,o),f=Math.max(0,Math.min(D-v,C.offset)),y=Math.max(0,C.offset-v+C.size+i);switch(r==="smart"&&(s>=y-v&&s<=f+v?r="auto":r="center"),r){case"start":return f;case"end":return y;case"center":return Math.round(y+(f-y)/2);case"auto":default:return s>=y&&s<=f?s:s<y?y:f}},getStartIndexForOffset:function(t,n,r){return dC(t,r,n)},getStopIndexForStartIndex:function(t,n,r,s){for(var o=t.direction,i=t.height,l=t.itemCount,c=t.layout,d=t.width,h=o==="horizontal"||c==="horizontal",m=h?d:i,v=Nn(t,n,s),C=r+m,D=v.offset+v.size,f=n;f<l-1&&D<C;)f++,D+=Nn(t,f,s).size;return f},initInstanceProps:function(t,n){var r=t,s=r.estimatedItemSize,o={itemMetadataMap:{},estimatedItemSize:s||cC,lastMeasuredIndex:-1};return n.resetAfterIndex=function(i,l){l===void 0&&(l=!0),o.lastMeasuredIndex=Math.min(o.lastMeasuredIndex,i-1),n._getItemStyleCache(-1),l&&n.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){var n=t.itemSize}}),mE=_l({getColumnOffset:function(t,n){var r=t.columnWidth;return n*r},getColumnWidth:function(t,n){var r=t.columnWidth;return r},getRowOffset:function(t,n){var r=t.rowHeight;return n*r},getRowHeight:function(t,n){var r=t.rowHeight;return r},getEstimatedTotalHeight:function(t){var n=t.rowCount,r=t.rowHeight;return r*n},getEstimatedTotalWidth:function(t){var n=t.columnCount,r=t.columnWidth;return r*n},getOffsetForColumnAndAlignment:function(t,n,r,s,o,i){var l=t.columnCount,c=t.columnWidth,d=t.width,h=Math.max(0,l*c-d),m=Math.min(h,n*c),v=Math.max(0,n*c-d+i+c);switch(r==="smart"&&(s>=v-d&&s<=m+d?r="auto":r="center"),r){case"start":return m;case"end":return v;case"center":var C=Math.round(v+(m-v)/2);return C<Math.ceil(d/2)?0:C>h+Math.floor(d/2)?h:C;case"auto":default:return s>=v&&s<=m?s:v>m||s<v?v:m}},getOffsetForRowAndAlignment:function(t,n,r,s,o,i){var l=t.rowHeight,c=t.height,d=t.rowCount,h=Math.max(0,d*l-c),m=Math.min(h,n*l),v=Math.max(0,n*l-c+i+l);switch(r==="smart"&&(s>=v-c&&s<=m+c?r="auto":r="center"),r){case"start":return m;case"end":return v;case"center":var C=Math.round(v+(m-v)/2);return C<Math.ceil(c/2)?0:C>h+Math.floor(c/2)?h:C;case"auto":default:return s>=v&&s<=m?s:v>m||s<v?v:m}},getColumnStartIndexForOffset:function(t,n){var r=t.columnWidth,s=t.columnCount;return Math.max(0,Math.min(s-1,Math.floor(n/r)))},getColumnStopIndexForStartIndex:function(t,n,r){var s=t.columnWidth,o=t.columnCount,i=t.width,l=n*s,c=Math.ceil((i+r-l)/s);return Math.max(0,Math.min(o-1,n+c-1))},getRowStartIndexForOffset:function(t,n){var r=t.rowHeight,s=t.rowCount;return Math.max(0,Math.min(s-1,Math.floor(n/r)))},getRowStopIndexForStartIndex:function(t,n,r){var s=t.rowHeight,o=t.rowCount,i=t.height,l=n*s,c=Math.ceil((i+r-l)/s);return Math.max(0,Math.min(o-1,n+c-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var n=t.columnWidth,r=t.rowHeight}}),hC=ou({getItemOffset:function(t,n){var r=t.itemSize;return n*r},getItemSize:function(t,n){var r=t.itemSize;return r},getEstimatedTotalSize:function(t){var n=t.itemCount,r=t.itemSize;return r*n},getOffsetForIndexAndAlignment:function(t,n,r,s,o,i){var l=t.direction,c=t.height,d=t.itemCount,h=t.itemSize,m=t.layout,v=t.width,C=l==="horizontal"||m==="horizontal",D=C?v:c,f=Math.max(0,d*h-D),y=Math.min(f,n*h),x=Math.max(0,n*h-D+h+i);switch(r==="smart"&&(s>=x-D&&s<=y+D?r="auto":r="center"),r){case"start":return y;case"end":return x;case"center":{var B=Math.round(x+(y-x)/2);return B<Math.ceil(D/2)?0:B>f+Math.floor(D/2)?f:B}case"auto":default:return s>=x&&s<=y?s:s<x?x:y}},getStartIndexForOffset:function(t,n){var r=t.itemCount,s=t.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/s)))},getStopIndexForStartIndex:function(t,n,r){var s=t.direction,o=t.height,i=t.itemCount,l=t.itemSize,c=t.layout,d=t.width,h=s==="horizontal"||c==="horizontal",m=n*l,v=h?d:o,C=Math.ceil((v+r-m)/l);return Math.max(0,Math.min(i-1,n+C-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var n=t.itemSize}});function la(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}var gC=null,pC=null;function mC(e,t){var n=e.style,r=_objectWithoutPropertiesLoose(e,gC),s=t.style,o=_objectWithoutPropertiesLoose(t,pC);return!la(n,s)&&!la(r,o)}function vE(e,t){return!mC(this.props,e)||la(this.state,t)}var ua=p(74428),ca=p(34374),vC=p(51705),CC=p(18542),uu=p(35401),DC=p(54827),bC=p(66754),xC=p(16566),yC=p(22570),EC=p(91842),BC=p(20203),AC=p(15391),cu=p(22610),CE=p(26516),jC=p(51046),du=p(35554),zt=p(49079);const fu="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Zn(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let i=0;for(;(e[i]||r)===t[i];)i++;if(i>0)return t.slice(0,i)+Zn(e.slice(i),t.slice(i),n)}const s=e?n.indexOf(e[0]):0,o=t!=null?n.indexOf(t[0]):n.length;if(o-s>1){const i=Math.round(.5*(s+o));return n[i]}else return t&&t.length>1?t.slice(0,1):n[s]+Zn(e.slice(1),null,n)}function hu(e){if(e.length!==gu(e[0]))throw new Error("invalid integer part of order key: "+e)}function gu(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function ur(e){const t=gu(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function pu(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=ur(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function mu(e,t){hu(e);const[n,...r]=e.split("");let s=!0;for(let o=r.length-1;s&&o>=0;o--){const i=t.indexOf(r[o])+1;i===t.length?r[o]=t[0]:(r[o]=t[i],s=!1)}if(s){if(n==="Z")return"a"+t[0];if(n==="z")return null;const o=String.fromCharCode(n.charCodeAt(0)+1);return o>"a"?r.push(t[0]):r.pop(),o+r.join("")}else return n+r.join("")}function wC(e,t){hu(e);const[n,...r]=e.split("");let s=!0;for(let o=r.length-1;s&&o>=0;o--){const i=t.indexOf(r[o])-1;i===-1?r[o]=t.slice(-1):(r[o]=t[i],s=!1)}if(s){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const o=String.fromCharCode(n.charCodeAt(0)-1);return o<"Z"?r.push(t.slice(-1)):r.pop(),o+r.join("")}else return n+r.join("")}function zn(e,t,n=fu){if(e!=null&&pu(e,n),t!=null&&pu(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const c=ur(t),d=t.slice(c.length);if(c==="A"+n[0].repeat(26))return c+Zn("",d,n);if(c<t)return c;const h=wC(c,n);if(h==null)throw new Error("cannot decrement any more");return h}if(t==null){const c=ur(e),d=e.slice(c.length),h=mu(c,n);return h??c+Zn(d,null,n)}const r=ur(e),s=e.slice(r.length),o=ur(t),i=t.slice(o.length);if(r===o)return r+Zn(s,i,n);const l=mu(r,n);if(l==null)throw new Error("cannot increment any more");return l<t?l:r+Zn(s,null,n)}function cr(e,t,n,r=fu){if(n===0)return[];if(n===1)return[zn(e,t,r)];if(t==null){let i=zn(e,t,r);const l=[i];for(let c=0;c<n-1;c++)i=zn(i,t,r),l.push(i);return l}if(e==null){let i=zn(e,t,r);const l=[i];for(let c=0;c<n-1;c++)i=zn(e,i,r),l.push(i);return l.reverse(),l}const s=Math.floor(n/2),o=zn(e,t,r);return[...cr(e,o,s,r),o,...cr(o,t,n-s-1,r)]}var vu=p(25869),FC=p(83523),RC=p(28768),da=p(70865),TC=p(33797),MC=p(96022),OC=p(36684),Cu=p(76030),SC=p(51812),IC=p(46729),Du=p(61124),PC=p(80649);const bu=(0,g.createContext)(),It={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"},xu=(0,g.createContext)(),yu=e=>e["content-manager_editViewLayoutManager"].currentLayout,En=()=>{const e=(0,ze.useSelector)(yu),t=(0,g.useCallback)(n=>e?.components?.[n]??{},[e]);return{...e,getComponentLayout:t}},kC={error:null,isLoading:!0,layout:{},layouts:{}},LC=(e,t)=>(0,Mt.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const r=t.data.contentType.uid;n.layout=t.data,n.layouts[r]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const r=e.layout;n.layout={...r,contentType:{uid:r.contentType.uid,...t.newLayout.contentType}},n.layouts[r.contentType.uid]={...r,contentType:{uid:r.contentType.uid,...t.newLayout.contentType}};break}default:return n}}),Gr=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const r=Nt(e),s=r.splice(t,1);return r.splice(n,0,s[0]),r}return e},Eu=e=>{const{type:t}=e;return t==="relation"?!(e?.relationType??"").toLowerCase().includes("morph"):!["json","dynamiczone","richtext","password","blocks"].includes(t)&&!!t},dr=(e,t)=>Object.keys(e).reduce((n,r)=>{const s=le(e,[r],{}),{default:o,component:i,type:l,required:c,min:d,repeatable:h}=s;if(o!==void 0&&(n[r]=o),l==="component"){const m=t?.[i]?.attributes??{},v=dr(m,t);if(c===!0&&(n[r]=h===!0?[]:v),d&&h===!0&&c){n[r]=[];for(let C=0;C<d;C+=1)n[r].push(v)}}return l==="dynamiczone"&&c===!0&&(n[r]=[]),n},{}),Yr=({layouts:e,metadatas:t,...n})=>{const r=e.list.map(i=>i.name?i.name:i),s=Object.keys(t).reduce((i,l)=>{const c=le(t,[l],{});let d=c.edit;return d.mainField&&(d={...d,mainField:c.edit.mainField.name}),{...i,[l]:{edit:d,list:$o(c.list,["mainField"])}}},{}),o=e.edit.map(i=>i.map(({name:l,size:c})=>({name:l,size:c})));return{...n,layouts:{edit:o,list:r},metadatas:s}},$C=(e,t)=>e.map(n=>({...n,subject:t})),Bu=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,r)=>(n[r]=$C(t[r],e),n),{})},Au=e=>e.split(".").filter(t=>Ld(parseInt(t,10))),fa=e=>{if(e.length===0)return-1;const t=Math.max.apply(Math,e.map(n=>n.__temp_key__??0));return Number.isNaN(t)?-1:t},ju=(e,t,n)=>{const r=l=>t.find(c=>c.uid===l),s=Object.assign({},e),o=e[n].uid,i=r(o);return Se(s,[n],$d({},i,e[n])),Object.keys(e.components).forEach(l=>{const c=r(l);Se(s,["components",l],{...e.components[l],...c})}),s},wu=(e,t,n)=>{const r=(s,o)=>Object.keys(s).reduce((i,l)=>{const c=(0,M.getType)(o,l),d=le(s,l),h=(0,M.getOtherInfos)(o,[l,"component"]),m=(0,M.getOtherInfos)(o,[l,"repeatable"]);return c==="dynamiczone"?(i[l]=d.map(v=>r(v,n[v.__component])),i):c==="component"?(m?i[l]=d&&d.map(v=>r(v,n[h])):i[l]=d&&r(d,n[h]),i):(c!=="password"&&(i[l]=d),i)},{});return r(e,t)},Wn=({firstname:e,lastname:t,username:n,email:r},s)=>n||(e?s({id:"global.fullname",defaultMessage:"{firstname} {lastname}"},{firstname:e,lastname:t}).trim():r),Fu=(e,t)=>t.find(n=>n.uid===e),Ru=(e,t)=>{const n=NC(e,t),r=Tu(n.contentType,t),s=ZC(n.contentType,n.components);return Se(n,["contentType","layouts","edit"],r),Se(n,["contentType","layouts","list"],s),Object.keys(n.components).forEach(o=>{const i=Tu(n.components[o],t);Se(n,["components",o,"layouts","edit"],i)}),n},NC=(e,t)=>{const n=ju(Nt(e),t,"contentType"),{components:r,contentType:s}=n,o=i=>Object.keys(i.metadatas).reduce((l,c)=>{const d=le(i,["attributes",c],{});let h=i.metadatas[c];if(d.type==="relation"){const m=Fu(d.targetModel,t),v=h.edit.mainField,C={name:v,schema:le(m,["attributes",v])};h={list:{...h.list,mainField:C},edit:{...h.edit,mainField:C}}}return l[c]=h,l},{});return Se(n,["contentType","metadatas"],o(s)),Object.keys(r).forEach(i=>{const l=r[i],c=o(l);Se(n,["components",i,"metadatas"],c)}),n},Tu=(e,t)=>e.layouts.edit.reduce((n,r)=>{const s=r.map(o=>{const i=le(e,["attributes",o.name],{}),l={...o,fieldSchema:i,metadatas:le(e,["metadatas",o.name,"edit"],{})};if(i.type==="relation"){const d=Fu(i.targetModel,t).pluginOptions||{};Se(l,"targetModelPluginOptions",d),Se(l,"queryInfos",{shouldDisplayRelationLink:zC(e,o.name,t)})}return l});return n.push(s),n},[]),ZC=(e,t)=>e.layouts.list.reduce((r,s)=>{const o=le(e,["attributes",s],{}),i=le(e,["metadatas",s,"list"],{}),l=o.type;if(l==="relation")return r.push({key:`__${s}_key__`,name:s,fieldSchema:o,metadatas:i}),r;if(l==="component"){const c=t[o.component],d=c.settings.mainField,h=c.attributes[d];return r.push({key:`__${s}_key__`,name:s,fieldSchema:o,metadatas:{...i,mainField:{...h,name:d}}}),r}return r.push({key:`__${s}_key__`,name:s,fieldSchema:o,metadatas:i}),r},[]),zC=(e,t,n)=>{const r=le(e,["attributes",t,"targetModel"],"");return WC(n).includes(r)},WC=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),Mu=e=>{const[{error:t,isLoading:n,layout:r,layouts:s},o]=(0,g.useReducer)(LC,kC),i=(0,g.useMemo)(W.m,[]),{schemas:l}=(0,ze.useSelector)(v=>i(v),ze.shallowEqual),c=(0,g.useRef)(!0),{get:d}=(0,M.useFetchClient)(),h=(0,g.useCallback)(async(v,C)=>{if(s[v]){o({type:"SET_LAYOUT_FROM_STATE",uid:v});return}o({type:"GET_DATA"});try{const{data:{data:D}}=await d(`/content-manager/content-types/${v}/configuration`,{cancelToken:C.token});o({type:"GET_DATA_SUCCEEDED",data:Ru(D,l)})}catch(D){if(Tt.default.isCancel(D))return;c.current&&console.error(D),c.current&&o({type:"GET_DATA_ERROR",error:D})}},[s,l,d]);(0,g.useEffect)(()=>()=>{c.current=!1},[]),(0,g.useEffect)(()=>{const C=Tt.default.CancelToken.source();return h(e,C),()=>{C.cancel("Operation canceled by the user.")}},[e,h]);const m=(0,g.useCallback)(v=>{o({type:"UPDATE_LAYOUT",newLayout:Ru(v,l)})},[l]);return{error:t,isLoading:n,layout:r,updateLayout:m}},UC=e=>e["content-manager_app"].collectionTypeLinks,Ou=(e,t)=>Object.keys(e).reduce((n,r)=>{const s=e[r],o=le(t,[r],s);return No(s)?{...n,[r]:Ou(s,o)}:(n[r]=o,n)},{}),VC=(e,t,n)=>{const r=e.find(({to:h})=>h.includes(t));if(!r)return"/";const{to:s,search:o}=r,i=(0,Yt.parse)(o),l=(0,Yt.parse)(n.substring(1)),c=Ou(i,l);return`${s}?${(0,Yt.stringify)(c,{encode:!1})}`},Su=e=>{const[{rawQuery:t}]=(0,M.useQueryParams)(),n=(0,ze.useSelector)(UC);return VC(n,e,t)},Iu=()=>{const{search:e}=(0,Ye.TH)(),t=e?(0,Yt.parse)(e.substring(1)):{};return t.plugins?(0,Yt.stringify)({plugins:t.plugins},{encode:!1}):""},Pu=e=>{const t=(0,g.useRef)();return(0,g.useEffect)(()=>{t.current=e},[e]),t.current},HC=(e,t,n)=>({type:Ue.S,permissions:e,__meta__:{plugins:t,containerName:n}}),qC=()=>({type:Ue.g}),KC=e=>e["content-manager_rbacManager"].permissions,GC=e=>e.rbacProvider.collectionTypesRelatedPermissions,ku=(e,t,n="listView")=>{const r=(0,ze.useDispatch)(),s=(0,ze.useSelector)(GC),o=(0,ze.useSelector)(KC),i=s[t];(0,g.useEffect)(()=>i?(r(HC(i,e?e.plugins:null,n)),()=>{r(qC())}):()=>{},[i,r,e,n]);const l=o?.some(c=>c.subject!==t)??!0;return{isValid:o&&!l,permissions:o}},Lu=g.createContext();function ha({attributes:e,buttonData:t,children:n,goTo:r,layout:s,metadatas:o,moveItem:i,moveRow:l,onAddData:c,relationsLayout:d,removeField:h,selectedItemName:m,setEditFieldToSelect:v,...C}){return(0,a.jsx)(Lu.Provider,{value:{attributes:e,buttonData:t,goTo:r,layout:s,metadatas:o,moveItem:i,moveRow:l,onAddData:c,relationsLayout:d,removeField:h,selectedItemName:m,setEditFieldToSelect:v,...C},children:n})}ha.defaultProps={attributes:{},buttonData:[],goTo(){},layout:[],metadatas:{},moveItem(){},moveRow(){},onAddData(){},relationsLayout:[],removeField(){},selectedItemName:null,setEditFieldToSelect(){}},ha.propTypes={attributes:u.object,buttonData:u.array,children:u.node.isRequired,goTo:u.func,layout:u.array,metadatas:u.object,moveItem:u.func,moveRow:u.func,onAddData:u.func,relationsLayout:u.array,removeField:u.func,selectedItemName:u.string,setEditFieldToSelect:u.func};function Bn(){return g.useContext(Lu)}const YC=[{action:"plugin::content-type-builder.read",subject:null}],QC=()=>{const{trackUsage:e}=(0,M.useTracking)(),{formatMessage:t}=(0,Ee.Z)(),{slug:n,modifiedData:r,isContentTypeView:s}=Bn(),o=s?"content-types":"components",i=`/plugins/content-type-builder/${o==="content-types"?o:"component-categories"}`,l=le(r,"category",""),c=o==="content-types"?n:`${l}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:(0,a.jsx)(M.CheckPermissions,{permissions:YC,children:(0,a.jsx)(M.LinkButton,{to:`${i}/${c}`,onClick:d,size:"S",startIcon:(0,a.jsx)(Qt.Z,{}),variant:"secondary",children:t({id:(0,W.g)(`edit-settings-view.link-to-ctb.${o}`),defaultMessage:"Edit the content type"})})})},$u=({componentUid:e})=>{const{componentLayouts:t}=Bn(),{formatMessage:n}=(0,Ee.Z)(),r=le(t,[e],{}),s=le(r,["layouts","edit"],[]);return(0,a.jsxs)($.x,{padding:3,children:[s.map((o,i)=>(0,a.jsx)(_.r,{gap:4,children:o.map(l=>(0,a.jsx)(ee.P,{col:l.size,children:(0,a.jsx)($.x,{paddingTop:2,children:(0,a.jsx)(T.k,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200",children:(0,a.jsx)(L.Z,{textColor:"neutral800",children:l.name})})})},l.name))},i)),(0,a.jsx)($.x,{paddingTop:2,children:(0,a.jsx)(M.Link,{startIcon:(0,a.jsx)(vs.Z,{}),to:`/content-manager/components/${e}/configurations/edit`,children:n({id:(0,W.g)("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"})})})]})};$u.propTypes={componentUid:u.string.isRequired};const Nu={alien:Nd.Z,apps:Zd.Z,archive:zd.Z,arrowDown:Wd.Z,arrowLeft:Yn.Z,arrowRight:Ud.Z,arrowUp:Vd.Z,attachment:Hd.Z,bell:qd.Z,bold:Er.Z,book:Kd.Z,briefcase:Gd.Z,brush:Yd.Z,bulletList:ms.Z,calendar:Qd.Z,car:Jd.Z,cast:Xd.Z,chartBubble:_d.Z,chartCircle:ef.Z,chartPie:tf.Z,check:an.Z,clock:nf.Z,cloud:rf.Z,code:Br.Z,cog:vs.Z,collapse:Zo.Z,command:sf.Z,connector:af.Z,crop:of.Z,crown:lf.Z,cube:uf.Z,cup:cf.Z,cursor:df.Z,dashboard:ff.Z,database:hf.Z,discuss:gf.Z,doctor:pf.Z,earth:mf.Z,emotionHappy:vf.Z,emotionUnhappy:Cf.Z,envelop:Df.Z,exit:bf.Z,expand:zo.Z,eye:xf.Z,feather:yf.Z,file:Ef.Z,fileError:Bf.Z,filePdf:Af.Z,filter:Wo.Z,folder:jf.Z,gate:wf.Z,gift:Ff.Z,globe:Rf.Z,grid:Tf.Z,handHeart:Mf.Z,hashtag:Of.Z,headphone:Sf.Z,heart:If.Z,house:Pf.Z,information:kf.Z,italic:Ar.Z,key:Lf.Z,landscape:$f.Z,layer:Cs.Z,layout:Nf.Z,lightbulb:Zf.Z,link:Ds.Z,lock:zf.Z,magic:Wf.Z,manyToMany:Uf.Z,manyToOne:Vf.Z,manyWays:Hf.Z,medium:qf.Z,message:Kf.Z,microphone:Gf.Z,monitor:Yf.Z,moon:Qf.Z,music:Jf.Z,oneToMany:Xf.Z,oneToOne:_f.Z,oneWay:eh.Z,paint:th.Z,paintBrush:nh.Z,paperPlane:rh.Z,pencil:Qt.Z,phone:sh.Z,picture:bs.Z,pin:ah.Z,pinMap:oh.Z,plane:ih.Z,play:lh.Z,plus:Fn.Z,priceTag:uh.Z,puzzle:ch.Z,question:dh.Z,quote:xs.Z,refresh:ys.Z,repeat:fh.Z,restaurant:hh.Z,rocket:gh.Z,rotate:ph.Z,scissors:mh.Z,search:vh.Z,seed:Ch.Z,server:Dh.Z,shield:bh.Z,shirt:xh.Z,shoppingCart:yh.Z,slideshow:Eh.Z,stack:Bh.Z,star:Ah.Z,store:jh.Z,strikeThrough:Es.Z,sun:wh.Z,television:Fh.Z,thumbDown:Rh.Z,thumbUp:Th.Z,train:Mh.Z,twitter:Oh.Z,typhoon:Sh.Z,underline:jr.Z,user:Ih.Z,volumeMute:Ph.Z,volumeUp:kh.Z,walk:Lh.Z,wheelchair:$h.Z,write:Nh.Z};function fr({showBackground:e=!0,size:t="M",icon:n}){return(0,a.jsx)(T.k,{alignItems:"center",background:e?"neutral200":null,justifyContent:"center",size:t,showBackground:e,height:t==="S"?5:8,width:t==="S"?5:8,color:"neutral600",borderRadius:e?"50%":0,children:(0,a.jsx)(Ce.J,{as:Nu[n]||Nu.cube,height:t==="S"?3:5,width:t==="S"?3:5})})}fr.defaultProps={showBackground:!0,size:"M",icon:"Cube"},fr.propTypes={showBackground:u.bool,size:u.string,icon:u.string};const JC=(0,ae.default)(T.k)`
  text-decoration: none;

  &:focus,
  &:hover {
    ${({theme:e})=>`
      background-color: ${e.colors.primary100};
      border-color: ${e.colors.primary200};

      ${L.Z} {
          color: ${e.colors.primary600};
      }
    `}

    /* > ComponentIcon */
    > div:first-child {
      background: ${({theme:e})=>e.colors.primary200};
      color: ${({theme:e})=>e.colors.primary600};

      svg {
        path {
          fill: ${({theme:e})=>e.colors.primary600};
        }
      }
    }
  }
`,Zu=({components:e})=>{const{componentLayouts:t}=Bn();return(0,a.jsx)(T.k,{gap:2,overflow:"scroll hidden",padding:3,children:e.map(n=>(0,a.jsxs)(JC,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,padding:2,direction:"column",borderColor:"neutral200",as:Gn.Link,to:`/content-manager/components/${n}/configurations/edit`,children:[(0,a.jsx)(fr,{icon:t?.[n]?.info?.icon}),(0,a.jsx)($.x,{paddingTop:1,children:(0,a.jsx)(L.Z,{fontSize:1,textColor:"neutral600",fontWeight:"bold",children:t?.[n]?.info?.displayName??""})})]},n))})};Zu.propTypes={components:u.arrayOf(u.string).isRequired};const zu=(0,ae.default)(pe.h)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,ga=({attribute:e,onEditField:t,onDeleteField:n,children:r})=>{const{formatMessage:s}=(0,Ee.Z)();return(0,a.jsxs)($.x,{overflow:"hidden",width:"100%",children:[(0,a.jsxs)(T.k,{paddingLeft:3,alignItems:"center",justifyContent:"space-between",children:[(0,a.jsx)(L.Z,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0,children:r}),(0,a.jsxs)(T.k,{children:[(0,a.jsx)(zu,{label:s({id:(0,W.g)("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:r}),onClick:t,icon:(0,a.jsx)(Qt.Z,{}),noBorder:!0}),(0,a.jsx)(zu,{label:s({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:r}),"data-testid":"delete-field",onClick:n,icon:(0,a.jsx)(qt.Z,{}),noBorder:!0})]})]}),e?.type==="component"&&(0,a.jsx)($u,{componentUid:e.component}),e?.type==="dynamiczone"&&(0,a.jsx)(Zu,{components:e.components})]})};ga.defaultProps={attribute:void 0},ga.propTypes={attribute:u.shape({components:u.array,component:u.string,type:u.string}),onEditField:u.func.isRequired,onDeleteField:u.func.isRequired,children:u.string.isRequired};const XC=(0,ae.default)(T.k)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,_C=(0,ae.default)(on.Z)`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,eD=(0,ae.default)(T.k)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,tD=(0,ae.default)(T.k)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,pa=({attribute:e,children:t,index:n,lastIndex:r,moveItem:s,moveRow:o,name:i,onDeleteField:l,onEditField:c,rowIndex:d,size:h})=>{const[m,v]=(0,g.useState)(!1),C=i==="_TEMP_",{setIsDraggingSibling:D}=Bn(),f=h===12,y=(0,g.useRef)(null),x=(0,g.useRef)(null),[{clientOffset:B,isOver:A},S]=(0,yr.useDrop)({accept:It.EDIT_FIELD,hover(N,q){if(!x.current||N.size!==12)return;const V=q.getItem().index,re=n,J=q.getItem().rowIndex,oe=d;if(V===re&&J===oe)return;const ne=x.current.getBoundingClientRect(),ue=(ne.bottom-ne.top)/2,X=q.getClientOffset().y-ne.top;J<oe&&X<ue||J>oe&&X>ue||(o(J,oe),N.rowIndex=oe,N.itemIndex=re)},drop(N,q){if(!x.current)return;const V=q.getItem().index,re=n,J=q.getItem().rowIndex,oe=d;if(N.size===12||V===re&&J===oe)return;const ne=x.current.getBoundingClientRect();if(Math.abs(q.getClientOffset().x-ne.left)>ne.width/1.8){s(V,re+1,J,oe),N.itemIndex=re+1,N.rowIndex=oe;return}s(V,re,J,oe),N.itemIndex=re,N.rowIndex=oe},collect:N=>({canDrop:N.canDrop(),clientOffset:N.getClientOffset(),isOver:N.isOver(),isOverCurrent:N.isOver({shallow:!0}),itemType:N.getItemType()})}),[{isDragging:E,getItem:j},R,Z]=(0,yr.useDrag)({type:It.EDIT_FIELD,item(){return D(!0),{index:n,labelField:t,rowIndex:d,name:i,size:h}},canDrag(){return i!=="_TEMP_"},collect:N=>({isDragging:N.isDragging(),getItem:N.getItem()}),end(){D(!1)}});(0,g.useEffect)(()=>{Z((0,_n.rX)(),{captureDraggingState:!0})},[Z]);const F={dragRef:R(y),dropRef:S(x)};let P=!1,Q=!1;if(x.current&&B){const N=x.current.getBoundingClientRect();P=A&&j.size!==12&&Math.abs(B.x-N.left)<N.width/2,Q=A&&j.size!==12&&Math.abs(B.x-N.left)>N.width/2,i==="_TEMP_"&&(P=A&&j.size!==12,Q=!1)}const I=()=>e&&f?`${74/16}rem`:`${32/16}rem`,z=n===0&&!f,U=n===r&&!f,k=n!==0&&!f;return(0,a.jsx)(ee.P,{col:h,children:(0,a.jsxs)(XC,{ref:F.dropRef,showLeftCarret:P,showRightCarret:Q,isFirst:z,isLast:U,hasHorizontalPadding:k,onDrag:()=>{f&&!m&&v(!0)},onDragEnd:()=>{f&&v(!1)},children:[m&&f&&(0,a.jsx)($.x,{width:"100%",height:"2px",background:"primary600"}),(0,a.jsxs)(eD,{width:f&&m?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:I(),alignItems:"stretch",isDragging:E,dragStart:m,isFullSize:f,isHidden:C,children:[(0,a.jsx)(tD,{as:"span",type:"button",ref:F.dragRef,onClick:N=>N.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1,children:(0,a.jsx)(_C,{})}),!C&&(0,a.jsx)(ga,{attribute:e,onEditField:c,onDeleteField:l,children:t})]})]})})};pa.defaultProps={attribute:void 0},pa.propTypes={attribute:u.shape({components:u.array,component:u.string,type:u.string}),children:u.string.isRequired,index:u.number.isRequired,moveItem:u.func.isRequired,moveRow:u.func.isRequired,name:u.string.isRequired,onDeleteField:u.func.isRequired,onEditField:u.func.isRequired,rowIndex:u.number.isRequired,lastIndex:u.number.isRequired,size:u.number.isRequired};const Wu=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:r,index:s,lastIndex:o})=>{const{setEditFieldToSelect:i,attributes:l,modifiedData:c,moveRow:d,moveItem:h}=Bn(),m=le(l,[e.name],{}),v=le(c,["metadatas",e.name,"edit","label"],"");return(0,a.jsx)(pa,{onEditField:()=>i(e.name),onDeleteField:()=>t(n,s),attribute:m,index:s,lastIndex:o,rowIndex:r,name:e.name,size:e.size,moveRow:d,moveItem:h,children:v||e.name})};Wu.propTypes={index:u.number.isRequired,lastIndex:u.number.isRequired,onRemoveField:u.func.isRequired,rowId:u.number.isRequired,rowIndex:u.number.isRequired,rowItem:u.object.isRequired};const Uu=({row:e,onRemoveField:t,rowIndex:n})=>(0,a.jsx)(_.r,{children:e.rowContent.map((r,s)=>(0,a.jsx)(Wu,{rowItem:r,index:s,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1},r.name))});Uu.propTypes={onRemoveField:u.func.isRequired,row:u.object.isRequired,rowIndex:u.number.isRequired};const Vu=({editLayout:e,fields:t,onRemoveField:n,onAddField:r})=>{const{formatMessage:s}=(0,Ee.Z)();return(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:4,children:[(0,a.jsxs)(T.k,{justifyContent:"space-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)($.x,{children:(0,a.jsx)(L.Z,{fontWeight:"bold",children:s({id:(0,W.g)("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"})})}),(0,a.jsx)($.x,{children:(0,a.jsx)(L.Z,{variant:"pi",textColor:"neutral600",children:s({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})})})]}),(0,a.jsx)(QC,{})]}),(0,a.jsx)($.x,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300",children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[e.map((o,i)=>(0,a.jsx)(Uu,{row:o,rowIndex:i,onRemoveField:n},o.rowId)),(0,a.jsxs)(_e.fC,{children:[(0,a.jsx)(_e.xz,{startIcon:(0,a.jsx)(Fn.Z,{}),endIcon:null,disabled:t.length===0,fullWidth:!0,variant:"secondary",children:s({id:(0,W.g)("containers.SettingPage.add.field"),defaultMessage:"Insert another field"})}),(0,a.jsx)(_e.VY,{children:t.map(o=>(0,a.jsx)(_e.ck,{onSelect:()=>r(o),children:o},o))})]})]})})]})};Vu.propTypes={editLayout:u.array.isRequired,fields:u.array.isRequired,onAddField:u.func.isRequired,onRemoveField:u.func.isRequired};const Hu={biginteger:(0,a.jsx)(Qn.Z,{}),boolean:(0,a.jsx)(Zh.Z,{}),date:(0,a.jsx)(wr.Z,{}),datetime:(0,a.jsx)(wr.Z,{}),decimal:(0,a.jsx)(Qn.Z,{}),email:(0,a.jsx)(zh.Z,{}),enum:(0,a.jsx)(Uo.Z,{}),enumeration:(0,a.jsx)(Uo.Z,{}),file:(0,a.jsx)(Bs.Z,{}),files:(0,a.jsx)(Bs.Z,{}),float:(0,a.jsx)(Qn.Z,{}),integer:(0,a.jsx)(Qn.Z,{}),media:(0,a.jsx)(Bs.Z,{}),number:(0,a.jsx)(Qn.Z,{}),relation:(0,a.jsx)(Wh.Z,{}),string:(0,a.jsx)(As.Z,{}),text:(0,a.jsx)(As.Z,{}),richtext:(0,a.jsx)(As.Z,{}),time:(0,a.jsx)(wr.Z,{}),timestamp:(0,a.jsx)(wr.Z,{}),json:(0,a.jsx)(Uh.Z,{}),uid:(0,a.jsx)(Vh.Z,{}),component:(0,a.jsx)(Hh.Z,{}),dynamiczone:(0,a.jsx)(qh.Z,{})},Qr=({type:e,customFieldUid:t})=>{const n=(0,M.useCustomFields)();let r=Hu[e];if(t){const o=n.get(t).icon;o&&(r=(0,a.jsx)($.x,{marginRight:3,width:7,height:6,children:(0,a.jsx)(o,{})}))}return Hu[e]?r:null};Qr.defaultProps={customFieldUid:null},Qr.propTypes={type:u.string.isRequired,customFieldUid:u.string};const nD=e=>e.reduce((t,n)=>{const r=n?.attributes??{},s=Object.keys(r).filter(o=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext","blocks"].includes(r?.[o]?.type??""));return t[n.uid]=s,t},{}),qu=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=e==="mainField"?(0,W.g)("containers.SettingPage.editSettings.entry.title"):(0,W.g)(`form.Input.${e}`);return{type:t,label:{id:n}}},ma=({type:e,options:t,onChange:n,value:r,name:s,...o})=>{const{formatMessage:i}=(0,Ee.Z)();switch(e){case"text":return(0,a.jsx)(Te.o,{onChange:n,value:r,name:s,...o});case"bool":return(0,a.jsx)(Pe.s,{onChange:l=>{n({target:{name:s,value:l.target.checked}})},checked:r,name:s,onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),...o});case"select":return(0,a.jsx)(be.P,{value:r,name:s,onChange:l=>n({target:{name:s,value:l}}),...o,children:t.map(l=>(0,a.jsx)(de.W,{value:l,children:l},l))});default:return null}};ma.defaultProps={options:void 0},ma.propTypes={type:u.string.isRequired,options:u.arrayOf(u.string),onChange:u.func.isRequired,value:u.oneOfType([u.string,u.bool]).isRequired,name:u.string.isRequired};const rD=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],Ku=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,Ee.Z)(),{modifiedData:r,selectedField:s,attributes:o,fieldForm:i}=Bn(),l=(0,g.useMemo)(W.m,[]),{schemas:c}=(0,ze.useSelector)(x=>l(x),ze.shallowEqual),d=(0,ze.useSelector)(W.s),h=(0,g.useMemo)(()=>{if(!s)return[];const x=le(r,["metadatas",s,"edit"],{});return Object.keys(x).filter(B=>B!=="visible")},[s,r]),m=(0,g.useMemo)(()=>nD(c),[c]),v=(0,g.useCallback)(x=>{if(x!=="relation"&&x!=="component")return[];const A=le(r,["attributes",s,x==="component"?"component":"targetModel"],"");return le(m,[A],[])},[s,m,r]),C=h.map(x=>{const B=le(o,[s,"type"]);return["component","dynamiczone"].includes(B)&&!["label","description"].includes(x)||B==="component"&&x!=="label"||["media","json","boolean"].includes(B)&&x==="placeholder"||x==="step"?null:(0,a.jsx)(ee.P,{col:6,children:(0,a.jsx)(ma,{type:qu(x).type,hint:x==="mainField"?n({id:(0,W.g)("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:le(qu(x),"label.id","app.utils.defaultMessage")}),name:x,onChange:e,value:le(i,["metadata",x],""),options:v(B)})},x)}),{type:D,customField:f}=o[s],{isResizable:y}=d[f]??d[D];return(0,a.jsxs)(a.Fragment,{children:[C,y&&(0,a.jsx)(ee.P,{col:6,children:(0,a.jsx)(be.P,{value:i?.size,name:"size",onChange:x=>{t({name:s,value:x})},label:n({id:(0,W.g)("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"}),children:rD.map(([x,B])=>(0,a.jsx)(de.W,{value:x,children:B},x))})},"size")]})};Ku.propTypes={onMetaChange:u.func.isRequired,onSizeChange:u.func.isRequired};const sD=(0,ae.default)(T.k)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,va=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:r,type:s,customFieldUid:o})=>{const{selectedField:i}=Bn(),{formatMessage:l}=(0,Ee.Z)(),c=()=>s==="timestamp"?"date":["decimal","float","integer","biginter"].includes(s)?"number":s;return(0,a.jsx)(xe.P,{onClose:e,labelledBy:"title",children:(0,a.jsxs)("form",{onSubmit:r,children:[(0,a.jsx)(me.x,{children:(0,a.jsxs)(sD,{children:[(0,a.jsx)(Qr,{type:c(),customFieldUid:o}),(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:l({id:(0,W.g)("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Xn(i)})})]})}),(0,a.jsx)(ye.f,{children:(0,a.jsx)(_.r,{gap:4,children:(0,a.jsx)(Ku,{onMetaChange:t,onSizeChange:n})})}),(0,a.jsx)(we.m,{startActions:(0,a.jsx)(De.z,{onClick:e,variant:"tertiary",children:l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,a.jsx)(De.z,{type:"submit",children:l({id:"global.finish",defaultMessage:"Finish"})})})]})})};va.defaultProps={customFieldUid:null},va.propTypes={customFieldUid:u.string,onSubmit:u.func.isRequired,onToggle:u.func.isRequired,onMetaChange:u.func.isRequired,onSizeChange:u.func.isRequired,type:u.string.isRequired};const Ca=e=>e.reduce((t,n)=>t+n.size,0),aD=e=>e.reduce((t,n,r)=>{const s={rowId:r,rowContent:n};return t.concat(s)},[]),Un=e=>e.reduce((t,n)=>{let r=[];const s=n.rowContent.reduce((l,c)=>{const d=Ca(l);return c.name==="_TEMP_"||(d+c.size<=12?l.push(c):r.push(c)),l},[]),o=t.length===0?0:Math.max.apply(Math,t.map(l=>l.rowId))+1,i=Ca(s);if(i<12&&s.push({name:"_TEMP_",size:12-i}),t.push({rowId:o,rowContent:s}),r.length>0){const l=Ca(r);l<12&&r.push({name:"_TEMP_",size:12-l}),t.push({rowId:o+1,rowContent:r}),r=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),oD=e=>e.reduce((t,n)=>{const r=n.rowContent.filter(s=>s.name!=="_TEMP_");return t.concat([r])},[]),iD=(e,t=[])=>t.reduce((n,{rowContent:r})=>{const s=r.find(o=>o.name===e)?.size??null;return s&&(n=s),n},null),lD=(e,t,n=[])=>n.map(r=>(r.rowContent=r.rowContent.map(s=>s.name===e?{...s,size:t}:s),r)),uD=(e,t,n)=>{let r=Nt(t);return Se(r,["layouts","edit"],Un(aD(t.layouts.edit))),{...e,initialData:r,modifiedData:r,componentLayouts:n}},Gu=6,Da={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},cD=(e=Da,t)=>(0,Mt.default)(e,n=>{const r=["modifiedData","layouts","edit"];switch(t.type){case"MOVE_ROW":{const s=le(e,r,[]),{fromIndex:o,toIndex:i}=t;Se(n,r,Gr(s,o,i));break}case"ON_ADD_FIELD":{const s=Nt(e),o=le(s,["modifiedData","attributes",t.name],{}),i=t.fieldSizes[o?.customField]?.default??t.fieldSizes[o?.type]?.default??Gu,l=le(s,r,[]).length,c=[...r,l-1,"rowContent"],d=le(s,c,[]);let h=le(s,r,[]);Array.isArray(d)?Se(h,[l>0?l-1:0,"rowContent"],[...d,{name:t.name,size:i}]):Se(h,[l>0?l-1:0,"rowContent"],[{name:t.name,size:i}]);const m=Un(h);Se(n,r,m);break}case"ON_CHANGE":{Se(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{Se(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{Se(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const s=le(e,[...r,t.rowIndex,"rowContent"],[]);let o=Nt(e);if(s.length===1||s.length===2&&le(s,[1,"name"],"")==="_TEMP_"){const l=le(e,r,[]);Se(o,r,l.filter((c,d)=>t.rowIndex!==d))}else Se(o,[...r,t.rowIndex,"rowContent"],s.filter((l,c)=>c!==t.fieldIndex));const i=Un(le(o,r,[]));Se(n,r,i);break}case"REORDER_DIFF_ROW":{const s=le(e,[...r,t.dragRowIndex,"rowContent"],[]),o=le(e,[...r,t.hoverRowIndex,"rowContent"],[]),i=le(e,[...r,t.dragRowIndex,"rowContent",t.dragIndex],{}),l=[...o,i];let c=Nt(e);Se(c,[...r,t.dragRowIndex,"rowContent"],s.filter((h,m)=>t.dragIndex!==m)),Se(c,[...r,t.hoverRowIndex,"rowContent"],Gr(l,l.length-1,t.hoverIndex));const d=Un(le(c,r,[]));Se(n,r,d);break}case"REORDER_ROW":{const s=Nt(e),o=le(s,[...r,t.dragRowIndex,"rowContent"],[]);Se(s,[...r,t.dragRowIndex,"rowContent"],Gr(o,t.dragIndex,t.hoverIndex));const i=Un(le(s,r,[]));Se(n,r,i);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:le(e,["modifiedData","metadatas",t.name,"edit"],{}),size:iD(t.name,e.modifiedData?.layouts?.edit)??Gu};break}case"SUBMIT_META_FORM":{Se(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const s=Nt(le(e,r,[])),o=lD(e.metaToEdit,e.metaForm.size,s);o.length>0&&Se(n,r,Un(o));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}}),hr=({mainLayout:e,components:t,isContentTypeView:n,slug:r,updateLayout:s})=>{const[o,i]=(0,g.useReducer)(cD,Da,()=>uD(Da,e,t)),[l,c]=(0,g.useState)(!1),{trackUsage:d}=(0,M.useTracking)(),h=(0,M.useNotification)(),{goBack:m}=(0,Ye.k6)(),[v,C]=(0,g.useState)(!1),[D,f]=(0,g.useState)(!1),{componentLayouts:y,initialData:x,modifiedData:B,metaToEdit:A,metaForm:S}=o,{formatMessage:E}=(0,Ee.Z)(),j=e.info.displayName,R=B?.attributes??{},Z=(0,ze.useSelector)(W.s),{put:F}=(0,M.useFetchClient)(),P=Object.keys(R).filter(H=>{const ie=R?.[H]?.type??"";return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp","blocks"].includes(ie)&&!!ie}),Q=B.layouts.edit,I=Q.flatMap(H=>H.rowContent),z=Object.keys(B.attributes).filter(H=>(B?.metadatas?.[H]?.edit?.visible??!1)===!0).filter(H=>I.findIndex(ie=>ie.name===H)===-1).sort(),U=({target:{name:H,value:ie}})=>{i({type:"ON_CHANGE",keys:H.split("."),value:ie})},k=()=>{C(H=>!H)},N=()=>{f(H=>!H)},q=({target:{name:H,value:ie}})=>{i({type:"ON_CHANGE_META",keys:H.split("."),value:ie})},V=({name:H,value:ie})=>{i({type:"ON_CHANGE_SIZE",name:H,value:ie})},re=H=>{H.preventDefault(),i({type:"SUBMIT_META_FORM"}),k()},J=H=>{H.preventDefault(),N()},oe=(0,Bt.useMutation)(H=>F(n?`/content-manager/content-types/${r}/configuration`:`/content-manager/components/${r}/configuration`,H),{onSuccess({data:H}){s&&s(H.data),i({type:"SUBMIT_SUCCEEDED"}),N(),d("didEditEditSettings")},onError(){h({type:"warning",message:{id:"notification.error"}})}}),{isLoading:ne}=oe,ue=()=>{const{layouts:H,metadatas:ie,settings:Ae}=Nt(B);oe.mutate({layouts:{...H,edit:oD(H.edit)},metadatas:ie,settings:Ae})},w=(H,ie)=>{i({type:"MOVE_RELATION",fromIndex:H,toIndex:ie})},X=(H,ie)=>{i({type:"MOVE_FIELD",fromIndex:H,toIndex:ie})},Y=(H,ie,Ae,Me)=>{i(Ae===Me?{type:"REORDER_ROW",dragRowIndex:Ae,dragIndex:H,hoverIndex:ie}:{type:"REORDER_DIFF_ROW",dragIndex:H,hoverIndex:ie,dragRowIndex:Ae,hoverRowIndex:Me})},se=(H,ie)=>{i({type:"MOVE_ROW",fromIndex:H,toIndex:ie})};return(0,a.jsx)(ha,{isContentTypeView:n,attributes:R,modifiedData:B,slug:r,componentLayouts:y,selectedField:A,fieldForm:S,onMoveRelation:w,onMoveField:X,moveRow:se,moveItem:Y,setEditFieldToSelect:H=>{i({type:"SET_FIELD_TO_EDIT",name:H}),k()},isDraggingSibling:l,setIsDraggingSibling:c,children:(0,a.jsxs)(Oe.o,{children:[(0,a.jsxs)("form",{onSubmit:J,children:[(0,a.jsx)(Ze.T,{title:E({id:(0,W.g)("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${Xn(j)}`},{name:Xn(j)}),subtitle:E({id:(0,W.g)("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:(0,a.jsx)(M.Link,{startIcon:(0,a.jsx)(Yn.Z,{}),onClick:H=>{H.preventDefault(),m()},to:"/",children:E({id:"global.back",defaultMessage:"Back"})}),primaryAction:(0,a.jsx)(De.z,{disabled:Ot(x,B),startIcon:(0,a.jsx)(an.Z,{}),type:"submit",children:E({id:"global.save",defaultMessage:"Save"})})}),(0,a.jsx)(Ge.D,{children:(0,a.jsx)($.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:4,children:[(0,a.jsx)(L.Z,{variant:"delta",as:"h2",children:E({id:(0,W.g)("containers.SettingPage.settings"),defaultMessage:"Settings"})}),(0,a.jsx)(_.r,{children:(0,a.jsx)(ee.P,{col:6,s:12,children:(0,a.jsx)(be.P,{label:E({id:(0,W.g)("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:E({id:(0,W.g)("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:H=>{U({target:{name:"settings.mainField",value:H===""?null:H}})},value:B.settings.mainField,children:P.map(H=>(0,a.jsx)(de.W,{value:H,children:H},H))})})}),(0,a.jsx)($.x,{paddingTop:2,paddingBottom:2,children:(0,a.jsx)(lt.i,{})}),(0,a.jsx)(L.Z,{variant:"delta",as:"h3",children:E({id:(0,W.g)("containers.SettingPage.view"),defaultMessage:"View"})}),(0,a.jsx)(Vu,{attributes:R,editLayout:Q,fields:z,onAddField:H=>{i({type:"ON_ADD_FIELD",name:H,fieldSizes:Z})},onRemoveField:(H,ie)=>{i({type:"REMOVE_FIELD",rowIndex:H,fieldIndex:ie})}})]})})}),(0,a.jsx)(M.ConfirmDialog,{bodyText:{id:(0,W.g)("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:(0,a.jsx)(an.Z,{}),isConfirmButtonLoading:ne,isOpen:D,onToggleDialog:N,onConfirm:ue,variantRightButton:"success-light"})]}),v&&(0,a.jsx)(va,{onSubmit:re,onToggle:k,onMetaChange:q,onSizeChange:V,type:R?.[A]?.type??"",customFieldUid:R?.[A]?.customField??""})]})})};hr.defaultProps={isContentTypeView:!1,updateLayout:null},hr.propTypes={components:u.object.isRequired,isContentTypeView:u.bool,mainLayout:u.shape({attributes:u.object.isRequired,info:u.object.isRequired,layouts:u.shape({list:u.array.isRequired,edit:u.array.isRequired}).isRequired,metadatas:u.object.isRequired,options:u.object.isRequired}).isRequired,slug:u.string.isRequired,updateLayout:u.func};const dD=()=>({type:Ue.h}),fD=(e,t)=>({type:Ue.i,layout:e,query:t}),Jr=()=>({type:Ue.G}),ba=e=>({type:Ue.n,data:e}),xa=(e,t=!1)=>({type:Ue.I,rawQuery:e,isSingleType:t}),Yu=()=>({type:Ue.j}),Qu=(e,t)=>({type:Ue.k,componentsDataStructure:e,contentTypeDataStructure:t}),Xe=e=>({type:Ue.l,status:e}),gn=e=>({type:Ue.m,data:e}),hD=()=>({type:Ue.o}),ya=e=>e["content-manager_editViewCrudReducer"],Ea=({allLayoutData:e,children:t,slug:n,id:r,origin:s})=>{const o=(0,Bt.useQueryClient)(),i=(0,M.useNotification)(),{setCurrentStep:l}=(0,M.useGuidedTour)(),{trackUsage:c}=(0,M.useTracking)(),{push:d,replace:h}=(0,Ye.k6)(),[{query:m,rawQuery:v}]=(0,M.useQueryParams)(),C=(0,ze.useDispatch)(),{componentsDataStructure:D,contentTypeDataStructure:f,data:y,isLoading:x,status:B}=(0,ze.useSelector)(ya),A=Su(n),{formatAPIError:S}=(0,M.useAPIErrorHandler)(W.g),E=(0,g.useRef)(!0),j=(0,g.useRef)(c),R=(0,g.useRef)(e),Z=(0,M.useFetchClient)(),{put:F,post:P,del:Q}=Z,I=r===null,z=I&&!s?null:`/content-manager/collection-types/${n}/${s||r}`,U=(0,g.useCallback)(ne=>{const ue=wu(ne,R.current.contentType,R.current.components);return(0,M.formatContentTypeData)(ue,R.current.contentType,R.current.components)},[]);(0,g.useEffect)(()=>{const ne=Object.keys(e.components).reduce((X,Y)=>{const se=dr(le(e,["components",Y,"attributes"],{}),e.components);return X[Y]=(0,M.formatContentTypeData)(se,e.components[Y],e.components),X},{}),ue=dr(e.contentType.attributes,e.components),w=(0,M.formatContentTypeData)(ue,e.contentType,e.components);C(Qu(ne,w))},[e,C]),(0,g.useEffect)(()=>()=>{C(Yu())},[C]),(0,g.useEffect)(()=>{const ue=Tt.default.CancelToken.source(),w=async Y=>{C(Jr());try{const{data:se}=await Z.get(z,{cancelToken:Y.token});C(ba(U(se)))}catch(se){if(Tt.default.isCancel(se))return;const H=le(se,"response.status",null);if(H===404){d(A);return}H===403&&(i({type:"info",message:{id:(0,W.g)("permissions.not-allowed.update")}}),d(A))}},X=async()=>{C(Jr()),C(xa(v))};return E.current?(z?w(ue):X(),()=>{ue.cancel("Operation canceled by the user.")}):()=>{}},[Z,U,d,z,C,v,A,i]);const k=(0,g.useCallback)(ne=>{i({type:"warning",message:S(ne)})},[i,S]),N=(0,g.useCallback)(async ne=>{try{j.current("willDeleteEntry",ne);const{data:ue}=await Q(`/content-manager/collection-types/${n}/${r}`);return i({type:"success",message:{id:(0,W.g)("success.record.delete")}}),j.current("didDeleteEntry",ne),h(A),Promise.resolve(ue)}catch(ue){return j.current("didNotDeleteEntry",{error:ue,...ne}),Promise.reject(ue)}},[r,n,i,Q,A,h]),q=(0,g.useCallback)(async(ne,ue)=>{const w=typeof s=="string",X=w?`/content-manager/collection-types/${n}/clone/${s}`:`/content-manager/collection-types/${n}`;try{C(Xe("submit-pending"));const{id:Y,...se}=ne,{data:H}=await P(X,w?se:ne,{params:m});return j.current("didCreateEntry",ue),i({type:"success",message:{id:(0,W.g)("success.record.save")}}),l("contentManager.success"),o.invalidateQueries(["relation"]),C(gn(U(H))),C(Xe("resolved")),h(`/content-manager/collectionType/${n}/${H.id}${v}`),Promise.resolve(H)}catch(Y){return k(Y),j.current("didNotCreateEntry",{error:Y,trackerProperty:ue}),C(Xe("resolved")),Promise.reject(Y)}},[s,U,k,h,n,C,m,i,l,o,P,v]),V=(0,g.useCallback)(async()=>{try{j.current("willCheckDraftRelations");const ne=`/content-manager/collection-types/${n}/${r}/actions/countDraftRelations`;C(Xe("draft-relation-check-pending"));const ue=await Z.get(ne);return j.current("didCheckDraftRelations"),C(Xe("resolved")),ue.data.data}catch(ne){return k(ne),C(Xe("resolved")),Promise.reject(ne)}},[k,r,n,C,Z]),re=(0,g.useCallback)(async()=>{try{j.current("willPublishEntry");const ne=`/content-manager/collection-types/${n}/${r}/actions/publish`;C(Xe("publish-pending"));const{data:ue}=await P(ne);return j.current("didPublishEntry"),C(gn(U(ue))),C(Xe("resolved")),i({type:"success",message:{id:(0,W.g)("success.record.publish")}}),Promise.resolve(ue)}catch(ne){return k(ne),C(Xe("resolved")),Promise.reject(ne)}},[U,k,r,n,C,i,P]),J=(0,g.useCallback)(async(ne,ue)=>{const w=`/content-manager/collection-types/${n}/${r}`;try{j.current("willEditEntry",ue),C(Xe("submit-pending"));const{data:X}=await F(w,ne);return j.current("didEditEntry",{trackerProperty:ue}),i({type:"success",message:{id:(0,W.g)("success.record.save")}}),o.invalidateQueries(["relation"]),C(gn(U(X))),C(Xe("resolved")),Promise.resolve(X)}catch(X){return j.current("didNotEditEntry",{error:X,trackerProperty:ue}),k(X),C(Xe("resolved")),Promise.reject(X)}},[U,k,n,r,C,i,o,F]),oe=(0,g.useCallback)(async()=>{const ne=`/content-manager/collection-types/${n}/${r}/actions/unpublish`;C(Xe("unpublish-pending"));try{j.current("willUnpublishEntry");const{data:ue}=await P(ne);return j.current("didUnpublishEntry"),i({type:"success",message:{id:(0,W.g)("success.record.unpublish")}}),C(gn(U(ue))),C(Xe("resolved")),Promise.resolve(ue)}catch(ue){return C(Xe("resolved")),k(ue),Promise.reject(ue)}},[U,k,r,n,C,i,P]);return t({componentsDataStructure:D,contentTypeDataStructure:f,data:y,isCreatingEntry:I,isLoadingForData:x,onDelete:N,onPost:q,onPublish:re,onDraftRelationCheck:V,onPut:J,onUnpublish:oe,status:B,redirectionLink:A})};Ea.defaultProps={id:null,origin:null},Ea.propTypes={allLayoutData:u.exact({components:u.object.isRequired,contentType:u.shape({apiID:u.string.isRequired,attributes:u.object.isRequired,info:u.object.isRequired,isDisplayed:u.bool.isRequired,kind:u.string.isRequired,layouts:u.object.isRequired,metadatas:u.object.isRequired,options:u.object.isRequired,pluginOptions:u.object,settings:u.object.isRequired,uid:u.string.isRequired}).isRequired}).isRequired,children:u.func.isRequired,id:u.string,origin:u.string,slug:u.string.isRequired};const gD=(0,g.memo)(Ea,Ot),Ba=({hasError:e,isDisabled:t,isOpen:n,children:r,onClick:s})=>(0,a.jsx)(pD,{type:"button",onClick:s,disabled:t,hasError:e,background:"neutral0",paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4,style:{cursor:t?"not-allowed":"pointer"},children:(0,a.jsxs)(T.k,{as:"span",gap:2,children:[(0,a.jsx)(Aa,{"aria-hidden":!0,$isOpen:n,$hasError:e&&!n}),(0,a.jsx)(L.Z,{variant:"pi",fontWeight:"bold",textColor:e&&!n?"danger600":"neutral500",children:r})]})}),Aa=(0,ae.default)(Vo.Z)`
  height: ${({theme:e})=>e.spaces[6]};
  width: ${({theme:e})=>e.spaces[6]};
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,pD=(0,ae.default)(wt.Y)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  &:hover {
    ${L.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${Aa} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${L.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${Aa} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`;Ba.defaultProps={hasError:!1,isDisabled:!1,isOpen:!1},Ba.propTypes={children:u.node.isRequired,hasError:u.bool,isDisabled:u.bool,isOpen:u.bool,onClick:u.func.isRequired};const ja=({category:e,components:t,variant:n,isOpen:r,onAddComponent:s,onToggle:o})=>{const{formatMessage:i}=(0,Ee.Z)(),l=()=>{o(e)};return(0,a.jsxs)(mt.U,{expanded:r,onToggle:l,size:"S",children:[(0,a.jsx)(ut.B,{variant:n,title:i({id:e,defaultMessage:e}),togglePosition:"left"}),(0,a.jsx)(vt.v,{children:(0,a.jsx)($.x,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3,children:(0,a.jsx)(mD,{children:t.map(({componentUid:c,info:{displayName:d,icon:h}})=>(0,a.jsx)(vD,{as:"button",type:"button",background:"neutral100",justifyContent:"center",onClick:s(c),hasRadius:!0,height:(0,M.pxToRem)(84),shrink:0,borderColor:"neutral200",children:(0,a.jsxs)(T.k,{direction:"column",gap:1,alignItems:"center",justifyContent:"center",children:[(0,a.jsx)(fr,{icon:h}),(0,a.jsx)(L.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral600",children:i({id:d,defaultMessage:d})})]})},c))})})})]})},mD=ae.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,vD=(0,ae.default)(T.k)`
  &:focus,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${L.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    /* > Flex > ComponentIcon */
    > div > div:first-child {
      background: ${({theme:e})=>e.colors.primary200};
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;ja.defaultProps={components:[],isOpen:!1,variant:"primary"},ja.propTypes={category:u.string.isRequired,components:u.array,isOpen:u.bool,onAddComponent:u.func.isRequired,onToggle:u.func.isRequired,variant:u.oneOf(["primary","secondary"])};const wa=({dynamicComponentsByCategory:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:r}=(0,Ee.Z)(),[s,o]=(0,g.useState)("");(0,g.useEffect)(()=>{const c=Object.keys(e);t&&c.length>0&&o(c[0])},[t,e]);const i=c=>()=>{n(c),o("")},l=c=>{o(d=>d===c?"":c)};return t?(0,a.jsxs)($.x,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0,children:[(0,a.jsx)(T.k,{justifyContent:"center",children:(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:"neutral600",children:r({id:(0,W.g)("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"})})}),(0,a.jsx)($.x,{paddingTop:2,children:(0,a.jsx)(Lt.k,{attributeName:"data-strapi-accordion-toggle",children:Object.entries(e).map(([c,d],h)=>(0,a.jsx)(ja,{category:c,components:d,onAddComponent:i,isOpen:c===s,onToggle:l,variant:h%2===1?"primary":"secondary"},c))})})]}):null};wa.defaultProps={dynamicComponentsByCategory:{},isOpen:!1},wa.propTypes={dynamicComponentsByCategory:u.shape({components:u.arrayOf(u.shape({componentUid:u.string.isRequired,info:u.object}))}),isOpen:u.bool,onClickAddComponent:u.func.isRequired};const CD=ae.default.span`
  > svg {
    width: ${(0,M.pxToRem)(24)};
    height: ${(0,M.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Xr=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:r}=(0,Ee.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.x,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button",children:(0,a.jsxs)(T.k,{direction:"column",gap:2,children:[(0,a.jsx)(T.k,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"},children:(0,a.jsx)(CD,{children:(0,a.jsx)(Vo.Z,{})})}),(0,a.jsx)(T.k,{justifyContent:"center",children:(0,a.jsx)(L.Z,{textColor:"primary600",variant:"pi",fontWeight:"bold",children:r({id:(0,W.g)("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."})})})]})}),e?.id&&(0,a.jsx)(L.Z,{textColor:"danger600",variant:"pi",children:r(e,{...e.values})})]})};Xr.defaultProps={error:void 0,isReadOnly:!1},Xr.propTypes={error:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}),isReadOnly:u.bool,onClick:u.func.isRequired};const gr=new Map,Fa=(e=[])=>{const[t,n]=(0,g.useState)(Object.fromEntries(gr)),r=e.filter(c=>!gr.get(c)),[s,o]=(0,g.useState)(()=>!!r.length),i=(0,M.useCustomFields)();(0,g.useEffect)(()=>{const c=h=>{n(h),o(!1)},d=async(h,m)=>{const v=await Promise.all(m);h.forEach((C,D)=>{gr.set(C,v[D].default)}),c(Object.fromEntries(gr))};if(r.length>0){o(!0);const h=r.reduce((m,v)=>{const C=i.get(v);return C&&m.push(C.components.Input()),m},[]);h.length>0&&d(r,h)}},[r,i]);const l=(0,g.useCallback)(()=>{gr.clear(),n({})},[]);return{isLazyLoading:s,lazyComponentStore:t,cleanup:l}},_r=({id:e,error:t,name:n,hint:r})=>r.length===0||t?null:(0,a.jsx)(L.Z,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600",children:r});_r.defaultProps={id:void 0,error:void 0,hint:""},_r.propTypes={hint:u.oneOfType([u.string,u.array]),error:u.string,id:u.string,name:u.string.isRequired};const Ra=(e,t="https://")=>["http://","https://","mailto:","tel:"].some(r=>e.startsWith(r))?e:`${t}${e}`,Ta=e=>{K.unwrapNodes(e,{match:t=>!b.isEditor(t)&&Be.isElement(t)&&t.type==="link"})},Ju=(e,{url:t})=>{if(e.selection)if(Array.from(b.nodes(e,{at:e.selection,match:r=>r.type==="link"})).forEach(([,r])=>{K.unwrapNodes(e,{at:r})}),G.isCollapsed(e.selection)){const r={type:"link",url:t?Ra(t):"",children:[{text:t}]};K.insertNodes(e,r)}else K.wrapNodes(e,{type:"link",url:t?Ra(t):""},{split:!0})},DD=(e,{url:t,text:n})=>{if(e.selection){const[r,s]=b.above(e,{match:o=>o.type==="link"});r&&(K.setNodes(e,{url:Ra(t)},{at:s}),n!==""&&n!==b.string(e,s)&&(Array.from(ge.children(e,s,{reverse:!0})).forEach(([,i])=>{K.removeNodes(e,{at:i})}),K.insertNodes(e,[{text:n}],{at:s.concat(0)})))}},Xu=(0,ae.default)(Vt.f)`
  text-decoration: none;
`,bD=(0,ae.default)(L.Z).attrs({as:"h1"})`
  font-size: ${42/16}rem;
  line-height: ${({theme:e})=>e.lineHeights[1]};
`,xD=(0,ae.default)(L.Z).attrs({as:"h2"})`
  font-size: ${35/16}rem;
  line-height: ${({theme:e})=>e.lineHeights[1]};
`,yD=(0,ae.default)(L.Z).attrs({as:"h3"})`
  font-size: ${29/16}rem;
  line-height: ${({theme:e})=>e.lineHeights[1]};
`,ED=(0,ae.default)(L.Z).attrs({as:"h4"})`
  font-size: ${24/16}rem;
  line-height: ${({theme:e})=>e.lineHeights[1]};
`,BD=(0,ae.default)(L.Z).attrs({as:"h5"})`
  font-size: ${20/16}rem;
  line-height: ${({theme:e})=>e.lineHeights[1]};
`,AD=(0,ae.default)(L.Z).attrs({as:"h6"})`
  font-size: 1rem;
  line-height: ${({theme:e})=>e.lineHeights[1]};
`,jD=ae.default.pre.attrs({role:"code"})`
  border-radius: ${({theme:e})=>e.borderRadius};
  background-color: ${({theme:e})=>e.colors.neutral100};
  max-width: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  flex-shrink: 0;
  & > code {
    font-family: 'SF Mono', SFMono-Regular, ui-monospace, 'DejaVu Sans Mono', Menlo, Consolas,
      monospace;
    color: ${({theme:e})=>e.colors.neutral800};
    overflow: auto;
    max-width: 100%;
  }
`,wD=ae.default.blockquote.attrs({role:"blockquote"})`
  margin: ${({theme:e})=>`${e.spaces[4]} 0`};
  font-weight: ${({theme:e})=>e.fontWeights.regular};
  border-left: ${({theme:e})=>`${e.spaces[1]} solid ${e.colors.neutral200}`};
  padding: ${({theme:e})=>e.spaces[2]} ${({theme:e})=>e.spaces[5]};
  color: ${({theme:e})=>e.colors.neutral600};
`,_u=(0,ae.css)`
  margin-block-start: ${({theme:e})=>e.spaces[4]};
  margin-block-end: ${({theme:e})=>e.spaces[4]};
  margin-inline-start: ${({theme:e})=>e.spaces[0]};
  margin-inline-end: ${({theme:e})=>e.spaces[0]};
  padding-inline-start: ${({theme:e})=>e.spaces[4]};

  ol,
  ul {
    margin-block-start: ${({theme:e})=>e.spaces[0]};
    margin-block-end: ${({theme:e})=>e.spaces[0]};
  }
`,FD=ae.default.ol`
  list-style-type: decimal;
  ${_u}
`,RD=ae.default.ul`
  list-style-type: disc;
  ${_u}
`,Ma=({attributes:e,children:t,element:n})=>n.format==="ordered"?(0,a.jsx)(FD,{...e,children:t}):(0,a.jsx)(RD,{...e,children:t});Ma.propTypes={attributes:u.object.isRequired,children:u.node.isRequired,element:u.shape({format:u.string.isRequired}).isRequired};const ec=(e,t)=>{K.removeNodes(e,{at:t}),t[0]===0&&(K.insertNodes(e,{type:"paragraph",children:[{type:"text",text:""}]},{at:t}),K.select(e,t))},tc=(e,t)=>{const[n,r]=b.parent(e,e.selection.anchor),[s,o]=b.parent(e,r),i=s.children.length===1&&n.children[0].text==="",l=b.isStart(e,e.selection.anchor,r),c=e.selection.focus.offset===0&&e.selection.focus.path.at(-1)===0;i?(t.preventDefault(),ec(e,o)):l?(K.liftNodes(e,{match:d=>d.type==="list-item"}),K.setNodes(e,{type:"paragraph"},{hanging:!0})):c&&(K.liftNodes(e,{match:d=>d.type==="list-item"}),K.setNodes(e,{type:"paragraph"}))},nc=e=>{const[t,n]=b.above(e,{matchNode:l=>l.type==="list-item"}),[r,s]=b.parent(e,n),o=r.children.length===1&&t.children[0].text==="",i=t.children.length===1&&t.children[0].text==="";if(o)ec(e,s);else if(i){K.removeNodes(e,{at:n});const l=b.above(e,{match:d=>d.type==="list"}),c=O.next(l[1]);K.insertNodes(e,{type:"paragraph",children:[{type:"text",text:""}]},{at:c}),K.select(e,c)}else b.isEnd(e,e.selection.anchor,n)?K.insertNodes(e,{type:"list-item",children:[{type:"text",text:""}]}):K.splitNodes(e)},TD=ae.default.img`
  max-height: calc(512px - 56px);
  max-width: 100%;
  object-fit: contain;
`,rc=({attributes:e,children:t,element:n})=>{if(!n.image)return null;const{url:r,alternativeText:s,width:o,height:i}=n.image;return(0,a.jsxs)($.x,{...e,children:[t,(0,a.jsx)(T.k,{background:"neutral100",contentEditable:!1,justifyContent:"center",children:(0,a.jsx)(TD,{src:r,alt:s,width:o,height:i})})]})};rc.propTypes={attributes:u.object.isRequired,children:u.node.isRequired,element:u.shape({image:u.shape({url:u.string.isRequired,alternativeText:u.string,width:u.number,height:u.number})}).isRequired};const sc=(0,ae.default)(Ct.u)`
  z-index: 6;
`,ac=(0,ae.default)(De.z)`
  & > span {
    line-height: normal;
  }
`,oc=g.forwardRef(({element:e,children:t,...n},r)=>{const{formatMessage:s}=(0,Ee.Z)(),o=Gt(),i=te.findPath(o,e),[l,c]=g.useState(o.lastInsertedLinkPath?O.equals(i,o.lastInsertedLinkPath):!1),[d,h]=g.useState(e.url===""),m=g.useRef(null),v=e.children.map(j=>j.text).join(""),[C,D]=g.useState(v),[f,y]=g.useState(e.url),x=j=>{j.preventDefault(),c(!0)},B=j=>{if(j.stopPropagation(),G.isCollapsed(o.selection)){const[,R]=b.parent(o,o.selection.focus?.path);K.select(o,R)}DD(o,{url:f,text:C}),h(!1)},A=()=>{h(!1),e.url===""&&Ta(o)},S=()=>{c(!1),e.url===""&&Ta(o),te.focus(o)},E=(0,W.c)(m,r);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Xu,{...n,ref:E,href:e.url,onClick:x,color:"primary600",children:t}),l&&(0,a.jsx)(tt.J2,{source:m,onDismiss:S,padding:4,contentEditable:!1,children:d?(0,a.jsxs)(T.k,{as:"form",onSubmit:B,direction:"column",gap:4,children:[(0,a.jsxs)(Dt.g,{width:"300px",children:[(0,a.jsx)(Ht.Q,{children:s({id:"components.Blocks.popover.text",defaultMessage:"Text"})}),(0,a.jsx)(rn._,{name:"text",placeholder:s({id:"components.Blocks.popover.text.placeholder",defaultMessage:"Enter link text"}),value:C,onChange:j=>D(j.target.value)})]}),(0,a.jsxs)(Dt.g,{width:"300px",children:[(0,a.jsx)(Ht.Q,{children:s({id:"components.Blocks.popover.link",defaultMessage:"Link"})}),(0,a.jsx)(rn._,{name:"url",placeholder:"https://strapi.io",value:f,onChange:j=>y(j.target.value)})]}),(0,a.jsxs)(T.k,{justifyContent:"end",width:"100%",gap:2,children:[(0,a.jsx)(De.z,{variant:"tertiary",onClick:A,children:s({id:"components.Blocks.popover.cancel",defaultMessage:"Cancel"})}),(0,a.jsx)(De.z,{type:"submit",disabled:!C||!f,children:s({id:"components.Blocks.popover.save",defaultMessage:"Save"})})]})]}):(0,a.jsxs)(T.k,{direction:"column",gap:4,alignItems:"start",width:"400px",children:[(0,a.jsx)(L.Z,{children:v}),(0,a.jsx)(L.Z,{children:(0,a.jsx)(Xu,{href:e.url,target:"_blank",color:"primary600",children:e.url})}),(0,a.jsxs)(T.k,{justifyContent:"end",width:"100%",gap:2,children:[(0,a.jsx)(sc,{description:s({id:"components.Blocks.popover.delete",defaultMessage:"Delete"}),children:(0,a.jsx)(ac,{size:"S",width:"2rem",variant:"danger-light",onClick:()=>Ta(o),"aria-label":s({id:"components.Blocks.popover.delete",defaultMessage:"Delete"}),type:"button",justifyContent:"center",children:(0,a.jsx)(Ce.J,{width:3,height:3,as:qt.Z})})}),(0,a.jsx)(sc,{description:s({id:"components.Blocks.popover.edit",defaultMessage:"Edit"}),children:(0,a.jsx)(ac,{size:"S",width:"2rem",variant:"tertiary",onClick:()=>h(!0),"aria-label":s({id:"components.Blocks.popover.edit",defaultMessage:"Edit"}),type:"button",justifyContent:"center",children:(0,a.jsx)(Ce.J,{width:3,height:3,as:Qt.Z})})})]})]})})]})});oc.propTypes={element:u.object.isRequired,children:u.node.isRequired};function Oa(){return{paragraph:{renderElement:e=>(0,a.jsx)(L.Z,{as:"p",variant:"omega",...e.attributes,children:e.children}),icon:Kh.Z,label:{id:"components.Blocks.blocks.text",defaultMessage:"Text"},value:{type:"paragraph"},matchNode:e=>e.type==="paragraph",isInBlocksSelector:!0,handleEnterKey(e){const t=e.selection.anchor.path;K.splitNodes(e,{always:!0});const[,n]=b.above(e,{match:i=>i.type!=="text"}),r=b.isEnd(e,e.selection.anchor,n),[s]=b.parent(e,e.selection.anchor.path);K.removeNodes(e,e.selection);const o=e.children.length-t[0]>1;K.insertNodes(e,{type:"paragraph",children:r?[{type:"text",text:""}]:s.children},{at:o?[t[0]+1]:[e.children.length]}),K.select(e,e.start([t[0]+1]))}},"heading-one":{renderElement:e=>(0,a.jsx)(bD,{...e.attributes,children:e.children}),icon:Gh.Z,label:{id:"components.Blocks.blocks.heading1",defaultMessage:"Heading 1"},value:{type:"heading",level:1},matchNode:e=>e.type==="heading"&&e.level===1,isInBlocksSelector:!0},"heading-two":{renderElement:e=>(0,a.jsx)(xD,{...e.attributes,children:e.children}),icon:Yh.Z,label:{id:"components.Blocks.blocks.heading2",defaultMessage:"Heading 2"},value:{type:"heading",level:2},matchNode:e=>e.type==="heading"&&e.level===2,isInBlocksSelector:!0},"heading-three":{renderElement:e=>(0,a.jsx)(yD,{...e.attributes,children:e.children}),icon:Qh.Z,label:{id:"components.Blocks.blocks.heading3",defaultMessage:"Heading 3"},value:{type:"heading",level:3},matchNode:e=>e.type==="heading"&&e.level===3,isInBlocksSelector:!0},"heading-four":{renderElement:e=>(0,a.jsx)(ED,{...e.attributes,children:e.children}),icon:Jh.Z,label:{id:"components.Blocks.blocks.heading4",defaultMessage:"Heading 4"},value:{type:"heading",level:4},matchNode:e=>e.type==="heading"&&e.level===4,isInBlocksSelector:!0},"heading-five":{renderElement:e=>(0,a.jsx)(BD,{...e.attributes,children:e.children}),icon:Xh.Z,label:{id:"components.Blocks.blocks.heading5",defaultMessage:"Heading 5"},value:{type:"heading",level:5},matchNode:e=>e.type==="heading"&&e.level===5,isInBlocksSelector:!0},"heading-six":{renderElement:e=>(0,a.jsx)(AD,{...e.attributes,children:e.children}),icon:_h.Z,label:{id:"components.Blocks.blocks.heading6",defaultMessage:"Heading 6"},value:{type:"heading",level:6},matchNode:e=>e.type==="heading"&&e.level===6,isInBlocksSelector:!0},"list-ordered":{renderElement:e=>(0,a.jsx)(Ma,{...e}),label:{id:"components.Blocks.blocks.orderedList",defaultMessage:"Numbered list"},value:{type:"list",format:"ordered"},icon:Ho.Z,matchNode:e=>e.type==="list"&&e.format==="ordered",isInBlocksSelector:!0,handleEnterKey:nc,handleBackspaceKey:tc},"list-unordered":{renderElement:e=>(0,a.jsx)(Ma,{...e}),label:{id:"components.Blocks.blocks.unorderedList",defaultMessage:"Bulleted list"},value:{type:"list",format:"unordered"},icon:ms.Z,matchNode:e=>e.type==="list"&&e.format==="unordered",isInBlocksSelector:!0,handleEnterKey:nc,handleBackspaceKey:tc},"list-item":{renderElement:e=>(0,a.jsx)(L.Z,{as:"li",...e.attributes,children:e.children}),value:{type:"list-item"},matchNode:e=>e.type==="list-item",isInBlocksSelector:!1},link:{renderElement:e=>(0,a.jsx)(oc,{element:e.element,...e.attributes,children:e.children}),value:{type:"link"},matchNode:e=>e.type==="link",isInBlocksSelector:!1},image:{renderElement:e=>(0,a.jsx)(rc,{...e}),icon:bs.Z,label:{id:"components.Blocks.blocks.image",defaultMessage:"Image"},value:{type:"image"},matchNode:e=>e.type==="image",isInBlocksSelector:!0},quote:{renderElement:e=>(0,a.jsx)(wD,{...e.attributes,children:e.children}),icon:xs.Z,label:{id:"components.Blocks.blocks.quote",defaultMessage:"Quote"},value:{type:"quote"},matchNode:e=>e.type==="quote",isInBlocksSelector:!0,handleEnterKey(e){const[t,n]=b.above(e,{match:o=>o.type==="quote"}),r=b.isEnd(e,e.selection.anchor,n),s=t.children.at(-1).text.endsWith(`
`);r&&s?(K.delete(e,{distance:1,unit:"character",reverse:!0}),K.insertNodes(e,{type:"paragraph",children:[{type:"text",text:""}]})):(K.insertText(e,`
`),r&&(b.removeMark(e,"bold"),b.removeMark(e,"italic")))}},code:{renderElement:e=>(0,a.jsx)(jD,{...e.attributes,children:(0,a.jsx)("code",{children:e.children})}),icon:Br.Z,label:{id:"components.Blocks.blocks.code",defaultMessage:"Code"},value:{type:"code"},matchNode:e=>e.type==="code",isInBlocksSelector:!0,handleEnterKey(e){K.insertText(e,`
`)}}}}const es=(0,ae.css)`
  font-size: inherit;
  color: inherit;
  line-height: inherit;
`,MD=(0,ae.default)(L.Z).attrs({fontWeight:"bold"})`
  ${es}
`,OD=(0,ae.default)(L.Z)`
  font-style: italic;
  ${es}
`,SD=(0,ae.default)(L.Z).attrs({textDecoration:"underline"})`
  ${es}
`,ID=(0,ae.default)(L.Z).attrs({textDecoration:"line-through"})`
  ${es}
`,PD=ae.default.code`
  background-color: ${({theme:e})=>e.colors.neutral150};
  border-radius: ${({theme:e})=>e.borderRadius};
  padding: ${({theme:e})=>`0 ${e.spaces[2]}`};
  font-family: 'SF Mono', SFMono-Regular, ui-monospace, 'DejaVu Sans Mono', Menlo, Consolas,
    monospace;
  color: inherit;
`;function ic(){const e=Gt(),t=b.marks(e),n=s=>t?Boolean(t[s]):!1,r=s=>{if(!e.selection){const o=b.end(e,[]);K.select(e,o)}t?.[s]?b.removeMark(e,s):b.addMark(e,s,!0)};return{bold:{icon:Er.Z,isValidEventKey:s=>s.key==="b",label:{id:"components.Blocks.modifiers.bold",defaultMessage:"Bold"},checkIsActive:()=>n("bold"),handleToggle:()=>r("bold"),renderLeaf:s=>(0,a.jsx)(MD,{children:s})},italic:{icon:Ar.Z,isValidEventKey:s=>s.key==="i",label:{id:"components.Blocks.modifiers.italic",defaultMessage:"Italic"},checkIsActive:()=>n("italic"),handleToggle:()=>r("italic"),renderLeaf:s=>(0,a.jsx)(OD,{children:s})},underline:{icon:jr.Z,isValidEventKey:s=>s.key==="u",label:{id:"components.Blocks.modifiers.underline",defaultMessage:"Underline"},checkIsActive:()=>n("underline"),handleToggle:()=>r("underline"),renderLeaf:s=>(0,a.jsx)(SD,{children:s})},strikethrough:{icon:Es.Z,isValidEventKey:s=>s.key==="S"&&s.shiftKey,label:{id:"components.Blocks.modifiers.strikethrough",defaultMessage:"Strikethrough"},checkIsActive:()=>n("strikethrough"),handleToggle:()=>r("strikethrough"),renderLeaf:s=>(0,a.jsx)(ID,{children:s})},code:{icon:Br.Z,isValidEventKey:s=>s.key==="e",label:{id:"components.Blocks.modifiers.code",defaultMessage:"Code"},checkIsActive:()=>n("code"),handleToggle:()=>r("code"),renderLeaf:s=>(0,a.jsx)(PD,{children:s})}}}const kD=e=>({outline:"none",display:"flex",flexDirection:"column",gap:e.spaces[2],height:"100%"}),LD=(e,t)=>{const n=Object.entries(t).reduce((r,s)=>{const[o,i]=s;return e.leaf[o]?i.renderLeaf(r):r},e.children);return(0,a.jsx)("span",{...e.attributes,children:n})},$D=(e,t)=>(Object.values(t).find(s=>s.matchNode(e.element))||t.paragraph).renderElement(e),Sa=({disabled:e,placeholder:t})=>{const n=(0,ae.useTheme)(),r=Gt(),s=g.useRef(),o=ic(),i=g.useCallback(D=>LD(D,o),[o]),l=Oa(),c=g.useCallback(D=>$D(D,l),[l]),d=()=>{const D=r.children[r.selection.anchor.path[0]],f=Object.values(l).find(y=>y.matchNode(D));f.handleEnterKey?f.handleEnterKey(r):l.paragraph.handleEnterKey(r)},h=D=>{const f=r.children[r.selection.anchor.path[0]],y=Object.values(l).find(x=>x.matchNode(f));y.handleBackspaceKey&&y.handleBackspaceKey(r,D)},m=D=>{(D.metaKey||D.ctrlKey)&&Object.values(o).forEach(y=>{y.isValidEventKey(D)&&y.handleToggle()})},v=D=>{D.key==="Enter"&&(D.preventDefault(),d()),D.key==="Backspace"&&h(D),m(D)},C=(D,f)=>{const y=f.getBoundingClientRect(),x=s.current,B=x.getBoundingClientRect();(y.top<B.top||y.bottom>B.bottom)&&x.scrollBy({top:28,behavior:"smooth"})};return(0,a.jsx)($.x,{ref:s,grow:1,width:"100%",overflow:"auto",fontSize:2,background:"neutral0",color:"neutral800",lineHeight:6,hasRadius:!0,paddingLeft:4,paddingRight:4,marginTop:3,marginBottom:3,children:(0,a.jsx)(vv,{readOnly:e,placeholder:t,style:kD(n),renderElement:c,renderLeaf:i,onKeyDown:v,scrollSelectionIntoView:C})})};Sa.defaultProps={placeholder:null},Sa.propTypes={disabled:u.bool.isRequired,placeholder:u.string};const ND=e=>{const{isInline:t,apply:n,insertText:r,insertData:s}=e;return e.isInline=o=>o.type==="link"?!0:t(o),e.lastInsertedLinkPath=null,e.apply=o=>{o.type==="insert_node"?o.node.type==="link"&&(e.lastInsertedLinkPath=o.path):o.type==="move_node"&&O.hasPrevious(o.path)&&(e.lastInsertedLinkPath=O.transform(e.lastInsertedLinkPath,o)),n(o)},e.insertText=o=>{if(G.isCollapsed(e.selection)&&o===" "){const i=Array.from(b.nodes(e,{at:e.selection,match:d=>d.type==="link"}));if(e.selection&&i.length>0&&We.equals(e.selection.anchor,b.end(e,i[0][1]))){K.insertNodes(e,{text:" ",type:"text"},{at:O.next(i[0][1]),select:!0});return}}r(o)},e.insertData=o=>{const i=o.getData("text/plain");if(i)try{new URL(i),Ju(e,{url:i});return}catch{}s(o)},e},ZD=e=>{const{normalizeNode:t}=e;return e.normalizeNode=n=>{const[r,s]=n;if(!Be.isElement(r)&&r.type!=="text"){K.setNodes(e,{type:"text"},{at:s});return}t(n)},e},zD=(0,ae.default)(T.k)`
  &[aria-disabled='true'] {
    cursor: not-allowed;
  }
`,lc=(0,ae.default)(Yv)`
  background: ${({theme:e})=>e.colors.neutral150};
  width: 1px;
  height: ${(0,M.pxToRem)(24)};
`,WD=(0,ae.default)(T.k).attrs({as:"button"})`
  // Inherit the not-allowed cursor from ToolbarWrapper when disabled
  &[aria-disabled] {
    cursor: inherit;
  }

  &[aria-disabled='false'] {
    cursor: pointer;

    // Only apply hover styles if the button is enabled
    &:hover {
      background: ${({theme:e})=>e.colors.primary100};
    }
  }
`,UD=(0,ae.default)($.x)`
  // Styling changes to SingleSelect component don't work, so adding wrapper to target SingleSelect
  div[role='combobox'] {
    border: none;
    cursor: pointer;
    min-height: unset;
    padding-top: 6px;
    padding-bottom: 6px;

    &[aria-disabled='false']:hover {
      cursor: pointer;
      background: ${({theme:e})=>e.colors.primary100};
    }

    &[aria-disabled] {
      background: transparent;
      cursor: inherit;

      // Select text and icons should also have disabled color
      span {
        color: ${({theme:e})=>e.colors.neutral600};
      }
    }
  }
`,ts=({icon:e,name:t,label:n,isActive:r,disabled:s,handleClick:o})=>{const i=Gt(),{formatMessage:l}=(0,Ee.Z)(),c=l(n),d=r?"primary600":"neutral600";return(0,a.jsx)(Ct.u,{description:c,children:(0,a.jsx)(Qv,{value:t,"data-state":r?"on":"off",onMouseDown:h=>{h.preventDefault(),o()},"aria-disabled":s,disabled:s,"aria-label":c,asChild:!0,children:(0,a.jsx)(WD,{disabled:s,background:r?"primary100":"",alignItems:"center",justifyContent:"center",width:7,height:7,hasRadius:!0,onMouseDown:()=>{o(),te.focus(i)},"aria-label":c,children:(0,a.jsx)(Ce.J,{width:3,height:3,as:e,color:s?"neutral300":d})})})})};ts.propTypes={icon:u.elementType.isRequired,name:u.string.isRequired,label:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired}).isRequired,isActive:u.bool.isRequired,disabled:u.bool.isRequired,handleClick:u.func.isRequired};const VD=(e,t)=>{const{type:n,level:r,format:s}=t,o={type:n,level:r||null,format:s||null};if(e.selection)K.unwrapNodes(e,{match:i=>i.type==="list",split:!0}),K.setNodes(e,o);else{const[,i]=b.last(e,[]),[l]=b.parent(e,i,{match:c=>c.type!=="text"});K.removeNodes(e,{void:!0,hanging:!0,at:{anchor:{path:i,offset:0},focus:{path:i,offset:0}}}),K.insertNodes(e,{...o,children:l.children},{at:[i[0]],select:!0})}te.focus(e)},HD=["name","alternativeText","url","caption","width","height","formats","hash","ext","mime","size","previewUrl","provider","provider_metadata","createdAt","updatedAt"],qD=(e,t)=>Object.keys(e).reduce((n,r)=>(t.includes(r)&&(n[r]=e[r]),n),{}),uc=({handleClose:e})=>{const t=Gt(),{components:n}=(0,M.useLibrary)(),r=n["media-library"],s=i=>{K.unwrapNodes(t,{match:d=>d.type==="list",split:!0});const[,l]=b.above(t,{match(d){return!["text","link"].includes(d.type)}});K.removeNodes(t);const c=i.map(d=>({type:"image",image:d,children:[{type:"text",text:""}]}));K.insertNodes(t,c,{at:l})},o=i=>{const l=i.map(c=>{const d=qD(c,HD);return{...d,alternativeText:d.alternativeText||d.name,url:(0,M.prefixFileUrlWithBackendUrl)(c.url)}});s(l),cc(t,"image")&&dc(t),e()};return(0,a.jsx)(r,{allowedTypes:["images"],onClose:e,onSelectAssets:o})};uc.propTypes={handleClose:u.func.isRequired};const cc=(e,t)=>{const{selection:n}=e;if(!n)return!1;const[r]=b.nodes(e,{at:n,match:s=>s.type===t});if(r){const[,s]=r;return!Boolean(b.after(e,s))}return!1},dc=e=>{K.insertNodes(e,{type:"paragraph",children:[{type:"text",text:""}]},{at:[e.children.length]})},fc=({disabled:e})=>{const t=Gt(),{formatMessage:n}=(0,Ee.Z)(),[r,s]=g.useState(!1),o=Oa(),i=Object.entries(o).reduce((m,v)=>{const[C,D]=v;return D.isInBlocksSelector?[...m,C]:m},[]),[l,c]=g.useState(Object.keys(o)[0]),d=m=>{if(["list-ordered","list-unordered"].includes(m)){const v=o[m].value.format,C=gc(t,o[m].matchNode);pc(t,C,v)}else m!=="image"&&VD(t,o[m].value);c(m),m==="code"&&cc(t,"code")&&dc(t),m==="image"&&s(!0)},h=m=>m.preventDefault();return g.useEffect(()=>{if(t.selection){const[m]=b.parent(t,t.selection.anchor,{edge:"start",depth:2}),v=Object.keys(o).find(C=>o[C].matchNode(m));v&&v!==l&&c(v)}},[t.selection,t,o,l]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(UD,{children:(0,a.jsx)(dt.q4,{startIcon:(0,a.jsx)(Ce.J,{as:o[l].icon}),onChange:d,placeholder:o[l].label,value:l,onCloseAutoFocus:h,"aria-label":n({id:"components.Blocks.blocks.selectBlock",defaultMessage:"Select a block"}),disabled:e,children:i.map(m=>(0,a.jsx)(hc,{value:m,label:o[m].label,icon:o[m].icon,blockSelected:l},m))})}),r&&(0,a.jsx)(uc,{handleClose:()=>s(!1)})]})};fc.propTypes={disabled:u.bool.isRequired};const hc=({value:e,icon:t,label:n,blockSelected:r})=>{const{formatMessage:s}=(0,Ee.Z)(),o=e===r;return(0,a.jsx)(dt.ag,{startIcon:(0,a.jsx)(Ce.J,{as:t,color:o?"primary600":"neutral600"}),value:e,children:s(n)})};hc.propTypes={icon:u.elementType.isRequired,value:u.string.isRequired,label:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired}).isRequired,blockSelected:u.string.isRequired};const KD=e=>!b.isEditor(e)&&Be.isElement(e)&&e.type==="list",gc=(e,t)=>{const{selection:n}=e;if(!n)return!1;const[r]=Array.from(b.nodes(e,{at:b.unhangRange(e,n),match:t}));return Boolean(r)},pc=(e,t,n)=>{if(e.selection){if(K.unwrapNodes(e,{match:r=>KD(r)&&["ordered","unordered"].includes(r.format),split:!0}),K.setNodes(e,{type:t?"paragraph":"list-item"}),!t){const r={type:"list",format:n,children:[]};K.wrapNodes(e,r)}}else{const[,r]=b.last(e,[]),[s]=b.parent(e,r,{match:o=>o.type!=="text"});if(K.removeNodes(e,{void:!0,hanging:!0,at:{anchor:{path:r,offset:0},focus:{path:r,offset:0}}}),K.insertNodes(e,{type:t?"paragraph":"list-item",children:[...s.children]},{at:[r[0]],select:!0}),!t){const o={type:"list",format:n,children:[]};K.wrapNodes(e,o)}}},Ia=({block:e,disabled:t})=>{const n=Gt(),{icon:r,matchNode:s,value:{format:o},label:i}=e,l=gc(n,s);return(0,a.jsx)(ts,{icon:r,name:o,label:i,isActive:l,disabled:t,handleClick:()=>pc(n,l,o)})};Ia.propTypes={block:u.shape({icon:u.elementType.isRequired,matchNode:u.func.isRequired,value:u.shape({format:u.string.isRequired}).isRequired,label:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired}).isRequired}).isRequired,disabled:u.bool.isRequired};const mc=({disabled:e})=>{const t=Gt(),n=()=>{const{selection:o}=t;if(!o)return!1;const[i]=Array.from(b.nodes(t,{at:b.unhangRange(t,o),match:l=>Be.isElement(l)&&l.type==="link"}));return Boolean(i)},r=()=>{if(e)return!0;if(!t.selection)return!1;const o=b.above(t,{at:t.selection.anchor,match:l=>l.type!=="text"}),i=b.above(t,{at:t.selection.focus,match:l=>l.type!=="text"});return o[0]!==i[0]},s=()=>{Ju(t,{url:""})};return(0,a.jsx)(ts,{icon:Ds.Z,name:"link",label:{id:"components.Blocks.link",defaultMessage:"Link"},isActive:n(),handleClick:s,disabled:r()})};mc.propTypes={disabled:u.bool.isRequired};const vc=({disabled:e})=>{const t=ic(),n=Oa(),r=Gt(),o=(()=>{if(e)return!0;if(!r.selection)return!1;const i=r.children[r.selection.anchor.path[0]];return!!["image","code"].includes(i.type)})();return(0,a.jsx)(Gv,{"aria-disabled":e,asChild:!0,children:(0,a.jsxs)(zD,{gap:2,padding:2,children:[(0,a.jsx)(fc,{disabled:e}),(0,a.jsx)(lc,{}),(0,a.jsx)(Gl,{type:"multiple",asChild:!0,children:(0,a.jsxs)(T.k,{gap:1,children:[Object.entries(t).map(([i,l])=>(0,a.jsx)(ts,{name:i,icon:l.icon,label:l.label,isActive:l.checkIsActive(),handleClick:l.handleToggle,disabled:o},i)),(0,a.jsx)(mc,{disabled:o})]})}),(0,a.jsx)(lc,{}),(0,a.jsx)(Gl,{type:"single",asChild:!0,children:(0,a.jsxs)(T.k,{gap:1,children:[(0,a.jsx)(Ia,{block:n["list-unordered"],disabled:e}),(0,a.jsx)(Ia,{block:n["list-ordered"],disabled:e})]})})]})})};vc.propTypes={disabled:u.bool.isRequired};const GD=(0,ae.default)(L.Z)`
  line-height: 0;
`,YD=(0,ae.default)($.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,QD=(0,ae.default)(lt.i)`
  background: ${({theme:e})=>e.colors.neutral200};
`,JD=e=>{const{isVoid:t}=e;return e.isVoid=n=>n.type==="image"?!0:t(n),e};function XD(e){const t=g.useRef(0),n=g.useRef(0),[r,s]=g.useState(0);return g.useEffect(()=>{n.current+=1,n.current!==t.current&&(s(o=>o+1),t.current=n.current)},[e]),{key:r,incrementSlateUpdatesCount:()=>t.current+=1}}const _D=(...e)=>t=>e.reduce((n,r)=>r(n),t),Pa=g.forwardRef(({intlLabel:e,labelAction:t,name:n,disabled:r,required:s,error:o,value:i,onChange:l,placeholder:c,hint:d},h)=>{const{formatMessage:m}=(0,Ee.Z)(),[v]=g.useState(()=>_D(R0,JD,ZD,Tv,ND)(w0())),C=e.id?m({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):n,D=c?m({id:c.id,defaultMessage:c.defaultMessage}):null;g.useImperativeHandle(h,()=>({focus(){te.focus(v)}}),[v]);const{key:f,incrementSlateUpdatesCount:y}=XD(i),x=B=>{v.operations.some(S=>S.type!=="set_selection")&&(y(),l({target:{name:n,value:B,type:"blocks"}}))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,a.jsxs)(T.k,{gap:1,children:[(0,a.jsxs)(L.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:[C,s&&(0,a.jsx)(GD,{textColor:"danger600",children:"*"})]}),t&&(0,a.jsx)(YD,{paddingLeft:1,children:t})]}),(0,a.jsx)(wv,{editor:v,initialValue:i||[{type:"paragraph",children:[{type:"text",text:""}]}],onChange:x,children:(0,a.jsxs)(rn.S,{direction:"column",alignItems:"flex-start",height:"512px",children:[(0,a.jsx)(vc,{disabled:r}),(0,a.jsx)(QD,{width:"100%"}),(0,a.jsx)(Sa,{disabled:r,placeholder:D})]})},f),(0,a.jsx)(_r,{hint:d,name:n,error:o})]}),o&&(0,a.jsx)($.x,{paddingTop:1,children:(0,a.jsx)(L.Z,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0,children:o})})]})});Pa.defaultProps={labelAction:null,disabled:!1,required:!1,error:"",value:null,placeholder:null,hint:null},Pa.propTypes={intlLabel:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}).isRequired,labelAction:u.element,name:u.string.isRequired,required:u.bool,disabled:u.bool,error:u.string,onChange:u.func.isRequired,value:u.array,placeholder:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired}),hint:u.oneOfType([u.string,u.array])};const eb=(0,ae.default)(fs.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Cc=(0,ae.default)(T.k)`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;

    path {
      fill: ${({theme:e,available:t})=>t?e.colors.success600:e.colors.danger600};
    }
  }
`,tb=(0,ae.keyframes)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,nb=(0,ae.default)(T.k)`
  animation: ${tb} 2s infinite linear;
`,rb=/^[A-Za-z0-9-_.~]*$/,ka=g.forwardRef(({contentTypeUID:e,hint:t,disabled:n,error:r,intlLabel:s,labelAction:o,name:i,onChange:l,value:c,placeholder:d,required:h},m)=>{const[v,C]=g.useState(null),[D,f]=g.useState(!1),y=(0,Jv.u)(c,300),{modifiedData:x,initialData:B}=(0,M.useCMEditViewDataManager)(),A=(0,M.useNotification)(),{formatAPIError:S}=(0,M.useAPIErrorHandler)(),{formatMessage:E}=(0,Ee.Z)(),{post:j}=(0,M.useFetchClient)(),R=s.id?E({id:s.id,defaultMessage:s.defaultMessage},{...s.values}):i,Z=d?E({id:d.id,defaultMessage:d.defaultMessage},{...d.values}):"",{data:F,isLoading:P}=(0,Bt.useQuery)({queryKey:["uid",{contentTypeUID:e,field:i,data:x}],async queryFn({queryKey:N}){const[,q]=N,{data:{data:V}}=await j("/content-manager/uid/generate",q);return V},onError(N){A({type:"warning",message:S(N)})},enabled:!c&&h});g.useEffect(()=>{F&&l({target:{name:i,value:F,type:"text"}},!0)},[F,i,l]);const{mutate:Q,isLoading:I}=(0,Bt.useMutation)({async mutationFn(N){const{data:{data:q}}=await j("/content-manager/uid/generate",N);return q},onSuccess(N){l({target:{name:i,value:N,type:"text"}})},onError(N){A({type:"warning",message:S(N)})}}),{data:z,isLoading:U}=(0,Bt.useQuery)({queryKey:["uid",{contentTypeUID:e,field:i,value:y?y.trim():""}],async queryFn({queryKey:N}){const[,q]=N,{data:V}=await j("/content-manager/uid/check-availability",q);return V},enabled:Boolean(y!==B[i]&&y&&rb.test(y.trim())),onError(N){A({type:"warning",message:S(N)})}});g.useEffect(()=>{C(z);let N;return z?.isAvailable&&(N=setTimeout(()=>{C(null)},4e3)),()=>{N&&clearTimeout(N)}},[z]);const k=P||I||U;return(0,a.jsx)(Te.o,{ref:m,disabled:n,error:r,endAction:(0,a.jsxs)(T.k,{position:"relative",gap:1,children:[v&&!D&&(0,a.jsxs)(Cc,{alignItems:"center",gap:1,justifyContent:"flex-end",available:!!v?.isAvailable,"data-not-here-outer":!0,position:"absolute",pointerEvents:"none",right:6,width:"100px",children:[v?.isAvailable?(0,a.jsx)(js.Z,{}):(0,a.jsx)(Jn.Z,{}),(0,a.jsx)(L.Z,{textColor:v.isAvailable?"success600":"danger600",variant:"pi",children:E(v.isAvailable?{id:"content-manager.components.uid.available",defaultMessage:"Available"}:{id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"})})]}),!n&&(0,a.jsxs)(a.Fragment,{children:[D&&(0,a.jsx)(Cc,{alignItems:"center",justifyContent:"flex-end",gap:1,children:(0,a.jsx)(L.Z,{textColor:"primary600",variant:"pi",children:E({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"})})}),(0,a.jsx)(eb,{onClick:()=>Q({contentTypeUID:e,field:i,data:x}),label:E({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:k?(0,a.jsx)(nb,{"data-testid":"loading-wrapper",children:(0,a.jsx)(eg.Z,{})}):(0,a.jsx)(ys.Z,{})})]})]}),hint:t,label:R,labelAction:o,name:i,onChange:l,placeholder:Z,value:c||"",required:h})});ka.propTypes={contentTypeUID:u.string.isRequired,disabled:u.bool,error:u.string,intlLabel:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}).isRequired,labelAction:u.element,name:u.string.isRequired,onChange:u.func.isRequired,value:u.string,placeholder:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}),required:u.bool,hint:u.oneOfType([u.string,u.array])},ka.defaultProps={disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1,hint:""};function sb(e,t){return n=>{const r=t(n);return(0,a.jsx)(e,{...n,...r})}}const ab=(e=[],t=[])=>{const n=e.reduce((s,o)=>t.find(i=>i.id===o.id)?s:[...s,o.id],[]),r=t.reduce((s,o)=>e.find(i=>i.id===o.id)?s:[...s,o.id],[]);return[n,r]},An={DRAFT:"draft",PUBLISHED:"published"},La=5,ob=10;function ib(e,t){return`/content-manager/collectionType/${e}/${t??""}`}const $a=(e,{shouldAddLink:t,mainFieldName:n,targetModel:r})=>{const s={...e};return t&&(s.href=ib(r,s.id)),s.publicationState=!1,s?.publishedAt!==void 0&&(s.publicationState=s.publishedAt?An.PUBLISHED:An.DRAFT),s.mainField=s[n],s},lb=(e,{shouldAddLink:t=!1,mainFieldName:n,targetModel:r}={})=>[...e].map(s=>$a(s,{shouldAddLink:t,mainFieldName:n,targetModel:r})),ub=(e,{mainFieldName:t})=>{const{data:n}=e,{pages:r=[]}=n??{};return{...e,data:r.map(s=>s?.results.map(o=>$a(o,{mainFieldName:t}))).filter(Boolean).flat()}};function cb({componentUid:e,isUserAllowedToEditField:t,isUserAllowedToReadField:n,name:r,queryInfos:s}){const{isCreatingEntry:o,createActionAllowedFields:i,readActionAllowedFields:l,updateActionAllowedFields:c,slug:d,modifiedData:h}=(0,M.useCMEditViewDataManager)(),{params:m}=(0,Ye.$B)("/content-manager/collectionType/:collectionType/create/clone/:origin")??{},{origin:v}=m??{},C=(0,g.useMemo)(()=>t===!0?!0:(o?i:c).includes(r),[o,i,r,t,c]),D=(0,g.useMemo)(()=>n?!0:(o?[]:l).includes(r),[o,n,r,l]),f=r.split(".");let y;e&&(y=le(h,f.slice(0,-1))?.id);const x=v||h.id,B=(0,g.useMemo)(()=>o&&!v?null:e?y?`/content-manager/relations/${e}/${y}/${f.at(-1)}`:null:`/content-manager/relations/${d}/${x}/${r.split(".").at(-1)}`,[o,v,e,d,x,r,y,f]),A=(0,g.useMemo)(()=>e?`/content-manager/relations/${e}/${r.split(".").at(-1)}`:`/content-manager/relations/${d}/${r.split(".").at(-1)}`,[e,d,r]);return{entityId:x,componentId:y,isComponentRelation:Boolean(e),queryInfos:{...s,endpoints:{search:A,relation:B}},isCloningEntry:Boolean(v),isCreatingEntry:o,isFieldAllowed:C,isFieldReadable:D}}const db=(e,{relation:t,search:n})=>{const[r,s]=(0,g.useState)({}),[o,i]=(0,g.useState)(0),{get:l}=(0,M.useFetchClient)(),{onLoad:c,normalizeArguments:d={}}=t,h=(0,Bt.useInfiniteQuery)(["relation",...e],async({pageParam:A=1})=>{try{const{data:S}=await l(t?.endpoint,{params:{...t.pageParams??{},page:A}});return i(A),S}catch{return null}},{cacheTime:0,enabled:t.enabled,getNextPageParam(A){const S=!A?.pagination;if(!(!A||S||A?.pagination.page>=A?.pagination.pageCount))return A.pagination.page+1},select:A=>({...A,pages:A.pages.map(S=>{if(!S)return S;const{data:E,results:j,pagination:R}=S,Z=!!E;let F=[];return Z?F=[E]:j&&(F=[...j].reverse()),{pagination:R,results:F}})})}),{pageGoal:m}=t,{status:v,data:C,fetchNextPage:D,hasNextPage:f}=h;(0,g.useEffect)(()=>{m>o&&f&&v==="success"&&D({pageParam:o+1})},[m,o,D,f,v]);const y=(0,M.useCallbackRef)(c);(0,g.useEffect)(()=>{if(v==="success"&&C&&C.pages?.at(-1)?.results&&y){const A=lb(C.pages.at(-1).results,d);y(A)}},[v,y,C]);const x=(0,Bt.useInfiniteQuery)(["relation",...e,"search",JSON.stringify(r)],async({pageParam:A=1})=>{try{const{data:S}=await l(n.endpoint,{params:{...n.pageParams??{},...r,page:A}});return S}catch{return null}},{enabled:Object.keys(r).length>0,getNextPageParam(A){if(!(!A?.pagination||A.pagination.page>=A.pagination.pageCount))return A.pagination.page+1}});return{relations:h,search:x,searchFor:(A,S={})=>{s({...S,_q:A,_filter:"$startsWithi"})}}},Dc=(e,t)=>n=>{const r=n.split(".");return r.reduce((s,o,i)=>{const l=le(e,s),c=le(t,[...r.slice(0,i),o,"__temp_key__"]);if(Array.isArray(l)&&typeof c=="number"){const d=l.findIndex(h=>h.__temp_key__===c);return s.push(d.toString()),s}return s.push(o),s},[])},fb=ae.default.div`
  flex-shrink: 0;
  width: ${(0,M.pxToRem)(6)};
  height: ${(0,M.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
`,Na=({publicationState:e,mainField:t,id:n})=>{const{formatMessage:r}=(0,Ee.Z)(),s=(t??n).toString();if(e){const o=e==="draft",i={id:(0,W.g)("components.Select.draft-info-title"),defaultMessage:"State: Draft"},l={id:(0,W.g)("components.Select.publish-info-title"),defaultMessage:"State: Published"},c=r(o?i:l);return(0,a.jsx)($t.O,{value:n,textValue:s,children:(0,a.jsxs)(T.k,{children:[(0,a.jsx)(fb,{title:c,isDraft:o}),(0,a.jsx)(L.Z,{ellipsis:!0,children:s})]})})}return(0,a.jsx)($t.O,{value:n,textValue:s,children:s})};Na.defaultProps={mainField:void 0,publicationState:void 0},Na.propTypes={id:u.number.isRequired,mainField:u.oneOfType([u.string,u.number]),publicationState:u.oneOfType([u.string,u.bool])};const ns=50,Vn=4,bc=(0,ae.default)(T.k)`
  width: 100%;
  /* Used to prevent endAction to be pushed out of container */
  min-width: 0;

  & > div[role='button'] {
    cursor: all-scroll;
  }
`,xc=(0,ae.default)(T.k)`
  width: 100%;
  /* Used to prevent endAction to be pushed out of container */
  min-width: 0;
`,Za=({ariaDescribedBy:e,children:t,displayValue:n,canDrag:r,disabled:s,endAction:o,iconButtonAriaLabel:i,style:l,id:c,index:d,name:h,onCancel:m,onDropItem:v,onGrabItem:C,status:D,updatePositionOfRelation:f,...y})=>{const[{handlerId:x,isDragging:B,handleKeyDown:A},S,E,j,R]=(0,W.u)(r&&!s,{type:`${It.RELATION}_${h}`,index:d,item:{displayedValue:n,status:D,id:c},onGrabItem:C,onDropItem:v,onCancel:m,onMoveItem:f,dropSensitivity:"immediate"}),Z=(0,W.c)(S,j);return(0,g.useEffect)(()=>{R((0,_n.rX)())},[R]),(0,a.jsx)($.x,{style:l,as:"li",ref:E,"aria-describedby":e,cursor:r?"all-scroll":"default",children:B?(0,a.jsx)(hb,{}):(0,a.jsxs)(T.k,{paddingTop:2,paddingBottom:2,paddingLeft:r?2:4,paddingRight:4,hasRadius:!0,borderSize:1,borderColor:"neutral200",background:s?"neutral150":"neutral0",justifyContent:"space-between",ref:r?Z:void 0,"data-handler-id":x,...y,children:[(0,a.jsxs)(bc,{gap:1,children:[r?(0,a.jsx)(pe.h,{forwardedAs:"div",role:"button",tabIndex:0,"aria-label":i,noBorder:!0,onKeyDown:A,disabled:s,children:(0,a.jsx)(on.Z,{})}):null,(0,a.jsx)(xc,{justifyContent:"space-between",children:t})]}),o&&(0,a.jsx)($.x,{paddingLeft:4,children:o})]})})},hb=()=>(0,a.jsx)($.x,{paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,hasRadius:!0,borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",background:"primary100",height:`calc(100% - ${Vn}px)`});Za.defaultProps={ariaDescribedBy:"",canDrag:!1,displayValue:"",disabled:!1,endAction:void 0,onCancel:void 0,onDropItem:void 0,onGrabItem:void 0,style:void 0,status:void 0,updatePositionOfRelation:void 0},Za.propTypes={ariaDescribedBy:u.string,canDrag:u.bool,children:u.node.isRequired,displayValue:u.string,disabled:u.bool,endAction:u.node,iconButtonAriaLabel:u.string.isRequired,id:u.number.isRequired,index:u.number.isRequired,name:u.string.isRequired,onCancel:u.func,onDropItem:u.func,onGrabItem:u.func,status:u.string,style:u.shape({height:u.number,left:u.number,position:u.string,right:u.number,width:u.string}),updatePositionOfRelation:u.func};const gb=(0,ae.default)($.x)`
  position: relative;
  overflow: hidden;
  flex: 1;

  &:before,
  &:after {
    position: absolute;
    width: 100%;
    height: 4px;
    z-index: 1;
  }

  &:before {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: '';
    background: linear-gradient(rgba(3, 3, 5, 0.2) 0%, rgba(0, 0, 0, 0) 100%);
    top: 0;
    opacity: ${({overflowDirection:e})=>e==="top-bottom"||e==="top"?1:0};
    transition: opacity 0.2s ease-in-out;
  }

  &:after {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: '';
    background: linear-gradient(0deg, rgba(3, 3, 5, 0.2) 0%, rgba(0, 0, 0, 0) 100%);
    bottom: 0;
    opacity: ${({overflowDirection:e})=>e==="top-bottom"||e==="bottom"?1:0};
    transition: opacity 0.2s ease-in-out;
  }
`,za=({children:e,overflow:t,...n})=>(0,a.jsx)(gb,{overflowDirection:t,...n,children:e});za.defaultProps={overflow:""},za.propTypes={children:u.node.isRequired,overflow:u.oneOf(["top-bottom","bottom","top",""])};const yc=(0,ae.default)(Ed.r)`
  display: block;

  > span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
  }
`,Ec=ae.default.button`
  svg path {
    fill: ${({theme:e,disabled:t})=>t?e.colors.neutral600:e.colors.neutral500};
  }

  &:hover svg path,
  &:focus svg path {
    fill: ${({theme:e,disabled:t})=>!t&&e.colors.neutral600};
  }
`,pb=(0,ae.default)($.x)`
  align-self: flex-start;
`,Wa=({canReorder:e,description:t,disabled:n,error:r,iconButtonAriaLabel:s,id:o,name:i,numberOfRelationsToDisplay:l,label:c,labelAction:d,labelLoadMore:h,labelDisconnectRelation:m,listAriaDescription:v,liveText:C,loadingMessage:D,onCancel:f,onDropItem:y,onGrabItem:x,noRelationsMessage:B,onRelationConnect:A,onRelationLoadMore:S,onRelationDisconnect:E,onRelationReorder:j,onSearchNextPage:R,onSearch:Z,placeholder:F,publicationStateTranslations:P,required:Q,relations:I,searchResults:z,size:U})=>{const[k,N]=(0,g.useState)(""),[q,V]=(0,g.useState)(""),re=(0,g.useRef)(),J=(0,g.useRef)(),oe=(0,M.useFocusInputField)(i),{data:ne}=z,ue=I.data,w=ue.length??0,X=(0,g.useMemo)(()=>w>l?Math.min(w,l)*(ns+Vn)+ns/2:Math.min(w,l)*(ns+Vn),[w,l]),Y=!!h&&I.hasNextPage,se=(0,g.useMemo)(()=>ne.flat().filter(Boolean).map(je=>({...je,value:je.id,label:je.mainField})),[ne]);(0,g.useEffect)(()=>{if(w<=l)return V("");const je=Qe=>{const He=Qe.target.parentNode.scrollHeight,ct=Qe.target.scrollHeight-Qe.target.scrollTop;return Qe.target.scrollTop===0?V("bottom"):V(ct===He?"top":"top-bottom")},et=J?.current;return!I.isLoading&&ue.length>0&&et&&J.current.addEventListener("scroll",je),()=>{et&&et.removeEventListener("scroll",je)}},[I,ue,l,w]);const H=je=>{je&&Z()},ie=(je,et)=>{j&&je>=0&&je<ue.length&&j(et,je)},Ae=Pu(ue.length),Me=(0,g.useRef)(),Le=()=>{Me.current="loadMore",S()};(0,g.useEffect)(()=>{Me.current==="onChange"&&N(""),Me.current==="onChange"&&ue.length!==Ae?(re.current?.scrollToItem(ue.length,"end"),Me.current=void 0):Me.current==="loadMore"&&ue.length!==Ae&&(re.current?.scrollToItem(0,"start"),Me.current=void 0)},[Ae,ue]);const Ve=`${i}-item-instructions`;return(0,a.jsxs)(T.k,{direction:"column",gap:3,justifyContent:"space-between",alignItems:"stretch",wrap:"wrap",children:[(0,a.jsxs)(T.k,{direction:"row",alignItems:"end",justifyContent:"end",gap:2,width:"100%",children:[(0,a.jsx)(pb,{marginRight:"auto",maxWidth:U<=6?"100%":"70%",width:"100%",children:(0,a.jsx)(To.hQ,{ref:oe,autocomplete:"list",error:r,name:i,hint:t,id:o,required:Q,label:c,labelAction:d,disabled:n,placeholder:F,hasMoreItems:z.hasNextPage,loading:z.isLoading,onOpenChange:H,noOptionsMessage:()=>B,loadingMessage:D,onLoadMore:()=>{R()},textValue:k,onChange:je=>{je&&(A(se.find(et=>et.id===je)),Me.current="onChange")},onTextValueChange:je=>{N(je)},onInputChange:je=>{Z(je.currentTarget.value)},children:se.map(je=>(0,a.jsx)(Na,{...je},je.id))})}),Y&&(0,a.jsx)(hs.A,{disabled:I.isLoading||I.isFetchingNextPage,onClick:Le,loading:I.isLoading||I.isFetchingNextPage,startIcon:(0,a.jsx)(ys.Z,{}),shrink:0,children:h})]}),ue.length>0&&(0,a.jsxs)(za,{overflow:q,children:[(0,a.jsx)(sn.T,{id:Ve,children:v}),(0,a.jsx)(sn.T,{"aria-live":"assertive",children:C}),(0,a.jsx)(hC,{height:X,ref:re,outerRef:J,itemCount:w,itemSize:ns+Vn,itemData:{name:i,ariaDescribedBy:Ve,canDrag:e,disabled:n,handleCancel:f,handleDropItem:y,handleGrabItem:x,iconButtonAriaLabel:s,labelDisconnectRelation:m,onRelationDisconnect:E,publicationStateTranslations:P,relations:ue,updatePositionOfRelation:ie},itemKey:je=>`${ue[je].mainField}_${ue[je].id}`,innerElementType:"ol",children:Ua})]})]})},mb=u.shape({data:u.arrayOf(u.shape({href:u.string,id:u.number.isRequired,publicationState:u.oneOfType([u.string,u.bool]),mainField:u.oneOfType([u.string,u.number])})),hasNextPage:u.bool,isFetchingNextPage:u.bool.isRequired,isLoading:u.bool.isRequired,isSuccess:u.bool.isRequired}),vb=u.shape({data:u.arrayOf(u.shape({id:u.number.isRequired,href:u.string,mainField:u.oneOfType([u.string,u.number]),publicationState:u.oneOfType([u.string,u.bool])})),hasNextPage:u.bool,isLoading:u.bool.isRequired,isSuccess:u.bool.isRequired});Wa.defaultProps={canReorder:!1,description:void 0,disabled:!1,error:void 0,labelAction:null,labelLoadMore:null,liveText:void 0,onCancel:void 0,onDropItem:void 0,onGrabItem:void 0,required:!1,relations:{data:[]},searchResults:{data:[]}},Wa.propTypes={error:u.string,canReorder:u.bool,description:u.string,disabled:u.bool,iconButtonAriaLabel:u.string.isRequired,id:u.string.isRequired,label:u.string.isRequired,labelAction:u.element,labelLoadMore:u.string,labelDisconnectRelation:u.string.isRequired,listAriaDescription:u.string.isRequired,liveText:u.string,loadingMessage:u.string.isRequired,name:u.string.isRequired,noRelationsMessage:u.string.isRequired,numberOfRelationsToDisplay:u.number.isRequired,onCancel:u.func,onDropItem:u.func,onGrabItem:u.func,onRelationConnect:u.func.isRequired,onRelationDisconnect:u.func.isRequired,onRelationLoadMore:u.func.isRequired,onRelationReorder:u.func.isRequired,onSearch:u.func.isRequired,onSearchNextPage:u.func.isRequired,placeholder:u.string.isRequired,publicationStateTranslations:u.shape({draft:u.string.isRequired,published:u.string.isRequired}).isRequired,required:u.bool,searchResults:vb,size:u.number.isRequired,relations:mb};const Ua=({data:e,index:t,style:n})=>{const{ariaDescribedBy:r,canDrag:s,disabled:o,handleCancel:i,handleDropItem:l,handleGrabItem:c,iconButtonAriaLabel:d,name:h,labelDisconnectRelation:m,onRelationDisconnect:v,publicationStateTranslations:C,relations:D,updatePositionOfRelation:f}=e,{publicationState:y,href:x,mainField:B,id:A}=D[t],S=y==="draft"?"secondary":"success";return(0,a.jsxs)(Za,{ariaDescribedBy:r,canDrag:s,disabled:o,displayValue:String(B??A),iconButtonAriaLabel:d,id:A,index:t,name:h,endAction:(0,a.jsx)(Ec,{"data-testid":`remove-relation-${A}`,disabled:o,type:"button",onClick:()=>v(D[t]),"aria-label":m,children:(0,a.jsx)(Ce.J,{width:"12px",as:Fr.Z})}),onCancel:i,onDropItem:l,onGrabItem:c,status:y||void 0,style:{...n,bottom:n.bottom??0+Vn,height:n.height??0-Vn},updatePositionOfRelation:f,children:[(0,a.jsx)($.x,{minWidth:0,paddingTop:1,paddingBottom:1,paddingRight:4,children:(0,a.jsx)(Ct.u,{description:B??`${A}`,children:x?(0,a.jsx)(yc,{to:x,children:B??A}):(0,a.jsx)(L.Z,{textColor:o?"neutral600":"primary600",ellipsis:!0,children:B??A})})}),y&&(0,a.jsx)(gs,{variant:S,showBullet:!1,size:"S",children:(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:`${S}700`,children:C[y]})})]})};Ua.defaultProps={data:{}},Ua.propTypes={data:u.shape({ariaDescribedBy:u.string.isRequired,canDrag:u.bool.isRequired,disabled:u.bool.isRequired,handleCancel:u.func,handleDropItem:u.func,handleGrabItem:u.func,iconButtonAriaLabel:u.string.isRequired,labelDisconnectRelation:u.string.isRequired,name:u.string.isRequired,onRelationDisconnect:u.func.isRequired,publicationStateTranslations:u.shape({draft:u.string.isRequired,published:u.string.isRequired}).isRequired,relations:u.arrayOf(u.shape({href:u.string,id:u.number.isRequired,publicationState:u.oneOfType([u.string,u.bool]),mainField:u.oneOfType([u.string,u.number])})),updatePositionOfRelation:u.func.isRequired}),index:u.number.isRequired,style:u.object.isRequired};const Va=({error:e,entityId:t,componentId:n,isComponentRelation:r,editable:s,description:o,intlLabel:i,isCreatingEntry:l,isCloningEntry:c,isFieldAllowed:d,isFieldReadable:h,labelAction:m,mainField:v,name:C,queryInfos:{endpoints:D,defaultParams:f,shouldDisplayRelationLink:y},placeholder:x,required:B,relationType:A,size:S,targetModel:E})=>{const[j,R]=(0,g.useState)(""),{formatMessage:Z}=(0,Ee.Z)(),{slug:F,initialData:P,modifiedData:Q,relationConnect:I,relationDisconnect:z,relationLoad:U,relationReorder:k}=(0,M.useCMEditViewDataManager)(),N=C.split("."),q=Dc(P,Q)(C),V=le(Q,C,[]),re=Math.ceil(le(P,C,[]).length/La),{relations:J,search:oe,searchFor:ne}=db([F,q.join("."),Q.id,f],{relation:{enabled:!!D.relation,endpoint:D.relation,pageGoal:re,pageParams:{...f,pageSize:La},onLoad($e){U({target:{initialDataPath:["initialData",...q],modifiedDataPath:["modifiedData",...N],value:$e}})},normalizeArguments:{mainFieldName:v.name,shouldAddLink:y,targetModel:E}},search:{endpoint:D.search,pageParams:{...f,entityId:l||c?void 0:r?n:t,pageSize:ob}}}),ue=(0,g.useMemo)(()=>A.toLowerCase().includes("morph"),[A]),w=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(A),X=(0,g.useMemo)(()=>ue?!0:l?!s:!d&&h||!s,[ue,l,s,d,h]),Y=$e=>{const Je=$a($e,{mainFieldName:v.name,shouldAddLink:y,targetModel:E});I({name:C,value:Je,toOneRelation:w})},se=$e=>{z({name:C,id:$e.id})},H=()=>{J.fetchNextPage()},ie=($e="")=>{const[Je,Ke]=ab(V,le(P,C));ne($e,{idsToInclude:Ke,idsToOmit:Je})},Ae=()=>{oe.fetchNextPage()},Me=$e=>`${$e+1} of ${V.length}`,Le=($e,Je)=>{const Ke=V[$e];R(Z({id:(0,W.g)("dnd.reorder"),defaultMessage:"{item}, moved. New position in list: {position}."},{item:Ke.mainField??Ke.id,position:Me(Je)})),k({name:C,newIndex:Je,oldIndex:$e})},Ve=$e=>{const Je=V[$e];R(Z({id:(0,W.g)("dnd.grab-item"),defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:Je.mainField??Je.id,position:Me($e)}))},je=$e=>{const Je=V[$e];R(Z({id:(0,W.g)("dnd.drop-item"),defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:Je.mainField??Je.id,position:Me($e)}))},et=$e=>{const Je=V[$e];R(Z({id:(0,W.g)("dnd.cancel-item"),defaultMessage:"{item}, dropped. Re-order cancelled."},{item:Je.mainField??Je.id}))};if(!d&&l||!l&&!d&&!h)return(0,a.jsx)(M.NotAllowedInput,{name:C,intlLabel:i,labelAction:m});const Qe=V.length,He=(le(P,q)??[]).length,ct=J.data?.pages[0]?.pagination?.total??0,ht=!J.data&&Qe===He?Qe:Qe-He+ct;return(0,a.jsx)(Wa,{error:e,canReorder:!w,description:o,disabled:X,iconButtonAriaLabel:Z({id:(0,W.g)("components.RelationInput.icon-button-aria-label"),defaultMessage:"Drag"}),id:C,label:`${Z({id:i.id,defaultMessage:i.defaultMessage})} ${ht>0?`(${ht})`:""}`,labelAction:m,labelLoadMore:!l||c?Z({id:(0,W.g)("relation.loadMore"),defaultMessage:"Load More"}):null,labelDisconnectRelation:Z({id:(0,W.g)("relation.disconnect"),defaultMessage:"Remove"}),listAriaDescription:Z({id:(0,W.g)("dnd.instructions"),defaultMessage:"Press spacebar to grab and re-order"}),listHeight:320,liveText:j,loadingMessage:Z({id:(0,W.g)("relation.isLoading"),defaultMessage:"Relations are loading"}),name:C,noRelationsMessage:Z({id:(0,W.g)("relation.notAvailable"),defaultMessage:"No relations available"}),numberOfRelationsToDisplay:La,onDropItem:je,onGrabItem:Ve,onCancel:et,onRelationConnect:Y,onRelationDisconnect:se,onRelationLoadMore:H,onRelationReorder:Le,onSearch:$e=>ie($e),onSearchNextPage:()=>Ae(),placeholder:Z(x||{id:(0,W.g)("relation.add"),defaultMessage:"Add relation"}),publicationStateTranslations:{[An.DRAFT]:Z({id:(0,W.g)("relation.publicationState.draft"),defaultMessage:"Draft"}),[An.PUBLISHED]:Z({id:(0,W.g)("relation.publicationState.published"),defaultMessage:"Published"})},relations:Xv({...J,data:V},"data","hasNextPage","isFetchingNextPage","isLoading","isSuccess"),required:B,searchResults:ub(oe,{mainFieldName:v.name}),size:S})};Va.defaultProps={componentId:void 0,entityId:void 0,editable:!0,error:void 0,description:"",labelAction:null,isComponentRelation:!1,isFieldAllowed:!0,placeholder:null,required:!1},Va.propTypes={componentId:u.number,entityId:u.number,editable:u.bool,error:u.string,description:u.string,intlLabel:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}).isRequired,labelAction:u.element,isCloningEntry:u.bool.isRequired,isCreatingEntry:u.bool.isRequired,isComponentRelation:u.bool,isFieldAllowed:u.bool,isFieldReadable:u.bool.isRequired,mainField:u.shape({name:u.string.isRequired,schema:u.shape({type:u.string.isRequired}).isRequired}).isRequired,name:u.string.isRequired,placeholder:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}),required:u.bool,relationType:u.string.isRequired,size:u.number.isRequired,targetModel:u.string.isRequired,queryInfos:u.shape({defaultParams:u.shape({locale:u.string}),endpoints:u.shape({relation:u.string,search:u.string.isRequired}).isRequired,shouldDisplayRelationLink:u.bool.isRequired}).isRequired};const Cb=(0,g.memo)(Va),Db=sb(Cb,cb);(async()=>{await p.e(1034).then(p.bind(p,1034))})();const Hn=new vC({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight(e,t){if(t&&t!=="auto"&&(0,ca.getLanguage)(t))return'<pre class="hljs language-'+Hn.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,ca.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,ca.highlightAuto)(e);return'<pre class="hljs language-'+Hn.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+Hn.utils.escapeHtml(e)+"</code></pre>"}}).use(CC).use(uu,"warning").use(uu,"tip").use(DC).use(bC).use(xC).use(yC).use(EC).use(BC).use(AC);Hn.renderer.rules.footnote_ref=(e,t,n,r,s)=>'<sup class="footnote-ref"><span>'+s.rules.footnote_caption(e,t,n,r,s)+"</span></sup>",Hn.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const bb={...cu.defaults,allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}},xb=e=>cu(e,bb),yb=ae.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  color: ${({theme:e})=>e.colors.neutral800};
  line-height: ${({theme:e})=>e.lineHeights[6]};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: ${({theme:e})=>e.spaces[2]};
    margin-block-end: ${({theme:e})=>e.spaces[2]};
  }

  p {
    margin-bottom: ${({theme:e})=>e.spaces[2]};
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: ${({theme:e})=>e.spaces[8]};
    margin-bottom: ${({theme:e})=>e.spaces[7]};
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 4px solid ${({theme:e})=>e.colors.neutral150};
    font-style: italic;
    padding: ${({theme:e})=>e.spaces[2]} ${({theme:e})=>e.spaces[5]};
  }

  img {
    max-width: 100%;
  }

  table {
    thead {
      background: ${({theme:e})=>e.colors.neutral150};

      th {
        padding: ${({theme:e})=>e.spaces[4]};
      }
    }
    tr {
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    th,
    td {
      padding: ${({theme:e})=>e.spaces[4]};
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 0;
      border-top: 0;
    }
  }

  pre,
  code {
    font-size: ${14/16}rem;
    border-radius: 4px;
    /* 
      Hard coded since the color is the same between themes,
      theme.colors.neutral800 changes between themes.

      Matches the color of the JSON Input component.
    */
    background-color: #32324d;
    max-width: 100%;
    overflow: auto;
    padding: ${({theme:e})=>e.spaces[2]};
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};

    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};

    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,Ha=({data:e})=>{const t=(0,g.useMemo)(()=>xb(Hn.render(e.replaceAll("\\n",`
`)||"")),[e]);return(0,a.jsx)(yb,{children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})};Ha.defaultProps={data:""},Ha.propTypes={data:u.string};const Bc=(0,g.memo)(Ha);var rs=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,Eb=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,Bb=/[*+-]\s/;function Ab(e){if(e.getOption("disableInput"))return ua.Pass;for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var s=t[r].head,o=e.getStateAfter(s.line),i=o.list!==!1,l=o.quote!==0,c=e.getLine(s.line),d=rs.exec(c),h=/^\s*$/.test(c.slice(0,s.ch));if(!t[r].empty()||!i&&!l||!d||h){e.execCommand("newlineAndIndent");return}if(Eb.test(c)){var m=l&&/>\s*$/.test(c),v=!/>\s*$/.test(c);(m||v)&&e.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),n[r]=`
`}else{var C=d[1],D=d[5],f=!(Bb.test(d[2])||d[2].indexOf(">")>=0),y=f?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[r]=`
`+C+y+D,f&&jb(e,s)}}e.replaceSelections(n)}function jb(e,t){var n=t.line,r=0,s=0,o=rs.exec(e.getLine(n)),i=o[1];do{r+=1;var l=n+r,c=e.getLine(l),d=rs.exec(c);if(d){var h=d[1],m=parseInt(o[3],10)+r-s,v=parseInt(d[3],10),C=v;if(i===h&&!isNaN(v))m===v&&(C=v+1),m>v&&(C=m+1),e.replaceRange(c.replace(rs,h+C+d[4]+d[5]),{line:l,ch:0},{line:l,ch:c.length});else{if(i.length>h.length||i.length<h.length&&r===1)return;s+=1}}}while(d)}const qa=(0,g.forwardRef)(({disabled:e,editorRef:t,error:n,isPreviewMode:r,isExpandMode:s,name:o,onChange:i,placeholder:l,textareaRef:c,value:d},h)=>{const m=(0,g.useRef)(i);return(0,g.useEffect)(()=>{t.current=ua.fromTextArea(c.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:l,spellcheck:!0,inputStyle:"contenteditable"}),ua.commands.newlineAndIndentContinueMarkdownList=Ab,t.current.on("change",v=>{m.current({target:{name:o,value:v.getValue(),type:"wysiwyg"}})})},[t,c,o,l]),(0,g.useEffect)(()=>{d&&!t.current.hasFocus()&&t.current.setValue(d)},[t,d]),(0,g.useEffect)(()=>{r||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,r,t]),(0,g.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),(0,g.useImperativeHandle)(h,()=>({focus(){t.current.getInputField().focus()},scrollIntoView(v){t.current.getInputField().scrollIntoView(v)}}),[t]),(0,a.jsxs)(wb,{children:[(0,a.jsx)(Fb,{isExpandMode:s,disabled:e||r,children:(0,a.jsx)("textarea",{ref:c})}),r&&(0,a.jsx)(Bc,{data:d})]})});qa.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},qa.propTypes={disabled:u.bool,editorRef:u.shape({current:u.any}).isRequired,error:u.string,isPreviewMode:u.bool,isExpandMode:u.bool,name:u.string.isRequired,onChange:u.func.isRequired,placeholder:u.string,textareaRef:u.shape({current:u.any}).isRequired,value:u.string};const wb=ae.default.div`
  position: relative;
  height: calc(100% - 48px);
`,Fb=ae.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"410px"}; //  512px(total height) - 48px (header) - 52px(footer) - 2px border
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`,Rb=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,Tb=(0,ae.default)(T.k)`
  background: ${({theme:e})=>Rb(e.colors.neutral800,.2)};
`,Mb=(0,ae.default)($.x)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Ob=(0,ae.default)(wt.Y)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};

    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Ka=({children:e,isExpandMode:t,error:n,previewContent:r,onCollapse:s})=>{const{formatMessage:o}=(0,Ee.Z)();return(0,M.useLockScroll)(t),t?(0,a.jsx)(jd.h,{role:"dialog","aria-modal":!1,children:(0,a.jsx)(wd.i,{onEscape:s,children:(0,a.jsx)(Tb,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:s,children:(0,a.jsx)($.x,{background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"90%",height:"90%",onClick:i=>i.stopPropagation(),children:(0,a.jsxs)(T.k,{height:"100%",alignItems:"flex-start",children:[(0,a.jsx)(Mb,{flex:"1",height:"100%",children:e}),(0,a.jsxs)(T.k,{alignItems:"start",direction:"column",flex:1,height:"100%",width:"100%",children:[(0,a.jsx)(T.k,{height:(0,M.pxToRem)(48),background:"neutral100",justifyContent:"flex-end",shrink:0,width:"100%",children:(0,a.jsxs)(Ob,{onClick:s,children:[(0,a.jsx)(L.Z,{children:o({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})}),(0,a.jsx)(Zo.Z,{})]})}),(0,a.jsx)($.x,{position:"relative",height:"100%",width:"100%",children:(0,a.jsx)(Bc,{data:r})})]})]})})})})}):(0,a.jsx)($.x,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0,children:e})};Ka.defaultProps={error:void 0,previewContent:""},Ka.propTypes={children:u.node.isRequired,error:u.string,isExpandMode:u.bool.isRequired,previewContent:u.string,onCollapse:u.func.isRequired};const Ac=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},jc=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},wc=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},Fc=(e,t)=>{const n=e.current.getSelection();let r;if(n){const s=Ac(t,n);e.current.replaceSelection(s),e.current.focus()}else{r=jc(t),e.current.replaceSelection(r.editedText),e.current.focus();const{line:s,ch:o}=e.current.getCursor(),i=o-r.selection.end,l=o-r.selection.end-r.selection.start;e.current.setSelection({line:s,ch:l},{line:s,ch:i})}},Sb=(e,t)=>{const n=e.current.getDoc(),r=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const s=n.listSelections();let o=null;e.current.operation(function(){s.forEach(function(i){const l=[i.head.line,i.anchor.line].sort();o==null&&(o=n.getLine(l[0]).startsWith(r));for(let c=l[0];c<=l[1];c++)if(o)n.getLine(c).startsWith(r)&&n.replaceRange("",{line:c,ch:0},{line:c,ch:r.length});else{const d=t==="BulletList"?"- ":`${c+1}. `;n.replaceRange(d,{line:c,ch:0})}})})}else{let{line:s}=n.getCursor();const o=wc(t),i=e.current.getLine(s),l=o+i;e.current.setSelection({line:s,ch:0},{line:s,ch:i.length}),e.current.replaceSelection(l)}e.current.focus()},Ib=(e,t)=>{let{line:n}=e.current.getCursor();const r=wc(t),s=e.current.getLine(n),o=s.replace(/#{1,6}\s/g,"").trim(),i=r+o;e.current.setSelection({line:n,ch:0},{line:n,ch:s.length}),e.current.replaceSelection(i),setTimeout(()=>{const l=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:l})},0)},Pb=(e,t)=>{let{line:n,ch:r}=e.current.getCursor();t.forEach((s,o)=>{let i=e.current.getLine(n).length;e.current.setCursor({line:n,ch:i}),(o>0||o===0&&r!==0)&&(i=e.current.getLine(n).length,e.current.setCursor({line:n,ch:i}),n++,e.current.replaceSelection(`
`)),s.mime.includes("image")?e.current.replaceSelection(`![${s.alt}](${s.url})`):e.current.replaceSelection(`[${s.alt}](${s.url})`)}),setTimeout(()=>e.current.focus(),0)},kb=(e,t,n,r,s)=>{const o=Ac(t,s),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:r}),e.current.replaceSelection(`
`),e.current.replaceSelection(o),t==="Code"){let{line:l}=e.current.getCursor();e.current.setCursor({line:l-1,ch:s.length})}e.current.replaceRange(i,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Lb=(e,t,n,r)=>{const s=jc(t),o=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:r}),e.current.replaceSelection(`
`),e.current.replaceSelection(s.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:i}=e.current.getCursor(),l=i-s.selection.end,c=i-s.selection.end-s.selection.start;e.current.setSelection({line:n,ch:c},{line:n,ch:l})}e.current.replaceRange(o,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},$b=(e,t)=>{const n=e.current.getSelection();let{line:r}=e.current.getCursor(),s=e.current.getLine(r).length;n?kb(e,t,r,s,n):Lb(e,t,r,s)},Rt=(0,ae.default)(pe.h)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,Nb=(0,ae.default)(Rt)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,Rc=(0,ae.default)(pe.o)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,Tc=(0,ae.default)(pe.h)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,Zb=(0,ae.default)(pe.o)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,zb=(0,ae.default)(wt.Y)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Ga=({onToggleExpand:e})=>{const{formatMessage:t}=(0,Ee.Z)();return(0,a.jsx)($.x,{padding:2,background:"neutral100",borderRadius:`0 0 ${4/16}rem ${4/16}rem`,children:(0,a.jsx)(T.k,{justifyContent:"flex-end",alignItems:"flex-end",children:(0,a.jsxs)(zb,{id:"expand",onClick:e,children:[(0,a.jsx)(L.Z,{children:t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})}),(0,a.jsx)(zo.Z,{})]})})})};Ga.defaultProps={onToggleExpand(){}},Ga.propTypes={onToggleExpand:u.func};const Ya=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:r,onActionClick:s,onToggleMediaLib:o,onTogglePreviewMode:i})=>{const[l,c]=(0,g.useState)(!1),{formatMessage:d}=(0,Ee.Z)(),h=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),m=(0,g.useRef)(),v=()=>{c(C=>!C)};return e||r?(0,a.jsxs)(T.k,{padding:2,background:"neutral100",justifyContent:"space-between",borderRadius:`${4/16}rem ${4/16}rem 0 0`,children:[(0,a.jsxs)(Mc,{children:[(0,a.jsxs)(dt.q4,{disabled:!0,placeholder:h,size:"S",label:h,children:[(0,a.jsx)(dt.ag,{value:"h1",children:"h1"}),(0,a.jsx)(dt.ag,{value:"h2",children:"h2"}),(0,a.jsx)(dt.ag,{value:"h3",children:"h3"}),(0,a.jsx)(dt.ag,{value:"h4",children:"h4"}),(0,a.jsx)(dt.ag,{value:"h5",children:"h5"}),(0,a.jsx)(dt.ag,{value:"h6",children:"h6"})]}),(0,a.jsxs)(Rc,{children:[(0,a.jsx)(Rt,{disabled:!0,label:"Bold",name:"Bold",icon:(0,a.jsx)(Er.Z,{})}),(0,a.jsx)(Rt,{disabled:!0,label:"Italic",name:"Italic",icon:(0,a.jsx)(Ar.Z,{})}),(0,a.jsx)(Rt,{disabled:!0,label:"Underline",name:"Underline",icon:(0,a.jsx)(jr.Z,{})})]}),(0,a.jsx)(Tc,{disabled:!0,label:"More",icon:(0,a.jsx)(ws.Z,{})})]}),!n&&(0,a.jsx)(De.z,{onClick:i,variant:"tertiary",children:d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})})]}):(0,a.jsxs)(T.k,{padding:2,background:"neutral100",justifyContent:"space-between",borderRadius:`${4/16}rem ${4/16}rem 0 0`,children:[(0,a.jsxs)(Mc,{children:[(0,a.jsxs)(dt.q4,{placeholder:h,label:h,size:"S",onChange:C=>s(C,t),children:[(0,a.jsx)(dt.ag,{value:"h1",children:"h1"}),(0,a.jsx)(dt.ag,{value:"h2",children:"h2"}),(0,a.jsx)(dt.ag,{value:"h3",children:"h3"}),(0,a.jsx)(dt.ag,{value:"h4",children:"h4"}),(0,a.jsx)(dt.ag,{value:"h5",children:"h5"}),(0,a.jsx)(dt.ag,{value:"h6",children:"h6"})]}),(0,a.jsxs)(Rc,{children:[(0,a.jsx)(Rt,{onClick:()=>s("Bold",t),label:"Bold",name:"Bold",icon:(0,a.jsx)(Er.Z,{})}),(0,a.jsx)(Rt,{onClick:()=>s("Italic",t),label:"Italic",name:"Italic",icon:(0,a.jsx)(Ar.Z,{})}),(0,a.jsx)(Rt,{onClick:()=>s("Underline",t),label:"Underline",name:"Underline",icon:(0,a.jsx)(jr.Z,{})})]}),(0,a.jsx)(Tc,{ref:m,onClick:v,label:"More",icon:(0,a.jsx)(ws.Z,{})}),l&&(0,a.jsx)(tt.J2,{onDismiss:v,centered:!0,source:m,spacing:4,children:(0,a.jsxs)(T.k,{children:[(0,a.jsxs)(Zb,{children:[(0,a.jsx)(Rt,{onClick:()=>s("Strikethrough",t,v),label:"Strikethrough",name:"Strikethrough",icon:(0,a.jsx)(Es.Z,{})}),(0,a.jsx)(Rt,{onClick:()=>s("BulletList",t,v),label:"BulletList",name:"BulletList",icon:(0,a.jsx)(ms.Z,{})}),(0,a.jsx)(Rt,{onClick:()=>s("NumberList",t,v),label:"NumberList",name:"NumberList",icon:(0,a.jsx)(Ho.Z,{})})]}),(0,a.jsxs)(pe.o,{children:[(0,a.jsx)(Rt,{onClick:()=>s("Code",t,v),label:"Code",name:"Code",icon:(0,a.jsx)(Br.Z,{})}),(0,a.jsx)(Rt,{onClick:()=>{v(),o()},label:"Image",name:"Image",icon:(0,a.jsx)(bs.Z,{})}),(0,a.jsx)(Nb,{onClick:()=>s("Link",t,v),label:"Link",name:"Link",icon:(0,a.jsx)(Ds.Z,{})}),(0,a.jsx)(Rt,{onClick:()=>s("Quote",t,v),label:"Quote",name:"Quote",icon:(0,a.jsx)(xs.Z,{})})]})]})})]}),i&&(0,a.jsx)(De.z,{onClick:i,variant:"tertiary",children:d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"})})]})};Ya.defaultProps={isPreviewMode:!1,onActionClick(){},onToggleMediaLib(){},onTogglePreviewMode:void 0},Ya.propTypes={disabled:u.bool.isRequired,editorRef:u.shape({current:u.any}).isRequired,isExpandMode:u.bool.isRequired,isPreviewMode:u.bool,onActionClick:u.func,onToggleMediaLib:u.func,onTogglePreviewMode:u.func};const Mc=(0,ae.default)(T.k)`
  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,Wb=(0,ae.default)($.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Ub=(0,ae.default)(L.Z)`
  line-height: 0;
`,Qa=(0,g.forwardRef)(({hint:e,disabled:t,error:n,intlLabel:r,labelAction:s,name:o,onChange:i,placeholder:l,value:c,required:d},h)=>{const{formatMessage:m}=(0,Ee.Z)(),v=(0,g.useRef)(null),C=(0,g.useRef)(null),[D,f]=(0,g.useState)(!1),[y,x]=(0,g.useState)(!1),[B,A]=(0,g.useState)(!1),{components:S}=(0,M.useLibrary)(),E=S["media-library"],j=()=>x(z=>!z),R=()=>f(z=>!z),Z=()=>{f(!1),A(z=>!z)},F=(z,U,k)=>{switch(z){case"Link":case"Strikethrough":{Fc(U,z),k();break}case"Code":case"Quote":{$b(U,z),k();break}case"Bold":case"Italic":case"Underline":{Fc(U,z);break}case"BulletList":case"NumberList":{Sb(U,z),k();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{Ib(U,z);break}}},P=z=>{const U=z.map(k=>({alt:k.alternativeText||k.name,url:(0,M.prefixFileUrlWithBackendUrl)(k.url),mime:k.mime}));Pb(C,U),x(!1)},Q=l?m({id:l.id,defaultMessage:l.defaultMessage},{...l.values}):"",I=r.id?m({id:r.id,defaultMessage:r.defaultMessage},{...r.values}):o;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,a.jsxs)(T.k,{gap:1,children:[(0,a.jsxs)(L.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:[I,d&&(0,a.jsx)(Ub,{textColor:"danger600",children:"*"})]}),s&&(0,a.jsx)(Wb,{paddingLeft:1,children:s})]}),(0,a.jsxs)(Ka,{isExpandMode:B,error:n,previewContent:c,onCollapse:Z,children:[(0,a.jsx)(Ya,{isExpandMode:B,editorRef:C,isPreviewMode:D,onActionClick:F,onToggleMediaLib:j,onTogglePreviewMode:B?void 0:R,disabled:t}),(0,a.jsx)(qa,{disabled:t,isExpandMode:B,editorRef:C,error:n,isPreviewMode:D,name:o,onChange:i,placeholder:Q,textareaRef:v,value:c,ref:h}),!B&&(0,a.jsx)(Ga,{onToggleExpand:Z})]}),(0,a.jsx)(_r,{hint:e,name:o,error:n})]}),n&&(0,a.jsx)($.x,{paddingTop:1,children:(0,a.jsx)(L.Z,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0,children:n})}),y&&(0,a.jsx)(E,{onClose:j,onSelectAssets:P})]})});Qa.defaultProps={disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:"",hint:""},Qa.propTypes={hint:u.oneOfType([u.string,u.array]),disabled:u.bool,error:u.string,intlLabel:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}).isRequired,labelAction:u.element,name:u.string.isRequired,onChange:u.func.isRequired,placeholder:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}),required:u.bool,value:u.string};function Vb(e,t){return n=>{const r=t(n.keys);return(0,a.jsx)(e,{...n,...r})}}const Hb=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],qb=(e="")=>{switch(jC(e)){case"blocks":return"blocks";case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}};function Kb(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:r,modifiedData:s,onChange:o,readActionAllowedFields:i,shouldNotRunValidations:l,updateActionAllowedFields:c}=(0,M.useCMEditViewDataManager)(),d=(0,g.useMemo)(()=>r?t:c,[r,t,c]),h=(0,g.useMemo)(()=>r?[]:i,[r,i]),m=le(s,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:r,onChange:o,readableFields:h,shouldNotRunValidations:l,value:m}}const Oc=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];function Ja({allowedFields:e,componentUid:t,fieldSchema:n,formErrors:r,isCreatingEntry:s,keys:o,labelAction:i,metadatas:l,onChange:c,readableFields:d,shouldNotRunValidations:h,queryInfos:m,value:v,size:C,customFieldInputs:D}){const{fields:f}=(0,M.useLibrary)(),{formatMessage:y}=(0,Ee.Z)(),{contentType:x}=En(),B=(0,g.useMemo)(()=>!le(l,"editable",!0),[l]),{type:A,customField:S}=n,E=le(r,[o],null),j=(0,g.useMemo)(()=>Au(o),[o]),R=(0,g.useMemo)(()=>{const ne=$o(n,h?[...Oc,"required","minLength"]:Oc),ue=n.regex||null;if(ue){const w=new RegExp(ue);w&&(ne.regex=w)}return ne},[n,h]),Z=(0,g.useMemo)(()=>le(R,["required"],!1),[R]),F=(0,g.useMemo)(()=>{const ne=le(x,["attributes"],{});return le(ne,[j[0],"type"],null)==="dynamiczone"},[x,j]),P=qb(A),Q=A==="media"&&!v?[]:v,I=(0,g.useMemo)(()=>{const ne=j.join(".");if(e.includes(ne))return!0;if(F)return e.includes(j[0]);if(j.length>1){const w=er(j,j.length-1).join(".");return e.includes(w)}return!1},[e,j,F]),z=(0,g.useMemo)(()=>{const ne=j.join(".");if(d.includes(ne))return!0;if(F)return d.includes(j[0]);if(j.length>1){const w=er(j,j.length-1).join(".");return d.includes(w)}return!1},[d,j,F]),U=(0,g.useMemo)(()=>z||I,[I,z]),k=(0,g.useMemo)(()=>s?B:z&&!I?!0:B,[B,s,I,z]),N=(0,g.useMemo)(()=>Hb(n.enum||[],Z),[n,Z]),{label:q,description:V,placeholder:re,visible:J}=l;if(J===!1)return null;if(!U)return(0,a.jsx)(M.NotAllowedInput,{description:V?{id:V,defaultMessage:V}:null,intlLabel:{id:q,defaultMessage:q},labelAction:i,error:E&&y(E),name:o,required:Z});if(A==="relation")return(0,a.jsx)(Db,{...l,...n,componentUid:t,description:l.description?y({id:l.description,defaultMessage:l.description}):void 0,intlLabel:{id:l.label,defaultMessage:l.label},labelAction:i,isUserAllowedToEditField:I,isUserAllowedToReadField:z,name:o,placeholder:l.placeholder?{id:l.placeholder,defaultMessage:l.placeholder}:null,queryInfos:m,size:C,value:v,error:E&&y(E)});const oe={uid:ka,media:f.media,wysiwyg:Qa,blocks:Pa,...f,...D};return(0,a.jsx)(M.GenericInput,{attribute:n,autoComplete:"new-password",intlLabel:{id:q,defaultMessage:q},isNullable:P==="bool"&&[null,void 0].includes(n.default),description:V?{id:V,defaultMessage:V}:null,disabled:k,error:E,labelAction:i,contentTypeUID:x.uid,customInputs:oe,multiple:n.multiple||!1,name:o,onChange:c,options:N,placeholder:re?{id:re,defaultMessage:re}:null,required:n.required||!1,step:Gb(A),type:S||P,value:Q,withDefaultValue:!1})}Ja.defaultProps={componentUid:void 0,formErrors:{},labelAction:void 0,size:void 0,value:null,queryInfos:{},customFieldInputs:{}},Ja.propTypes={allowedFields:u.array.isRequired,componentUid:u.string,fieldSchema:u.object.isRequired,formErrors:u.object,keys:u.string.isRequired,isCreatingEntry:u.bool.isRequired,labelAction:u.element,metadatas:u.object.isRequired,onChange:u.func.isRequired,readableFields:u.array.isRequired,size:u.number,shouldNotRunValidations:u.bool.isRequired,value:u.any,queryInfos:u.shape({containsKey:u.string,defaultParams:u.object,endPoint:u.string}),customFieldInputs:u.object};const Gb=e=>{switch(e){case"float":case"decimal":return .01;default:return 1}},Yb=(0,g.memo)(Ja,Ot),Xa=Vb(Yb,Kb),_a=({componentUid:e,isFromDynamicZone:t,isNested:n,name:r})=>{const{getComponentLayout:s}=En(),i=(0,g.useMemo)(()=>s(e),[e,s]).layouts.edit,{lazyComponentStore:l}=Fa();return(0,a.jsx)($.x,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":"",children:(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",gap:6,children:i.map((c,d)=>(0,a.jsx)(_.r,{gap:4,children:c.map(({name:h,size:m,metadatas:v,fieldSchema:C,queryInfos:D})=>{const f=C.type==="component",y=`${r}.${h}`;if(f){const x=C.component;return(0,a.jsx)(ee.P,{col:m,s:12,xs:12,children:(0,a.jsx)(ss,{componentUid:x,intlLabel:{id:v.label,defaultMessage:v.label},isNested:!0,isRepeatable:C.repeatable,max:C.max,min:C.min,name:y,required:C.required||!1})},h)}return(0,a.jsx)(ee.P,{col:m,s:12,xs:12,children:(0,a.jsx)(Xa,{componentUid:e,keys:y,fieldSchema:C,metadatas:v,queryInfos:D,size:m,customFieldInputs:l})},h)})},d))})})};_a.defaultProps={isFromDynamicZone:!1,isNested:!1},_a.propTypes={componentUid:u.string.isRequired,isFromDynamicZone:u.bool,isNested:u.bool,name:u.string.isRequired};const Qb=(0,ae.default)($.x)`
  overflow: hidden;
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,Jb=(0,ae.default)($.x)`
  border-bottom: none;

  /* add the borders and make sure the top is transparent to avoid jumping with the hover effect  */
  & > div > div {
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    border-top-color: transparent;
  }

  /* the top accordion _does_ need a border though */
  & > div:first-child > div {
    border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
  }

  /* Reset all the border-radius' */
  & > div > div,
  & > div > div > div {
    border-radius: unset;
  }

  /* Give the border radius back to the first accordion */
  & > div:first-child > div,
  & > div:first-child > div > div {
    border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
  }

  & > div > div[data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }
`,eo=({children:e,error:t})=>{const{formatMessage:n}=(0,Ee.Z)();return(0,a.jsxs)(Lt.k,{attributeName:"data-strapi-accordion-toggle",children:[e,t&&(0,a.jsx)($.x,{paddingTop:1,children:(0,a.jsx)(L.Z,{variant:"pi",textColor:"danger600",children:n({id:t.id,defaultMessage:t.defaultMessage},{...t.values})})})]})};eo.defaultProps={error:void 0},eo.propTypes={children:u.node.isRequired,error:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object})};const Xb=ae.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,_b=()=>(0,a.jsx)(Xb,{padding:6,background:"primary100"}),ex=(0,ae.default)(pe.h)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,tx=(0,ae.default)(T.k)`
  & .drag-handle {
    background: unset;

    svg {
      path {
        fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:void 0};
      }
    }

    &:hover {
      svg {
        path {
          /* keeps the hover style of the accordion */
          fill: ${({theme:e})=>e.colors.primary600};
        }
      }
    }
  }
`,to=({componentFieldName:e,componentUid:t,fields:n,index:r,isOpen:s,isReadOnly:o,mainField:i,moveComponentField:l,onClickToggle:c,toggleCollapses:d,onGrabItem:h,onDropItem:m,onCancel:v})=>{const{modifiedData:C,removeRepeatableField:D,triggerFormValidation:f}=(0,M.useCMEditViewDataManager)(),y=du(le(C,[...e.split("."),i],"")),x=(0,g.useRef)(null),{formatMessage:B}=(0,Ee.Z)(),A=e.split(".").slice(0,-1).join("."),[{handlerId:S,isDragging:E,handleKeyDown:j},R,Z,F,P]=(0,W.u)(!o,{type:`${It.COMPONENT}_${A}`,index:r,item:{displayedValue:y},onMoveItem:l,onStart(){d()},onEnd(){f()},onGrabItem:h,onDropItem:m,onCancel:v});(0,g.useEffect)(()=>{P((0,_n.rX)(),{captureDraggingState:!1})},[P,r]);const Q=(0,W.c)(x,F),I=(0,W.c)(R,Z),{lazyComponentStore:z}=Fa();return(0,a.jsx)($.x,{ref:I,children:E?(0,a.jsx)(_b,{}):(0,a.jsxs)(mt.U,{expanded:s,onToggle:c,id:e,size:"S",children:[(0,a.jsx)(ut.B,{action:o?null:(0,a.jsxs)(tx,{gap:0,expanded:s,children:[(0,a.jsx)(ex,{expanded:s,noBorder:!0,onClick:()=>{D(e),d()},label:B({id:(0,W.g)("containers.Edit.delete"),defaultMessage:"Delete"}),icon:(0,a.jsx)(qt.Z,{})}),(0,a.jsx)(pe.h,{className:"drag-handle",ref:Q,forwardedAs:"div",role:"button",noBorder:!0,tabIndex:0,onClick:U=>U.stopPropagation(),"data-handler-id":S,label:B({id:(0,W.g)("components.DragHandle-label"),defaultMessage:"Drag"}),onKeyDown:j,children:(0,a.jsx)(on.Z,{})})]}),title:y,togglePosition:"left"}),(0,a.jsx)(vt.v,{children:(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",background:"neutral100",padding:6,gap:6,children:n.map((U,k)=>(0,a.jsx)(_.r,{gap:4,children:U.map(({name:N,fieldSchema:q,metadatas:V,queryInfos:re,size:J})=>{const oe=q.type==="component",ne=`${e}.${N}`;if(oe){const ue=q.component;return(0,a.jsx)(ee.P,{col:J,s:12,xs:12,children:(0,a.jsx)(ss,{componentUid:ue,intlLabel:{id:V.label,defaultMessage:V.label},isRepeatable:q.repeatable,isNested:!0,name:ne,max:q.max,min:q.min,required:q.required})},N)}return(0,a.jsx)(ee.P,{col:J,s:12,xs:12,children:(0,a.jsx)(Xa,{componentUid:t,fieldSchema:q,keys:ne,metadatas:V,queryInfos:re,size:J,customFieldInputs:z})},ne)})},k))})})]})})};to.defaultProps={componentUid:void 0,fields:[],isReadOnly:!1,isOpen:!1,onGrabItem:void 0,onDropItem:void 0,onCancel:void 0,toggleCollapses(){}},to.propTypes={componentFieldName:u.string.isRequired,componentUid:u.string,fields:u.array,index:u.number.isRequired,isOpen:u.bool,isReadOnly:u.bool,mainField:u.string.isRequired,moveComponentField:u.func.isRequired,onGrabItem:u.func,onDropItem:u.func,onCancel:u.func,onClickToggle:u.func.isRequired,toggleCollapses:u.func};const nx=(0,g.memo)(to);function rx(e,t={}){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}const sx=(0,ae.default)(hs.A)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,no=({componentUid:e,componentValue:t,componentValueLength:n,isReadOnly:r,max:s,min:o,name:i})=>{const{addRepeatableComponentToField:l,formErrors:c,moveComponentField:d}=(0,M.useCMEditViewDataManager)(),h=(0,M.useNotification)(),{formatMessage:m}=(0,Ee.Z)(),[v,C]=(0,g.useState)(""),[D,f]=(0,g.useState)(""),{getComponentLayout:y,components:x}=En(),B=(0,g.useMemo)(()=>y(e),[e,y]),A=(0,M.useQuery)(),S=(0,g.useMemo)(()=>{if(A.has("field")){const J=A.get("field"),[,oe]=J.split(`${i}.`);if(le(t,oe,void 0)!==void 0){const ne=oe.split(".");return le(t,ne[0],void 0)?.__temp_key__}}},[t,A,i]);(0,g.useEffect)(()=>{typeof S=="number"&&C(S)},[S]);const E=(0,g.useMemo)(()=>fa(t||[])+1,[t]),j=rx(i,c),R=o-n,Z=le(c,i,{id:""}).id.includes("min"),F=()=>{C("")},P=()=>{r||(n<s?(l(i,B,x,Z),C(E)):n>=s&&h({type:"info",message:{id:(0,W.g)("components.notification.info.maximum-requirement")}}))},Q=(J,oe)=>{f(m({id:(0,W.g)("dnd.reorder"),defaultMessage:"{item}, moved. New position in list: {position}."},{item:`${i}.${oe}`,position:U(J)})),d({name:i,newIndex:J,currentIndex:oe})},I=le(B,["settings","mainField"],"id"),z=J=>()=>{C(v===J?"":J)},U=J=>`${J+1} of ${n}`,k=J=>{f(m({id:(0,W.g)("dnd.cancel-item"),defaultMessage:"{item}, dropped. Re-order cancelled."},{item:`${i}.${J}`}))},N=J=>{f(m({id:(0,W.g)("dnd.grab-item"),defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:`${i}.${J}`,position:U(J)}))},q=J=>{f(m({id:(0,W.g)("dnd.drop-item"),defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:`${i}.${J}`,position:U(J)}))};let V=c[i];if(Z?V={id:(0,W.g)("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:R}}:j.some(J=>J.split(".").length>1)&&!Z&&(V={id:(0,W.g)("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),n===0)return(0,a.jsx)(Xr,{error:V,isReadOnly:r,onClick:P});const re=`${i}-item-instructions`;return(0,a.jsxs)($.x,{hasRadius:!0,children:[(0,a.jsx)(sn.T,{id:re,children:m({id:(0,W.g)("dnd.instructions"),defaultMessage:"Press spacebar to grab and re-order"})}),(0,a.jsx)(sn.T,{"aria-live":"assertive",children:D}),(0,a.jsxs)(eo,{error:V,ariaDescribedBy:re,children:[(0,a.jsx)(Jb,{"aria-describedby":re,children:t.map(({__temp_key__:J},oe)=>(0,a.jsx)(nx,{componentFieldName:`${i}.${oe}`,componentUid:e,fields:B.layouts.edit,index:oe,isOpen:v===J,isReadOnly:r,mainField:I,moveComponentField:Q,onClickToggle:z(J),toggleCollapses:F,onCancel:k,onDropItem:q,onGrabItem:N},J))}),(0,a.jsx)(Qb,{children:(0,a.jsx)(T.k,{justifyContent:"center",height:"48px",background:"neutral0",children:(0,a.jsx)(sx,{disabled:r,onClick:P,startIcon:(0,a.jsx)(Fn.Z,{}),children:m({id:(0,W.g)("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})})})})]})]})};no.defaultProps={componentValue:null,componentValueLength:0,isReadOnly:!1,max:1/0,min:0},no.propTypes={componentUid:u.string.isRequired,componentValue:u.oneOfType([u.array,u.object]),componentValueLength:u.number,isReadOnly:u.bool,max:u.number,min:u.number,name:u.string.isRequired};const ax=(0,g.memo)(no),ox=(0,ae.default)($.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,ro=({intlLabel:e,id:t,labelAction:n,name:r,numberOfEntries:s,showNumberOfEntries:o,required:i})=>{const{formatMessage:l}=(0,Ee.Z)(),c=e?.id?l(e):r;return(0,a.jsx)($.x,{paddingBottom:1,children:(0,a.jsxs)(T.k,{children:[(0,a.jsxs)(L.Z,{textColor:"neutral800",htmlFor:t||r,variant:"pi",fontWeight:"bold",as:"label",children:[c,o&&(0,a.jsxs)(a.Fragment,{children:["\xA0(",s,")"]}),i&&(0,a.jsx)(L.Z,{textColor:"danger600",children:"*"})]}),n&&(0,a.jsx)(ox,{paddingLeft:1,children:n})]})})};ro.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},ro.propTypes={id:u.string,intlLabel:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}).isRequired,labelAction:u.element,name:u.string.isRequired,numberOfEntries:u.number,required:u.bool,showNumberOfEntries:u.bool};function ix(e,t){return n=>{const r=t(n);return(0,a.jsx)(e,{...n,...r})}}function lx({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:r,isCreatingEntry:s,modifiedData:o,removeComponentFromField:i,readActionAllowedFields:l,updateActionAllowedFields:c,formErrors:d}=(0,M.useCMEditViewDataManager)(),{contentType:h}=En(),m=(0,g.useMemo)(()=>{const B=le(h,["attributes"],{});return Object.keys(B).filter(S=>le(B,[S,"type"],"")==="dynamiczone")},[h]),v=(0,g.useMemo)(()=>s?r:c,[s,r,c]),C=le(o,t,null),D=(0,g.useMemo)(()=>Au(t),[t]),f=(0,g.useMemo)(()=>e&&s||v.filter(S=>S===D[0]).length>0?!0:v.map(S=>S.split(".")).filter(S=>S.length<D.length?!1:er(S,D.length).join(".")===D.join(".")).length>0,[e,s,v,D]),y=(0,g.useMemo)(()=>e||m.includes(D[0])?!0:(s?[]:l).map(S=>S.split(".")).filter(S=>S.length<D.length?!1:er(S,D.length).join(".")===D.join(".")).length>0,[e,m,D,s,l]),x=(0,g.useMemo)(()=>s||f?!1:y,[f,y,s]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:f,hasChildrenReadableFields:y,isCreatingEntry:s,isReadOnly:x,removeComponentFromField:i,componentValue:C}}const so=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:r,isFromDynamicZone:s,isRepeatable:o,isNested:i,labelAction:l,max:c,min:d,name:h,hasChildrenAllowedFields:m,hasChildrenReadableFields:v,isReadOnly:C,componentValue:D,removeComponentFromField:f,required:y})=>{const{formatMessage:x}=(0,Ee.Z)(),B=dg(D),A=D!==null||s,S=!o&&A&&!s&&m,{getComponentLayout:E,components:j}=En(),R=(0,g.useMemo)(()=>E(t),[t,E]);if(!m&&r)return(0,a.jsx)(M.NotAllowedInput,{labelAction:l,intlLabel:n,name:h});if(!m&&!r&&!v)return(0,a.jsx)(M.NotAllowedInput,{labelAction:l,intlLabel:n,name:h});const Z=()=>{e(h,R,j)};return(0,a.jsxs)($.x,{children:[(0,a.jsxs)(T.k,{justifyContent:"space-between",children:[n&&(0,a.jsx)(ro,{intlLabel:n,labelAction:l,name:h,numberOfEntries:B,showNumberOfEntries:o,required:y}),S&&(0,a.jsx)(pe.h,{label:x({id:(0,W.g)("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:(0,a.jsx)(qt.Z,{}),noBorder:!0,onClick:()=>{f(h,t)}})]}),(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:1,children:[!o&&!A&&(0,a.jsx)(Xr,{isReadOnly:C,onClick:Z}),!o&&A&&(0,a.jsx)(_a,{componentUid:t,isFromDynamicZone:s,isNested:i,name:h}),o&&(0,a.jsx)(ax,{componentValue:D,componentValueLength:B,componentUid:t,isReadOnly:C,max:c,min:d,name:h})]})]})};so.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},so.propTypes={addNonRepeatableComponentToField:u.func.isRequired,componentUid:u.string.isRequired,componentValue:u.oneOfType([u.object,u.array]),hasChildrenAllowedFields:u.bool,hasChildrenReadableFields:u.bool,isCreatingEntry:u.bool.isRequired,isFromDynamicZone:u.bool,isReadOnly:u.bool,isRepeatable:u.bool,isNested:u.bool,intlLabel:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired,values:u.object}),labelAction:u.element,max:u.number,min:u.number,name:u.string.isRequired,removeComponentFromField:u.func.isRequired,required:u.bool};const ux=(0,g.memo)(so,Ot),ss=ix(ux,lx),ao=({componentUid:e,formErrors:t,index:n,isFieldAllowed:r,name:s,onRemoveComponentClick:o,onMoveComponent:i,onGrabItem:l,onDropItem:c,onCancel:d,dynamicComponentsByCategory:h,onAddComponent:m})=>{const[v,C]=(0,g.useState)(!0),{formatMessage:D}=(0,Ee.Z)(),{getComponentLayout:f}=En(),{modifiedData:y}=(0,M.useCMEditViewDataManager)(),{icon:x,friendlyName:B,mainValue:A}=(0,g.useMemo)(()=>{const N=f(e),{info:{icon:q,displayName:V}}=N,re=le(N,["settings","mainField"],"id"),J=le(y,[s,n,re])??"",oe=re==="id"?"":String(J).trim(),ne=oe.length>0?` - ${oe}`:oe;return{friendlyName:V,icon:q,mainValue:ne}},[e,f,y,s,n]),S=Object.keys(t).filter(N=>{const q=N.split(".");return`${q[0]}.${q[1]}`==`${s}.${n}`});let E;S.length>0&&(E=D({id:(0,W.g)("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"}));const j=()=>{C(N=>!N)},[{handlerId:R,isDragging:Z,handleKeyDown:F},P,Q,I,z]=(0,W.u)(r,{type:`${It.DYNAMIC_ZONE}_${s}`,index:n,item:{displayedValue:`${B}${A}`,icon:x},onMoveItem:i,onGrabItem:l,onDropItem:c,onCancel:d});(0,g.useEffect)(()=>{z((0,_n.rX)(),{captureDraggingState:!1})},[z,n]);const U=(0,W.c)(P,Q),k=r?(0,a.jsxs)(cx,{gap:0,expanded:v,children:[(0,a.jsx)(dx,{noBorder:!0,label:D({id:(0,W.g)("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:B}),onClick:o,children:(0,a.jsx)(qt.Z,{})}),(0,a.jsx)(pe.h,{forwardedAs:"div",role:"button",noBorder:!0,tabIndex:0,onClick:N=>N.stopPropagation(),"data-handler-id":R,ref:I,label:D({id:(0,W.g)("components.DragHandle-label"),defaultMessage:"Drag"}),onKeyDown:F,children:(0,a.jsx)(on.Z,{})}),(0,a.jsxs)(_e.fC,{children:[(0,a.jsxs)(_e.xz,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2,children:[(0,a.jsx)(ws.Z,{"aria-hidden":!0,focusable:!1}),(0,a.jsx)(sn.T,{as:"span",children:D({id:(0,W.g)("components.DynamicZone.more-actions"),defaultMessage:"More actions"})})]}),(0,a.jsxs)(_e.VY,{children:[(0,a.jsxs)(_e.rl,{children:[(0,a.jsx)(_e.fF,{children:D({id:(0,W.g)("components.DynamicZone.add-item-above"),defaultMessage:"Add component above"})}),(0,a.jsx)(_e.tu,{children:Object.entries(h).map(([N,q])=>(0,a.jsxs)(g.Fragment,{children:[(0,a.jsx)(_e.__,{children:N}),q.map(({componentUid:V,info:{displayName:re}})=>(0,a.jsx)(qo.sN,{onSelect:()=>m(V,n),children:re},V))]},N))})]}),(0,a.jsxs)(_e.rl,{children:[(0,a.jsx)(_e.fF,{children:D({id:(0,W.g)("components.DynamicZone.add-item-below"),defaultMessage:"Add component below"})}),(0,a.jsx)(_e.tu,{children:Object.entries(h).map(([N,q])=>(0,a.jsxs)(g.Fragment,{children:[(0,a.jsx)(_e.__,{children:N}),q.map(({componentUid:V,info:{displayName:re}})=>(0,a.jsx)(qo.sN,{onSelect:()=>m(V,n+1),children:re},V))]},N))})]})]})]})]}):null;return(0,a.jsxs)(mx,{as:"li",width:"100%",children:[(0,a.jsx)(T.k,{justifyContent:"center",children:(0,a.jsx)(gx,{background:"neutral200"})}),(0,a.jsx)(fx,{ref:U,hasRadius:!0,children:Z?(0,a.jsx)(px,{padding:6,background:"primary100"}):(0,a.jsxs)(mt.U,{expanded:v,onToggle:j,size:"S",error:E,children:[(0,a.jsx)(ut.B,{startIcon:(0,a.jsx)(fr,{icon:x,showBackground:!1,size:"S"}),action:k,title:`${B}${A}`,togglePosition:"left"}),(0,a.jsx)(vt.v,{children:(0,a.jsx)(hx,{background:"neutral0",children:(0,a.jsx)(ss,{componentUid:e,icon:x,name:`${s}.${n}`,isFromDynamicZone:!0})})})]})})]})},cx=(0,ae.default)(T.k)`
  /* 
    we need to remove the background from the button but we can't 
    wrap the element in styled because it breaks the forwardedAs which
    we need for drag handler to work on firefox
  */
  div[role='button'] {
    background: transparent;
  }
`,dx=(0,ae.default)(pe.h)`
  background-color: transparent;

  svg path {
    fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
  }
`,fx=(0,ae.default)($.x)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,hx=(0,ae.default)($.x)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,gx=(0,ae.default)($.x)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,px=ae.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,mx=(0,ae.default)($.x)`
  list-style: none;
  padding: 0;
  margin: 0;
`;ao.defaultProps={dynamicComponentsByCategory:{},formErrors:{},index:0,isFieldAllowed:!0,onAddComponent:void 0,onGrabItem:void 0,onDropItem:void 0,onCancel:void 0},ao.propTypes={componentUid:u.string.isRequired,dynamicComponentsByCategory:u.shape({components:u.arrayOf(u.shape({componentUid:u.string.isRequired,info:u.object}))}),formErrors:u.object,index:u.number,isFieldAllowed:u.bool,name:u.string.isRequired,onAddComponent:u.func,onGrabItem:u.func,onDropItem:u.func,onCancel:u.func,onMoveComponent:u.func.isRequired,onRemoveComponentClick:u.func.isRequired};const oo=({label:e,labelAction:t,name:n,numberOfComponents:r,required:s,intlDescription:o})=>{const{formatMessage:i}=(0,Ee.Z)(),l=i({id:e||n,defaultMessage:e||n});return(0,a.jsx)(T.k,{justifyContent:"center",children:(0,a.jsx)($.x,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,borderRadius:"26px",background:"neutral0",shadow:"filterShadow",color:"neutral500",children:(0,a.jsxs)(T.k,{direction:"column",justifyContent:"center",children:[(0,a.jsxs)(T.k,{maxWidth:(0,M.pxToRem)(356),children:[(0,a.jsxs)(L.Z,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0,children:[l,"\xA0"]}),(0,a.jsxs)(L.Z,{variant:"pi",textColor:"neutral600",fontWeight:"bold",children:["(",r,")"]}),s&&(0,a.jsx)(L.Z,{textColor:"danger600",children:"*"}),t&&(0,a.jsx)($.x,{paddingLeft:1,children:t})]}),o&&(0,a.jsx)($.x,{paddingTop:1,maxWidth:(0,M.pxToRem)(356),children:(0,a.jsx)(L.Z,{variant:"pi",textColor:"neutral600",ellipsis:!0,children:i(o)})})]})})})};oo.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,numberOfComponents:0,required:!1},oo.propTypes={intlDescription:u.shape({id:u.string.isRequired,defaultMessage:u.string.isRequired}),label:u.string,labelAction:u.element,name:u.string.isRequired,numberOfComponents:u.number,required:u.bool};const io=({name:e,labelAction:t,fieldSchema:n,metadatas:r})=>{const{max:s=1/0,min:o=-1/0,components:i=[],required:l=!1}=n,[c,d]=(0,g.useState)(!1),[h,m]=(0,g.useState)(""),{addComponentToDynamicZone:v,createActionAllowedFields:C,isCreatingEntry:D,formErrors:f,modifiedData:y,moveComponentField:x,removeComponentFromDynamicZone:B,readActionAllowedFields:A,updateActionAllowedFields:S}=(0,M.useCMEditViewDataManager)(),E=(0,g.useMemo)(()=>(y?.[e]??[]).map(H=>({componentUid:H.__component,id:H.id??H.__temp_key__})),[y,e]),{getComponentLayout:j,components:R}=En(),Z=(0,g.useMemo)(()=>i.reduce((H,ie)=>{const{category:Ae,info:Me,attributes:Le}=j(ie),Ve={componentUid:ie,info:Me,attributes:Le};return H[Ae]||(H[Ae]=[]),H[Ae]=[...H[Ae],Ve],H},{}),[i,j]),{formatMessage:F}=(0,Ee.Z)(),P=(0,M.useNotification)(),Q=(0,g.useMemo)(()=>(D?C:S).includes(e),[e,D,C,S]),I=(0,g.useMemo)(()=>(D?[]:A).includes(e),[e,D,A]),z=E.length,U=r.description?{id:r.description,defaultMessage:r.description}:null,k=f[e],N=o-z,q=!!k,V=(H,ie)=>{d(!1);const Ae=j(H);v(e,Ae,R,q,ie)},re=()=>{z<s?d(H=>!H):P({type:"info",message:{id:(0,W.g)("components.notification.info.maximum-requirement")}})},J=(H,ie)=>{m(F({id:(0,W.g)("dnd.reorder"),defaultMessage:"{item}, moved. New position in list: {position}."},{item:`${e}.${ie}`,position:oe(H)})),x({name:e,newIndex:H,currentIndex:ie})},oe=H=>`${H+1} of ${E.length}`,ne=H=>{m(F({id:(0,W.g)("dnd.cancel-item"),defaultMessage:"{item}, dropped. Re-order cancelled."},{item:`${e}.${H}`}))},ue=H=>{m(F({id:(0,W.g)("dnd.grab-item"),defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:`${e}.${H}`,position:oe(H)}))},w=H=>{m(F({id:(0,W.g)("dnd.drop-item"),defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:`${e}.${H}`,position:oe(H)}))},X=(H,ie)=>()=>{B(H,ie)},Y=()=>c?F({id:"app.utils.close-label",defaultMessage:"Close"}):q&&k.id.includes("max")?F({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."}):q&&k.id.includes("min")?F({id:(0,W.g)("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:N}):F({id:(0,W.g)("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:r.label||e});if(!Q&&(D||!I&&!D))return(0,a.jsx)(M.NotAllowedInput,{description:U,intlLabel:{id:r.label,defaultMessage:r.label},labelAction:t,name:e});const se=`${e}-item-instructions`;return(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:6,children:[z>0&&(0,a.jsxs)($.x,{children:[(0,a.jsx)(oo,{intlDescription:U,label:r.label,labelAction:t,name:e,numberOfComponents:z,required:l}),(0,a.jsx)(sn.T,{id:se,children:F({id:(0,W.g)("dnd.instructions"),defaultMessage:"Press spacebar to grab and re-order"})}),(0,a.jsx)(sn.T,{"aria-live":"assertive",children:h}),(0,a.jsx)("ol",{"aria-describedby":se,children:E.map(({componentUid:H,id:ie},Ae)=>(0,a.jsx)(ao,{componentUid:H,formErrors:f,index:Ae,isFieldAllowed:Q,name:e,onMoveComponent:J,onRemoveComponentClick:X(e,Ae),onCancel:ne,onDropItem:w,onGrabItem:ue,onAddComponent:V,dynamicComponentsByCategory:Z},`${H}-${ie}`))})]}),(0,a.jsx)(T.k,{justifyContent:"center",children:(0,a.jsx)(Ba,{hasError:q,isDisabled:!Q,isOpen:c,onClick:re,children:Y()})}),(0,a.jsx)(wa,{dynamicComponentsByCategory:Z,isOpen:c,onClickAddComponent:V})]})};io.defaultProps={fieldSchema:{},labelAction:null},io.propTypes={fieldSchema:u.shape({components:u.array,max:u.number,min:u.number,required:u.bool}),labelAction:u.element,metadatas:u.shape({description:u.string,label:u.string}).isRequired,name:u.string.isRequired};const as=["createdBy","updatedBy"],vx=({browserState:e,serverState:t},n,r)=>{const s=t,o=e,i=(d,h)=>le(d,["attributes",h,"type"],""),l=(d,h)=>le(d,["attributes",...h],""),c=(d,h,m,v)=>Object.keys(d).reduce((C,D)=>{if(as.includes(D))return C;const f=v?`${v}.${D}`:D,y=i(m,D),x=le(d,D),B=le(h,D),A=l(m,[D,"component"]),S=l(m,[D,"repeatable"]);let E;switch(y){case"json":E=JSON.parse(x);break;case"time":{E=x,x&&x.split(":").length<3&&(E=`${x}:00`);break}case"media":l(m,[D,"multiple"])===!0?E=x?x.filter(j=>!(j instanceof File)):null:E=le(x,0)instanceof File?null:le(x,"id",null);break;case"component":S?E=x&&x.map((j,R)=>c(j,(B??[])[R],r[A],`${f}.${R}`)):E=x&&c(x,B,r[A],f);break;case"relation":{const j=Dc(s,o)(f).join(".");let R=le(s,j,[]);const Z=x.reduce((P,Q,I,z)=>{const U=R.find(N=>N.id===Q.id),k=z[I+1];if(!U||U.__temp_key__!==Q.__temp_key__){const N=k?{before:k.id}:{end:!0};return[...P,{id:Q.id,position:N}]}return P},[]);E={disconnect:R.reduce((P,Q)=>x.find(I=>I.id===Q.id)?P:[...P,{id:Q.id}],[]),connect:Z.reverse()};break}case"dynamiczone":E=x.map((j,R)=>c(j,(B??[])[R],r[j.__component],`${f}.${R}`));break;default:E=Cx(x,"id")}return C[D]=E,C},{});return c(e,t,n,"")},Cx=(e,t)=>RC(e)?e.map(n=>n[t]?n[t]:n):No(e)?e[t]:e,os=(e,t=()=>!1,n=void 0)=>{const r=(s,o,{ignoreFalseyValues:i=!1,path:l=[],parent:c=o}={})=>Object.entries(o).reduce((d,[h,m])=>{if(i&&(d==null||d[h]===void 0||d[h]===null))return d;if(t(m,{path:[...l,h],parent:c})&&(d[h]=typeof n=="function"?n(d[h],{path:[...l,h],parent:d}):n),m.type==="component"){const v=e[m.component].attributes;!m.repeatable&&d[h]&&typeof d[h]=="object"?d[h]=r(d[h],v,{ignoreFalseyValues:i,path:[...l,h],parent:o[h]}):m.repeatable&&Array.isArray(d[h])&&(d[h]=d[h].map((C,D)=>r(C,v,{ignoreFalseyValues:i,path:[...l,h,D],parent:o[h]})))}else m.type==="dynamiczone"&&Array.isArray(d[h])&&(d[h]=d[h].map((v,C)=>{const D=e[v.__component].attributes;return r(v,D,{ignoreFalseyValues:i,path:[...l,h,C],parent:o[h]})}));return d},{...s});return r},Sc=(e,t,n,r)=>{const s=e.slice();return s.splice(t,1),s.splice(n,0,r),s},Dx={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null,publishConfirmation:{show:!1,draftCount:0}},bx=(e,t)=>(0,Mt.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{const{componentLayoutData:r,allComponents:s}=t,o={...e.componentsDataStructure[r.uid]},l=os(s,c=>c.type==="relation",[])(o,r.attributes);Se(n,["modifiedData",...t.keys],l);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{const{keys:r,allComponents:s,componentLayoutData:o,shouldCheckErrors:i,position:l=void 0}=t;i&&(n.shouldCheckErrors=!e.shouldCheckErrors),t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"&&(n.modifiedDZName=r[0]);const c=[...le(e,["modifiedData",...r],[])];let d=l;d===void 0?d=c.length:d<0&&(d=0);const h=t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"?{...e.componentsDataStructure[o.uid],__component:o.uid,__temp_key__:fa(c)+1}:{...e.componentsDataStructure[o.uid],__temp_key__:fa(c)+1},v=os(s,C=>C.type==="relation",[])(h,o.attributes);c.splice(d,0,v),Se(n,["modifiedData",...r],c);break}case"LOAD_RELATION":{const{initialDataPath:r,modifiedDataPath:s,value:o}=t,i=le(e,r),l=le(e,s),c=i?o.filter(m=>!i.some(v=>v.id===m.id)):o,d=cr(null,l[0]?.__temp_key__,c.length),h=c.map((m,v)=>({...m,__temp_key__:d[v]}));Se(n,r,vu([...h,...i],"id")),Se(n,s,vu([...h,...l],"id"));break}case"CONNECT_RELATION":{const r=["modifiedData",...t.keys],{value:s,toOneRelation:o}=t;if(o)Se(n,r,[s]);else{const i=le(e,r),[l]=cr(i.at(-1)?.__temp_key__,null,1),c=[...i,{...s,__temp_key__:l}];Se(n,r,c)}break}case"DISCONNECT_RELATION":{const r=["modifiedData",...t.keys],{id:s}=t,i=le(e,[...r]).filter(l=>l.id!==s);Se(n,r,i);break}case"MOVE_COMPONENT_FIELD":case"REORDER_RELATION":{const{oldIndex:r,newIndex:s,keys:o}=t,i=["modifiedData",...o],l=le(e,[...i]),c=l[r],d=[...l];if(t.type==="REORDER_RELATION"){const h=r>s?l[s-1]?.__temp_key__:l[s]?.__temp_key__,m=r>s?l[s]?.__temp_key__:l[s+1]?.__temp_key__,[v]=cr(h,m,1);d.splice(r,1),d.splice(s,0,{...c,__temp_key__:v})}else d.splice(r,1),d.splice(s,0,c);Se(n,i,d);break}case"INIT_FORM":{const{initialValues:r,components:s={},attributes:o={},setModifiedDataOnly:i}=t,l=Nt(r),d=os(s,(v,{path:C})=>{const D=C[C.length-1],f=as.includes(D);return v.type==="relation"&&!f},(v,{path:C})=>e.modifiedData?.id===l.id&&le(e.modifiedData,C)?le(e.modifiedData,C):[])(l,o),m=os(s,v=>v.type==="dynamiczone"||v.type==="component"&&!v.repeatable,v=>Array.isArray(v)?v.map((C,D)=>({...C,__temp_key__:D})):{...v,__temp_key__:0})(d,o,{ignoreFalseyValues:!0});i||(n.initialData=m),n.modifiedData=m,n.formErrors={},n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:r,dynamicZoneName:s,shouldCheckErrors:o}=t;o&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=e.modifiedData[s],l=t.type==="MOVE_COMPONENT_UP"?r-1:r+1,c=e.modifiedData[s][r],d=Sc(i,r,l,c);Se(n,["modifiedData",t.dynamicZoneName],d);break}case"MOVE_FIELD":{const r=le(e,["modifiedData",...t.keys],[]).slice(),s=le(e,["modifiedData",...t.keys,t.dragIndex]),o=Sc(r,t.dragIndex,t.overIndex,s);Se(n,["modifiedData",...t.keys],o);break}case"ON_CHANGE":{const[r]=t.keys;if(t.shouldSetInitialValue&&Se(n,["initialData",...t.keys],t.value),t.keys.length===2&&le(e,["modifiedData",r])===null){Se(n,["modifiedData",r],{[t.keys[1]]:t.value});break}Se(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors),n.modifiedData[t.dynamicZoneName].splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const r=["modifiedData",...t.keys];Se(n,r,null);break}case"REMOVE_PASSWORD_FIELD":{FC(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const r=t.keys.length-1,s=["modifiedData",...er(t.keys,r)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=le(e,s).slice();i.splice(parseInt(t.keys[r],10),1),Se(n,s,i);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"SET_PUBLISH_CONFIRMATION":{n.publishConfirmation={...t.publishConfirmation};break}case"RESET_PUBLISH_CONFIRMATION":{n.publishConfirmation={...e.publishConfirmation,show:!1};break}default:return n}}),lo=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:r,componentsDataStructure:s,contentTypeDataStructure:o,createActionAllowedFields:i,from:l,initialValues:c,isCreatingEntry:d,isLoadingForData:h,isSingleType:m,onPost:v,onPublish:C,onDraftRelationCheck:D,onPut:f,onUnpublish:y,readActionAllowedFields:x,redirectToPreviousPage:B,slug:A,status:S,updateActionAllowedFields:E})=>{const[j,R]=g.useState(!1),[Z,F]=(0,g.useReducer)(bx,Dx),{formErrors:P,initialData:Q,modifiedData:I,modifiedDZName:z,shouldCheckErrors:U,publishConfirmation:k}=Z,{setModifiedDataOnly:N}=(0,ze.useSelector)(ya),q=(0,ze.useDispatch)(),V=(0,M.useNotification)(),{lockApp:re,unlockApp:J}=(0,M.useOverlayBlocker)(),oe=le(e,["contentType"],{}),ne=(0,g.useMemo)(()=>le(oe,["options","draftAndPublish"],!1),[oe]),ue=(0,g.useMemo)(()=>ne&&!Q.publishedAt,[ne,Q.publishedAt]),{trackUsage:w}=(0,M.useTracking)(),{formatMessage:X}=(0,Ee.Z)(),Y=(0,g.useRef)(w),se=(0,g.useMemo)(()=>h||d?!1:t===!1&&n===!1,[h,d,t,n]);(0,g.useEffect)(()=>{S==="resolved"?J():re()},[re,J,S]),(0,g.useEffect)(()=>{h||He()},[U]),(0,g.useEffect)(()=>{const ce=Object.keys(P);if(ce.length>0){const fe=ce[0],Ie=document.getElementById(fe);Ie&&Ie.focus()}},[P]),(0,g.useEffect)(()=>{se&&V({type:"info",message:{id:(0,W.g)("permissions.not-allowed.update")}})},[se,V]),(0,g.useEffect)(()=>{F({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:s,contentTypeDataStructure:o})},[s,o]);const{components:H}=e,ie=Pu(c);(0,g.useEffect)(()=>{c&&oe?.attributes&&!Ot(ie,c)&&(F({type:"INIT_FORM",initialValues:c,components:H,attributes:oe.attributes,setModifiedDataOnly:N}),N&&q(hD()))},[c,oe,H,N,q,ie]);const Ae=(0,g.useCallback)(ce=>(fe,Ie,ot,Pt=!1,kt=void 0)=>{Y.current("didAddComponentToDynamicZone"),F({type:ce,keys:fe.split("."),position:kt,componentLayoutData:Ie,allComponents:ot,shouldCheckErrors:Pt})},[]),Me=Ae("ADD_COMPONENT_TO_DYNAMIC_ZONE"),Le=(0,g.useCallback)((ce,fe,Ie)=>{F({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:ce.split("."),componentLayoutData:fe,allComponents:Ie})},[]),Ve=(0,g.useCallback)(({name:ce,value:fe,toOneRelation:Ie})=>{F({type:"CONNECT_RELATION",keys:ce.split("."),value:fe,toOneRelation:Ie})},[]),je=(0,g.useCallback)(({target:{initialDataPath:ce,modifiedDataPath:fe,value:Ie,modifiedDataOnly:ot}})=>{F({type:"LOAD_RELATION",modifiedDataPath:fe,initialDataPath:ce,value:Ie,modifiedDataOnly:ot})},[]),et=Ae("ADD_REPEATABLE_COMPONENT_TO_FIELD"),Qe=(0,g.useMemo)(()=>{const ce={isCreatingEntry:d,isDraft:ue,isFromComponent:!1};return(0,W.a)(oe,{components:e.components||{}},ce)},[e.components,oe,d,ue]),He=(0,g.useCallback)(async(ce={})=>{let fe={};const Ie=Nt(I);zt(Ie)||Se(Ie,ce.path,ce.value);try{await Qe.validate(Ie,{abortEarly:!1})}catch(ot){fe=(0,M.getYupInnerErrors)(ot),z&&(fe=Object.keys(fe).reduce((Pt,kt)=>(kt.split(".")[0]!==z&&(Pt[kt]=fe[kt]),Pt),{}))}F({type:"SET_FORM_ERRORS",errors:fe})},[z,I,Qe]),ct=(0,g.useCallback)(({target:{name:ce,value:fe,type:Ie}},ot=!1)=>{let Pt=fe;if(["text","textarea","string","email","uid","select","select-one","number"].includes(Ie)&&!fe&&fe!==0&&(Pt=null),Ie==="password"&&!fe){F({type:"REMOVE_PASSWORD_FIELD",keys:ce.split(".")});return}F({type:"ON_CHANGE",keys:ce.split("."),value:Pt,shouldSetInitialValue:ot})},[]),ht=(0,g.useCallback)((ce,fe)=>vx({browserState:ce,serverState:fe},oe,e.components),[e.components,oe]),$e=(0,g.useMemo)(()=>ne?ue?{status:"draft"}:{}:{},[ne,ue]),Je=(0,g.useCallback)(async ce=>(ce.preventDefault(),F({type:"RESET_PUBLISH_CONFIRMATION"})),[]),Ke=(0,g.useCallback)(async ce=>{ce.preventDefault();let fe={};try{await Qe.validate(I,{abortEarly:!1})}catch(Ie){fe=(0,M.getYupInnerErrors)(Ie)}try{if(zt(fe)){const Ie=ht(I,Q);(0,Ns.flushSync)(()=>{R(!0)}),d?await v(Ie,$e):await f(Ie,$e),R(!1)}}catch(Ie){R(!1),fe={...fe,...(0,M.getAPIInnerErrors)(Ie,{getTrad:W.g})}}F({type:"SET_FORM_ERRORS",errors:fe})},[ht,d,I,Q,v,f,$e,Qe]),gt=(0,g.useCallback)(async()=>{const ce=(0,W.a)(oe,{components:le(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1}),fe=await D();if(!k.show&&fe>0){F({type:"SET_PUBLISH_CONFIRMATION",publishConfirmation:{show:!0,draftCount:fe}});return}F({type:"RESET_PUBLISH_CONFIRMATION"});let Ie={};try{await ce.validate(I,{abortEarly:!1})}catch(ot){Ie=(0,M.getYupInnerErrors)(ot)}try{zt(Ie)&&((0,Ns.flushSync)(()=>{R(!0)}),await C(),R(!1))}catch(ot){R(!1),Ie={...Ie,...(0,M.getAPIInnerErrors)(ot,{getTrad:W.g})}}F({type:"SET_FORM_ERRORS",errors:Ie})},[e,oe,d,I,k.show,C,D]),it=(0,g.useCallback)(ce=>{const fe=Object.keys(P).some(ot=>ot.split(".")[0]===ce);return!zt(P)&&fe},[P]),qe=(0,g.useCallback)((ce,fe)=>{Y.current("changeComponentsOrder"),F({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:ce,currentIndex:fe,shouldCheckErrors:it(ce)})},[it]),yt=(0,g.useCallback)((ce,fe)=>{Y.current("changeComponentsOrder"),F({type:"MOVE_COMPONENT_UP",dynamicZoneName:ce,currentIndex:fe,shouldCheckErrors:it(ce)})},[it]),nn=(0,g.useCallback)(({name:ce,newIndex:fe,currentIndex:Ie})=>{F({type:"MOVE_COMPONENT_FIELD",keys:ce.split("."),newIndex:fe,oldIndex:Ie})},[]),Et=(0,g.useCallback)(({name:ce,id:fe})=>{F({type:"DISCONNECT_RELATION",keys:ce.split("."),id:fe})},[]),Wt=(0,g.useCallback)(({name:ce,oldIndex:fe,newIndex:Ie})=>{F({type:"REORDER_RELATION",keys:ce.split("."),oldIndex:fe,newIndex:Ie})},[]),pn=(0,g.useCallback)((ce,fe)=>{Y.current("removeComponentFromDynamicZone"),F({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:ce,index:fe,shouldCheckErrors:it(ce)})},[it]),Ut=(0,g.useCallback)((ce,fe)=>{F({type:"REMOVE_COMPONENT_FROM_FIELD",keys:ce.split("."),componentUid:fe})},[]),Re=(0,g.useCallback)((ce,fe)=>{F({type:"REMOVE_REPEATABLE_FIELD",keys:ce.split("."),componentUid:fe})},[]),Ne=(0,g.useCallback)(()=>{F({type:"TRIGGER_FORM_VALIDATION"})},[]);return se?(0,a.jsx)(Ye.l_,{to:l}):I?(0,a.jsx)(M.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:Me,addNonRepeatableComponentToField:Le,addRepeatableComponentToField:et,allLayoutData:e,checkFormErrors:He,createActionAllowedFields:i,formErrors:P,hasDraftAndPublish:ne,initialData:Q,isCreatingEntry:d,isSingleType:m,shouldNotRunValidations:ue,status:S,layout:oe,modifiedData:I,moveComponentField:nn,moveComponentDown:qe,moveComponentUp:yt,onChange:ct,onPublish:gt,onUnpublish:y,readActionAllowedFields:x,redirectToPreviousPage:B,removeComponentFromDynamicZone:pn,removeComponentFromField:Ut,removeRepeatableField:Re,relationConnect:Ve,relationDisconnect:Et,relationLoad:je,relationReorder:Wt,slug:A,triggerFormValidation:Ne,updateActionAllowedFields:E,onPublishPromptDismissal:Je,publishConfirmation:k},children:h||!d&&!Q.id?(0,a.jsx)(Oe.o,{"aria-busy":"true",children:(0,a.jsx)(M.LoadingIndicatorPage,{})}):(0,a.jsxs)(a.Fragment,{children:[j?null:(0,a.jsx)(Ye.NL,{when:!Ot(I,Q),message:X({id:"global.prompt.unsaved"})}),(0,a.jsx)("form",{noValidate:!0,onSubmit:Ke,children:r})]})}):null};lo.defaultProps={from:"/",initialValues:null,redirectToPreviousPage(){}},lo.propTypes={allLayoutData:u.object.isRequired,allowedActions:u.object.isRequired,children:u.node.isRequired,componentsDataStructure:u.object.isRequired,contentTypeDataStructure:u.object.isRequired,createActionAllowedFields:u.array.isRequired,from:u.string,initialValues:u.object,isCreatingEntry:u.bool.isRequired,isLoadingForData:u.bool.isRequired,isSingleType:u.bool.isRequired,onPost:u.func.isRequired,onPublish:u.func.isRequired,onDraftRelationCheck:u.func.isRequired,onPut:u.func.isRequired,onUnpublish:u.func.isRequired,readActionAllowedFields:u.array.isRequired,redirectToPreviousPage:u.func,slug:u.string.isRequired,status:u.string.isRequired,updateActionAllowedFields:u.array.isRequired};const xx=(e={})=>Object.values(e).reduce((t,n)=>Object.assign(t,n),{}),Ic=(e={})=>{const{plugins:t,_q:n,...r}={...e,...xx(e.plugins)};return n&&(r._q=encodeURIComponent(n)),r},Pc=({allLayoutData:e,children:t,slug:n})=>{const r=(0,Bt.useQueryClient)(),{trackUsage:s}=(0,M.useTracking)(),{push:o}=(0,Ye.k6)(),{setCurrentStep:i}=(0,M.useGuidedTour)(),l=(0,g.useRef)(s),[c,d]=(0,g.useState)(!0),[{query:h,rawQuery:m}]=(0,M.useQueryParams)(),v=(0,g.useMemo)(()=>Ic(h),[h]),C=(0,M.useNotification)(),D=(0,ze.useDispatch)(),{formatAPIError:f}=(0,M.useAPIErrorHandler)(W.g),y=(0,M.useFetchClient)(),{post:x,put:B,del:A}=y,{componentsDataStructure:S,contentTypeDataStructure:E,data:j,isLoading:R,status:Z}=(0,ze.useSelector)(ya),F=(0,g.useCallback)(q=>{const V=wu(q,e.contentType,e.components);return(0,M.formatContentTypeData)(V,e.contentType,e.components)},[e]);(0,g.useEffect)(()=>()=>{D(Yu())},[D]),(0,g.useEffect)(()=>{const q=Object.keys(e.components).reduce((J,oe)=>{const ne=dr(le(e,["components",oe,"attributes"],{}),e.components);return J[oe]=(0,M.formatContentTypeData)(ne,e.components[oe],e.components),J},{}),V=dr(e.contentType.attributes,e.components),re=(0,M.formatContentTypeData)(V,e.contentType,e.components);D(Qu(q,re))},[e,D]),(0,g.useEffect)(()=>{const V=Tt.default.CancelToken.source();return(async J=>{D(Jr()),d(!0);try{const{data:oe}=await y.get(`/content-manager/single-types/${n}`,{cancelToken:J.token,params:v});D(ba(F(oe))),d(!1)}catch(oe){if(Tt.default.isCancel(oe))return;const ne=le(oe,"response.status",null);ne===404&&D(xa(m,!0)),ne===403&&(C({type:"info",message:{id:(0,W.g)("permissions.not-allowed.update")}}),o("/"))}})(V),()=>V.cancel("Operation canceled by the user.")},[y,F,o,n,D,v,m,C]);const P=(0,g.useCallback)(q=>{C({type:"warning",message:f(q)})},[C,f]),Q=(0,g.useCallback)(async q=>{try{l.current("willDeleteEntry",q);const{data:V}=await A(`/content-manager/single-types/${n}`,{params:v});return C({type:"success",message:{id:(0,W.g)("success.record.delete")}}),l.current("didDeleteEntry",q),d(!0),D(xa(m,!0)),Promise.resolve(V)}catch(V){return l.current("didNotDeleteEntry",{error:V,...q}),P(V),Promise.reject(V)}},[A,n,v,C,D,m,P]),I=(0,g.useCallback)(async(q,V)=>{const re=`/content-manager/single-types/${n}`;try{D(Xe("submit-pending"));const{data:J}=await B(re,q,{params:h});return l.current("didCreateEntry",V),C({type:"success",message:{id:(0,W.g)("success.record.save")}}),i("contentManager.success"),r.invalidateQueries(["relation"]),D(gn(F(J))),d(!1),D(Xe("resolved")),Promise.resolve(J)}catch(J){return l.current("didNotCreateEntry",{error:J,trackerProperty:V}),P(J),D(Xe("resolved")),Promise.reject(J)}},[B,F,P,n,D,h,C,i,r]),z=(0,g.useCallback)(async()=>{try{l.current("willCheckDraftRelations");const q=`/content-manager/single-types/${n}/actions/countDraftRelations`;D(Xe("draft-relation-check-pending"));const V=await y.get(q);return l.current("didCheckDraftRelations"),D(Xe("resolved")),V.data.data}catch(q){return P(q),D(Xe("resolved")),Promise.reject(q)}},[y,P,n,D]),U=(0,g.useCallback)(async()=>{try{l.current("willPublishEntry");const q=`/content-manager/single-types/${n}/actions/publish`;D(Xe("publish-pending"));const{data:V}=await x(q,{},{params:v});return l.current("didPublishEntry"),C({type:"success",message:{id:(0,W.g)("success.record.publish")}}),D(gn(F(V))),D(Xe("resolved")),Promise.resolve(V)}catch(q){return P(q),D(Xe("resolved")),Promise.reject(q)}},[n,D,x,v,C,F,P]),k=(0,g.useCallback)(async(q,V)=>{const re=`/content-manager/single-types/${n}`;try{l.current("willEditEntry",V),D(Xe("submit-pending"));const{data:J}=await B(re,q,{params:h});return C({type:"success",message:{id:(0,W.g)("success.record.save")}}),l.current("didEditEntry",{trackerProperty:V}),r.invalidateQueries(["relation"]),D(gn(F(J))),D(Xe("resolved")),Promise.resolve(J)}catch(J){return P(J),l.current("didNotEditEntry",{error:J,trackerProperty:V}),D(Xe("resolved")),Promise.reject(J)}},[B,F,P,n,D,h,C,r]),N=(0,g.useCallback)(async()=>{const q=`/content-manager/single-types/${n}/actions/unpublish`;D(Xe("unpublish-pending"));try{l.current("willUnpublishEntry");const{data:V}=await x(q,{},{params:v});l.current("didUnpublishEntry"),C({type:"success",message:{id:(0,W.g)("success.record.unpublish")}}),D(gn(F(V))),D(Xe("resolved"))}catch(V){D(Xe("resolved")),P(V)}},[n,D,x,v,C,F,P]);return t({componentsDataStructure:S,contentTypeDataStructure:E,data:j,isCreatingEntry:c,isLoadingForData:R,onDelete:Q,onPost:I,onDraftRelationCheck:z,onPublish:U,onPut:k,onUnpublish:N,redirectionLink:"/",status:Z})};Pc.propTypes={allLayoutData:u.shape({components:u.object.isRequired,contentType:u.object.isRequired}).isRequired,children:u.func.isRequired,slug:u.string.isRequired};const yx=(0,g.memo)(Pc);function Ex(e,t){return n=>{const r=t();return(0,a.jsx)(e,{...n,...r})}}function Bx(){const{hasDraftAndPublish:e,modifiedData:t}=(0,M.useCMEditViewDataManager)();let n={};return e&&(n=zt(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const kc=({onDelete:e,trackerProperty:t})=>{const[n,r]=(0,g.useState)(!1),[s,o]=(0,g.useState)(!1),{formatMessage:i}=(0,Ee.Z)(),{formatAPIError:l}=(0,M.useAPIErrorHandler)(W.g),c=(0,M.useNotification)(),d=()=>r(m=>!m),h=async()=>{try{o(!0),await e(t),o(!1),d()}catch(m){o(!1),d(),c({type:"warning",message:l(m)})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(De.z,{onClick:d,size:"S",startIcon:(0,a.jsx)(qt.Z,{}),variant:"danger-light",children:i({id:(0,W.g)("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})}),(0,a.jsx)(M.ConfirmDialog,{isConfirmButtonLoading:s,isOpen:n,onConfirm:h,onToggleDialog:d})]})};kc.propTypes={onDelete:u.func.isRequired,trackerProperty:u.object.isRequired};const Ax=(0,g.memo)(kc,Ot),jx=Ex(Ax,Bx);function wx(e,t){return n=>{const r=t();return(0,a.jsx)(e,{...n,...r})}}function Fx(){const{initialData:e,hasDraftAndPublish:t}=(0,M.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const Rx=(0,ae.default)(tg.Z)`
  width: ${(0,M.pxToRem)(6)};
  height: ${(0,M.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,Lc=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,Ee.Z)();if(!e)return null;const r={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},s=t?r.published:r.draft;return(0,a.jsx)($.x,{hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5,...s.box,children:(0,a.jsxs)($.x,{as:T.k,children:[(0,a.jsx)(Rx,{$bulletColor:s.bulletColor}),(0,a.jsxs)($.x,{paddingLeft:3,children:[(0,a.jsxs)(L.Z,{textColor:s.textColor,children:[n({id:(0,W.g)("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"]}),(0,a.jsxs)(L.Z,{fontWeight:"bold",textColor:s.textColor,children:[t&&n({id:(0,W.g)("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:(0,W.g)("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})]})]})]})})};Lc.propTypes={hasDraftAndPublish:u.bool.isRequired,isPublished:u.bool.isRequired};const Tx=wx(Lc,Fx),uo=({columns:e,customFieldInputs:t})=>(0,a.jsx)(_.r,{gap:4,children:e.map(({fieldSchema:n,labelAction:r,metadatas:s,name:o,size:i,queryInfos:l})=>{if(n.type==="component"){const{component:d,max:h,min:m,repeatable:v=!1,required:C=!1}=n;return(0,a.jsx)(ee.P,{col:i,s:12,xs:12,children:(0,a.jsx)(ss,{componentUid:d,labelAction:r,isRepeatable:v,intlLabel:{id:s.label,defaultMessage:s.label},max:h,min:m,name:o,required:C})},d)}return(0,a.jsx)(ee.P,{col:i,s:12,xs:12,children:(0,a.jsx)(Xa,{size:i,fieldSchema:n,keys:o,labelAction:r,metadatas:s,queryInfos:l,customFieldInputs:t})},o)})});uo.defaultProps={customFieldInputs:{}},uo.propTypes={columns:u.array.isRequired,customFieldInputs:u.object};function Mx(e,t){return n=>{const r=t();return(0,a.jsx)(e,{...n,...r})}}function Ox(){const{initialData:e,isCreatingEntry:t,isSingleType:n,status:r,layout:s,hasDraftAndPublish:o,modifiedData:i,onPublish:l,onUnpublish:c,publishConfirmation:d,onPublishPromptDismissal:h}=(0,M.useCMEditViewDataManager)();return{initialData:e,isCreatingEntry:t,isSingleType:n,status:r,layout:s,hasDraftAndPublish:o,modifiedData:i,onPublish:l,onUnpublish:c,publishConfirmation:d,onPublishPromptDismissal:h}}const $c=(0,ae.default)(T.k)`
  text-align: center;
`,Nc=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},initialData:r,isCreatingEntry:s,isSingleType:o,hasDraftAndPublish:i,layout:l,modifiedData:c,onPublish:d,onUnpublish:h,status:m,publishConfirmation:{show:v,draftCount:C},onPublishPromptDismissal:D})=>{const{goBack:f}=(0,Ye.k6)(),[y,x]=(0,g.useState)(!1),{formatMessage:B}=(0,Ee.Z)(),A=le(l,["settings","mainField"],"id"),S=le(l,["info","displayName"],"NOT FOUND"),E=!Ot(r,c)||s&&!zt(c);let R=B({id:(0,W.g)("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!s&&!o&&(R=r[A]||S),o&&(R=S);let Z=null;if(s&&t&&(Z=(0,a.jsxs)(T.k,{gap:2,children:[i&&(0,a.jsx)(De.z,{disabled:!0,startIcon:(0,a.jsx)(an.Z,{}),variant:"secondary",children:B({id:"app.utils.publish",defaultMessage:"Publish"})}),(0,a.jsx)(De.z,{disabled:!E,loading:m==="submit-pending",type:"submit",children:B({id:(0,W.g)("containers.Edit.submit"),defaultMessage:"Save"})})]})),!s&&e){const I=i&&n,z=!zt(r.publishedAt),U=z?m==="unpublish-pending":m==="publish-pending",k=z?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},N=z?()=>x(!0):()=>d();Z=(0,a.jsxs)(T.k,{children:[I&&(0,a.jsx)(De.z,{disabled:E,loading:U,onClick:N,startIcon:(0,a.jsx)(an.Z,{}),variant:"secondary",children:B(k)}),(0,a.jsx)($.x,{paddingLeft:I?2:0,children:(0,a.jsx)(De.z,{disabled:!E,loading:m==="submit-pending",type:"submit",children:B({id:(0,W.g)("containers.Edit.submit"),defaultMessage:"Save"})})})]})}const F=()=>x(I=>!I),P=()=>{F(),h()},Q=`${B({id:(0,W.g)("api.id"),defaultMessage:"API ID "})} : ${l.apiID}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ze.T,{title:R.toString(),primaryAction:Z,subtitle:Q,navigationAction:(0,a.jsx)(M.Link,{startIcon:(0,a.jsx)(Yn.Z,{}),onClick:I=>{I.preventDefault(),f()},to:"/",children:B({id:"global.back",defaultMessage:"Back"})})}),(0,a.jsxs)(Dr.V,{onClose:F,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:y,children:[(0,a.jsx)(br.a,{icon:(0,a.jsx)(Jn.Z,{}),children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,a.jsx)(T.k,{justifyContent:"center",style:{textAlign:"center"},children:(0,a.jsx)(L.Z,{id:"confirm-description",children:B({id:(0,W.g)("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>(0,a.jsx)("br",{})})})}),(0,a.jsx)(T.k,{justifyContent:"center",style:{textAlign:"center"},children:(0,a.jsx)(L.Z,{id:"confirm-description",children:B({id:(0,W.g)("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"})})})]})}),(0,a.jsx)(xr.c,{startAction:(0,a.jsx)(De.z,{onClick:F,variant:"tertiary",children:B({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})}),endAction:(0,a.jsx)(De.z,{variant:"danger-light",onClick:P,children:B({id:"components.popUpWarning.button.confirm",defaultMessage:"Confirm"})})})]}),(0,a.jsxs)(Dr.V,{onClose:D,title:B({id:(0,W.g)("popUpWarning.warning.has-draft-relations.title"),defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:v,children:[(0,a.jsx)(br.a,{icon:(0,a.jsx)(Jn.Z,{}),children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,a.jsx)($c,{justifyContent:"center",children:(0,a.jsxs)(L.Z,{id:"confirm-description",children:[C,B({id:(0,W.g)("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, one { relation is} other { relations are}}</b> not published yet and might lead to unexpected behavior."},{b:I=>(0,a.jsx)(L.Z,{fontWeight:"bold",children:I}),count:C})]})}),(0,a.jsx)($c,{justifyContent:"center",children:(0,a.jsx)(L.Z,{id:"confirm-description",children:B({id:(0,W.g)("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish?"})})})]})}),(0,a.jsx)(xr.c,{startAction:(0,a.jsx)(De.z,{onClick:D,variant:"tertiary",children:B({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})}),endAction:(0,a.jsx)(De.z,{variant:"success",onClick:d,children:B({id:(0,W.g)("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Publish"})})})]})]})};Nc.propTypes={allowedActions:u.shape({canUpdate:u.bool.isRequired,canCreate:u.bool.isRequired,canPublish:u.bool.isRequired}).isRequired,initialData:u.object.isRequired,isCreatingEntry:u.bool.isRequired,isSingleType:u.bool.isRequired,status:u.string.isRequired,layout:u.object.isRequired,hasDraftAndPublish:u.bool.isRequired,modifiedData:u.object.isRequired,onPublish:u.func.isRequired,onUnpublish:u.func.isRequired,publishConfirmation:u.shape({show:u.bool.isRequired,draftCount:u.number.isRequired}).isRequired,onPublishPromptDismissal:u.func.isRequired};const Sx=(0,g.memo)(Nc,Ot),Ix=Mx(Sx,Ox),Px=e=>(0,g.useEffect)(e,kx),kx=[],co=60*1e3,fo=co*60,is=fo*24,Zc=is*30,zc=is*365,Lx=e=>e<co?{unit:"second",value:-Math.round(e/1e3)}:e<fo?{unit:"minute",value:-Math.round(e/co)}:e<is?{unit:"hour",value:-Math.round(e/fo)}:e<Zc?{unit:"day",value:-Math.round(e/is)}:e<zc?{unit:"month",value:-Math.round(e/Zc)}:{unit:"year",value:-Math.round(e/zc)},$x=()=>{const{formatMessage:e}=(0,Ee.Z)();return(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,a.jsx)(L.Z,{variant:"sigma",textColor:"neutral600",id:"additional-information",children:e({id:(0,W.g)("containers.Edit.information"),defaultMessage:"Information"})}),(0,a.jsx)($.x,{children:(0,a.jsx)(lt.i,{})})]})},qn=({label:e,value:t})=>(0,a.jsxs)(T.k,{justifyContent:"space-between",children:[(0,a.jsx)(L.Z,{as:"dt",fontWeight:"bold",textColor:"neutral800",variant:"pi",children:e}),(0,a.jsx)(L.Z,{as:"dd",variant:"pi",textColor:"neutral600",children:t})]});qn.defaultProps={value:"-"},qn.propTypes={label:u.string.isRequired,value:u.string};const Nx=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,Ee.Z)(),{initialData:n,isCreatingEntry:r}=(0,M.useCMEditViewDataManager)(),s=(0,g.useRef)(Date.now()),o=(c,d)=>{const h=n[d]?Wn(n[d],e):"-",v=(n[c]?new Date(n[c]).getTime():Date.now())-s.current,{unit:C,value:D}=Lx(-v);return{at:t(D,C,{numeric:"auto"}),by:r?"-":h}},i=o("updatedAt","updatedBy"),l=o("createdAt","createdBy");return(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:4,children:[(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,as:"dl",children:[(0,a.jsx)(qn,{label:e({id:(0,W.g)("containers.Edit.information.created"),defaultMessage:"Created"}),value:l.at}),(0,a.jsx)(qn,{label:e({id:(0,W.g)("containers.Edit.information.by"),defaultMessage:"By"}),value:l.by})]}),(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,as:"dl",children:[(0,a.jsx)(qn,{label:e({id:(0,W.g)("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"}),value:i.at}),(0,a.jsx)(qn,{label:e({id:(0,W.g)("containers.Edit.information.by"),defaultMessage:"By"}),value:i.by})]})]})},Wc=({children:e})=>(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",gap:4,children:e});Wc.propTypes={children:u.oneOfType([u.arrayOf(u.node),u.node]).isRequired};const ls={Root:Wc,Title:$x,Body:Nx};function Zx(){return(0,a.jsxs)(ls.Root,{children:[(0,a.jsx)(ls.Title,{}),(0,a.jsx)(ls.Body,{})]})}const zx=e=>{if(!e.layouts)return[];const t=e.layouts.edit,n=e.attributes,r=i=>le(n,[i,"type"],"");let s=0;const o=[];return t.forEach(i=>{const l=i.some(({name:c})=>r(c)==="dynamiczone");o[s]||(o[s]=[]),l?(s=s===0&&zt(o[0])?0:s+1,o[s]||(o[s]=[]),o[s].push(i),s+=1):o[s].push(i)}),o.filter(i=>i.length>0)},Wx=e=>{if(!e)return[];const n=[...e.contentType.layouts.edit,...Object.values(e.components).flatMap(s=>s.layouts.edit)].flat().filter(s=>s.fieldSchema.customField).map(s=>s.fieldSchema.customField);return[...new Set(n)]},Ux=(e,t)=>{const n=r=>{const s=(0,M.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${r}`,subject:t}]);return OC(MC(s,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}},ho=e=>e["content-manager_editViewLayoutManager"].currentLayout,Vx=(0,da.createSelector)(ho,e=>zx(e?.contentType??{})),Hx=(0,da.createSelector)(ho,e=>Wx(e)),qx=[{action:"plugin::content-type-builder.read",subject:null}],go=({allowedActions:e,isSingleType:t,goBack:n,slug:r,id:s,origin:o,userPermissions:i})=>{const{trackUsage:l}=(0,M.useTracking)(),{formatMessage:c}=(0,Ee.Z)(),d=(0,ze.useSelector)(wn.s),h=(0,Ye.TH)(),m=(0,M.useNotification)(),v=(0,Ue.p)(Zx,async()=>(await Promise.all([p.e(6898),p.e(9220)]).then(p.bind(p,99220))).InformationBoxEE);Px(()=>{h?.state&&"error"in h.state&&m({type:"warning",message:h.state.error,timeout:5e3})});const{layout:C,formattedContentTypeLayout:D,customFieldUids:f}=(0,ze.useSelector)(F=>({layout:ho(F),formattedContentTypeLayout:Vx(F),customFieldUids:Hx(F)})),{isLazyLoading:y,lazyComponentStore:x}=Fa(f),{createActionAllowedFields:B,readActionAllowedFields:A,updateActionAllowedFields:S}=Ux(i,r),E=t?d.contentManager.singleTypesConfigurations:d.contentManager.collectionTypesConfigurations,j=`/content-manager/${t?"singleType":"collectionType"}/${r}/configurations/edit`,R=t?yx:gD,Z=F=>F.every(P=>P.every(Q=>Q.fieldSchema.type==="dynamiczone"));return y?(0,a.jsx)(M.LoadingIndicatorPage,{}):v?(0,a.jsx)(R,{allLayoutData:C,slug:r,id:s,origin:o,children:({componentsDataStructure:F,contentTypeDataStructure:P,data:Q,isCreatingEntry:I,isLoadingForData:z,onDelete:U,onPost:k,onPublish:N,onDraftRelationCheck:q,onPut:V,onUnpublish:re,redirectionLink:J,status:oe})=>(0,a.jsx)(lo,{allowedActions:e,allLayoutData:C,createActionAllowedFields:B,componentsDataStructure:F,contentTypeDataStructure:P,from:J,initialValues:Q,isCreatingEntry:I,isLoadingForData:z,isSingleType:t,onPost:k,onPublish:N,onDraftRelationCheck:q,onPut:V,onUnpublish:re,readActionAllowedFields:A,redirectToPreviousPage:n,slug:r,status:oe,updateActionAllowedFields:S,children:(0,a.jsxs)(Oe.o,{"aria-busy":oe!=="resolved",children:[(0,a.jsx)(Ix,{allowedActions:e}),(0,a.jsx)(Ge.D,{children:(0,a.jsxs)(_.r,{gap:4,children:[(0,a.jsx)(ee.P,{col:9,s:12,children:(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",gap:6,children:D.map((ne,ue)=>{if(Z(ne)){const{0:{0:{name:w,fieldSchema:X,metadatas:Y,labelAction:se}}}=ne;return(0,a.jsx)($.x,{children:(0,a.jsx)(_.r,{gap:4,children:(0,a.jsx)(ee.P,{col:12,s:12,xs:12,children:(0,a.jsx)(io,{name:w,fieldSchema:X,labelAction:se,metadatas:Y})})})},ue)}return(0,a.jsx)($.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150",children:(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",gap:6,children:ne.map((w,X)=>(0,a.jsx)(uo,{columns:w,customFieldInputs:x},X))})},ue)})})}),(0,a.jsx)(ee.P,{col:3,s:12,children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,a.jsx)(Tx,{}),(0,a.jsxs)($.x,{as:"aside","aria-labelledby":"additional-information",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow",children:[(0,a.jsx)(v,{}),(0,a.jsx)(Ue.q,{area:"contentManager.editView.informations"})]}),(0,a.jsx)($.x,{as:"aside","aria-labelledby":"links",children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,a.jsx)(Ue.q,{area:"contentManager.editView.right-links",slug:r}),r!=="strapi::administrator"&&(0,a.jsx)(M.CheckPermissions,{permissions:qx,children:(0,a.jsx)(M.LinkButton,{onClick:()=>{l("willEditEditLayout")},size:"S",startIcon:(0,a.jsx)(Qt.Z,{}),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${r}`,variant:"secondary",children:c({id:(0,W.g)("link-to-ctb"),defaultMessage:"Edit the model"})})}),(0,a.jsx)(M.CheckPermissions,{permissions:E,children:(0,a.jsx)(M.LinkButton,{size:"S",startIcon:(0,a.jsx)(Cs.Z,{}),style:{width:"100%"},to:j,variant:"secondary",children:c({id:"app.links.configure-view",defaultMessage:"Configure the view"})})}),e.canDelete&&!I&&(0,a.jsx)(jx,{onDelete:U})]})})]})})]})})]})})}):null};go.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},go.propTypes={allowedActions:u.shape({canRead:u.bool.isRequired,canUpdate:u.bool.isRequired,canCreate:u.bool.isRequired,canDelete:u.bool.isRequired}).isRequired,id:u.string,isSingleType:u.bool,goBack:u.func.isRequired,origin:u.string,slug:u.string.isRequired,userPermissions:u.array};const po=e=>{const t=(0,g.useMemo)(()=>Bu(e.slug),[e.slug]),{isLoading:n,allowedActions:r}=(0,M.useRBAC)(t,e.userPermissions);return n?(0,a.jsx)(M.LoadingIndicatorPage,{}):(0,a.jsx)(go,{...e,allowedActions:r})};po.defaultProps={permissions:[]},po.propTypes={permissions:u.array,slug:u.string.isRequired,userPermissions:u.array.isRequired};const Kx=(0,g.memo)(po,Ot),{MUTATE_EDIT_VIEW_LAYOUT:Gx}=Ue.H,pr=({layout:e,...t})=>{const n=(0,ze.useSelector)(yu),r=(0,ze.useDispatch)(),[{query:s}]=(0,M.useQueryParams)(),{runHookWaterfall:o}=(0,M.useStrapiApp)(),{permissions:i,isValid:l}=ku(s,t.slug,"editView");return(0,g.useEffect)(()=>{const c=o(Gx,{layout:e,query:s});return r(fD(c.layout,s)),()=>{r(dD())}},[e,r,s,o]),!n||!l?(0,a.jsx)(M.LoadingIndicatorPage,{}):(0,a.jsx)(Kx,{...t,userPermissions:i})};pr.propTypes={layout:u.shape({components:u.object.isRequired,contentType:u.shape({uid:u.string.isRequired,settings:u.object.isRequired,metadatas:u.object.isRequired,options:u.object.isRequired,attributes:u.object.isRequired}).isRequired}).isRequired};const Yx=(0,ae.default)(T.k)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,Uc=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:r,onChangeEditLabel:s,onSubmit:o,type:i})=>{const{formatMessage:l}=(0,Ee.Z)(),c=e[n].relationType;let d=!["media","relation"].includes(i);return["oneWay","oneToOne","manyToOne"].includes(c)&&(d=!0),(0,a.jsx)(xe.P,{onClose:r,labelledBy:"title",children:(0,a.jsxs)("form",{onSubmit:o,children:[(0,a.jsx)(me.x,{children:(0,a.jsxs)(Yx,{children:[(0,a.jsx)(Qr,{type:i}),(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:l({id:(0,W.g)("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Xn(n)})})]})}),(0,a.jsx)(ye.f,{children:(0,a.jsxs)(_.r,{gap:4,children:[(0,a.jsx)(ee.P,{s:12,col:6,children:(0,a.jsx)(Te.o,{id:"label-input",label:l({id:(0,W.g)("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:h=>s(h),value:t.label,hint:l({id:(0,W.g)("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})}),d&&(0,a.jsx)(ee.P,{s:12,col:6,children:(0,a.jsx)(Pe.s,{"data-testid":"Enable sort on this field",checked:t.sortable,label:l({id:(0,W.g)("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:h=>s({target:{name:"sortable",value:h.target.checked}}),onLabel:l({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:l({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})})]})}),(0,a.jsx)(we.m,{startActions:(0,a.jsx)(De.z,{onClick:r,variant:"tertiary",children:l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,a.jsx)(De.z,{type:"submit",children:l({id:"global.finish",defaultMessage:"Finish"})})})]})})};Uc.propTypes={attributes:u.objectOf(u.shape({relationType:u.string})).isRequired,fieldForm:u.shape({label:u.string,sortable:u.bool}).isRequired,fieldToEdit:u.string.isRequired,onChangeEditLabel:u.func.isRequired,onCloseModal:u.func.isRequired,onSubmit:u.func.isRequired,type:u.string.isRequired};const mo=({contentTypeOptions:e,modifiedData:t,onChange:n,sortOptions:r})=>{const{formatMessage:s,locale:o}=(0,Ee.Z)(),i=(0,M.useCollator)(o,{sensitivity:"base"}),c=(0,Ue.p)(r,async()=>(await p.e(854).then(p.bind(p,20854))).REVIEW_WORKFLOW_STAGE_SORT_OPTION_NAME,{combine(h,m){return[...h,{...m,label:s(m.label)}]},defaultValue:r,enabled:!!e?.reviewWorkflows}).sort((h,m)=>i.compare(h.label,m.label)),{settings:d}=t;return(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:4,children:[(0,a.jsx)(L.Z,{variant:"delta",as:"h2",children:s({id:(0,W.g)("containers.SettingPage.settings"),defaultMessage:"Settings"})}),(0,a.jsxs)(T.k,{justifyContent:"space-between",gap:4,children:[(0,a.jsx)($.x,{width:"100%",children:(0,a.jsx)(Pe.s,{label:s({id:(0,W.g)("form.Input.search"),defaultMessage:"Enable search"}),onChange:h=>{n({target:{name:"settings.searchable",value:h.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:d.searchable})}),(0,a.jsx)($.x,{width:"100%",children:(0,a.jsx)(Pe.s,{label:s({id:(0,W.g)("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:h=>{n({target:{name:"settings.filterable",value:h.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:d.filterable})}),(0,a.jsx)($.x,{width:"100%",children:(0,a.jsx)(Pe.s,{label:s({id:(0,W.g)("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:h=>{n({target:{name:"settings.bulkable",value:h.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:d.bulkable})})]}),(0,a.jsxs)(_.r,{gap:4,children:[(0,a.jsx)(ee.P,{s:12,col:6,children:(0,a.jsx)(be.P,{label:s({id:(0,W.g)("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:s({id:(0,W.g)("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:h=>n({target:{name:"settings.pageSize",value:h}}),name:"settings.pageSize",value:t.settings.pageSize||"",children:[10,20,50,100].map(h=>(0,a.jsx)(de.W,{value:h,children:h},h))})}),(0,a.jsx)(ee.P,{s:12,col:3,children:(0,a.jsx)(be.P,{label:s({id:(0,W.g)("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:h=>n({target:{name:"settings.defaultSortBy",value:h}}),name:"settings.defaultSortBy",value:t.settings.defaultSortBy||"",children:c.map(({value:h,label:m})=>(0,a.jsx)(de.W,{value:h,children:m},h))})}),(0,a.jsx)(ee.P,{s:12,col:3,children:(0,a.jsx)(be.P,{label:s({id:(0,W.g)("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:h=>n({target:{name:"settings.defaultSortOrder",value:h}}),name:"settings.defaultSortOrder",value:t.settings.defaultSortOrder||"",children:["ASC","DESC"].map(h=>(0,a.jsx)(de.W,{value:h,children:h},h))})})]})]})};mo.defaultProps={modifiedData:{},sortOptions:[]},mo.propTypes={contentTypeOptions:u.object.isRequired,modifiedData:u.object,onChange:u.func.isRequired,sortOptions:u.arrayOf(u.shape({value:u.string,label:u.string}).isRequired)};const vo=(0,ae.default)(T.k)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,Qx=(0,ae.default)(vo)`
  border-right: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Jx=(0,ae.default)(T.k)`
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }
`,Xx=(0,ae.default)(L.Z)`
  max-width: ${72/16}rem;
`;function mr({labelField:e,transparent:t,isSibling:n}){return(0,a.jsxs)(Jx,{background:n?"neutral100":"primary100",display:"inline-flex",gap:3,hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n,"max-height":(0,M.pxToRem)(32),maxWidth:"min-content",opacity:t?0:1,children:[(0,a.jsxs)(T.k,{gap:3,children:[(0,a.jsx)(Qx,{alignItems:"center",cursor:"all-scroll",padding:3,children:(0,a.jsx)(on.Z,{})}),(0,a.jsx)(Xx,{textColor:n?void 0:"primary600",fontWeight:"bold",ellipsis:!0,children:e})]}),(0,a.jsxs)(T.k,{children:[(0,a.jsx)(vo,{alignItems:"center",children:(0,a.jsx)(Qt.Z,{})}),(0,a.jsx)(vo,{alignItems:"center",children:(0,a.jsx)(Fr.Z,{})})]})]})}mr.defaultProps={isSibling:!1,transparent:!1},mr.propTypes={isSibling:u.bool,labelField:u.string.isRequired,transparent:u.bool};const Co=ae.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,Vc=(0,ae.default)(Co)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,_x=(0,ae.default)(T.k)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${Vc} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,ey=(0,ae.default)($.x)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,Hc=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:r,onMoveField:s,onRemoveField:o,name:i,setIsDraggingSibling:l})=>{const{formatMessage:c}=(0,Ee.Z)(),d=(0,g.useRef)(null),h=(0,g.useRef)(null),[,m]=(0,g.useState)(!1),v=(0,g.useRef)(),C=()=>{v.current&&v.current.click()},[,D]=(0,yr.useDrop)({accept:It.FIELD,hover(A,S){if(!h.current)return;const E=A.index,j=e;if(E===j)return;const R=h.current.getBoundingClientRect(),Z=(R.right-R.left)/2,P=S.getClientOffset().x-R.left;E>j&&P>Z||E<j&&P<Z||(s(E,j),A.index=j)}}),[{isDragging:f},y,x]=(0,yr.useDrag)({type:It.FIELD,item(){return{index:e,labelField:n,name:i}},collect:A=>({isDragging:A.isDragging()}),end(){l(!1)}});(0,g.useEffect)(()=>{x((0,_n.rX)(),{captureDraggingState:!1})},[x]),(0,g.useEffect)(()=>{f&&l(!0)},[f,l]),(0,g.useEffect)(()=>{t||m(A=>!A)},[t]);const B={dragRef:y(d),dropRef:D(h)};return(0,a.jsxs)(ey,{ref:B?B.dropRef:null,children:[f&&(0,a.jsx)(mr,{transparent:!0,labelField:n}),!f&&t&&(0,a.jsx)(mr,{isSibling:!0,labelField:n}),!f&&!t&&(0,a.jsxs)(_x,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:C,isDragging:f,children:[(0,a.jsxs)(T.k,{gap:3,children:[(0,a.jsx)(Vc,{as:"span","aria-label":c({id:(0,W.g)("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:n}),onClick:A=>A.stopPropagation(),ref:B.dragRef,type:"button",children:(0,a.jsx)(on.Z,{})}),(0,a.jsx)(L.Z,{fontWeight:"bold",children:n})]}),(0,a.jsxs)(T.k,{paddingLeft:3,children:[(0,a.jsx)(Co,{ref:v,onClick:A=>{A.stopPropagation(),r(i)},"aria-label":c({id:(0,W.g)("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:n}),type:"button",children:(0,a.jsx)(Qt.Z,{})}),(0,a.jsx)(Co,{onClick:o,"data-testid":`delete-${i}`,"aria-label":c({id:(0,W.g)("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:n}),type:"button",children:(0,a.jsx)(Fr.Z,{})})]})]})]})};Hc.propTypes={index:u.number.isRequired,isDraggingSibling:u.bool.isRequired,labelField:u.string.isRequired,name:u.string.isRequired,onClickEditField:u.func.isRequired,onMoveField:u.func.isRequired,onRemoveField:u.func.isRequired,setIsDraggingSibling:u.func.isRequired};const qc=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:r,onClickEditField:s,onMoveField:o,onRemoveField:i})=>{const{formatMessage:l}=(0,Ee.Z)(),[c,d]=(0,g.useState)(!1),[h,m]=(0,g.useState)(null),v=(0,g.useRef)();function C(...f){m("add"),r(...f)}function D(...f){m("remove"),i(...f)}return(0,g.useEffect)(()=>{h==="add"&&v?.current&&(v.current.scrollLeft=v.current.scrollWidth)},[e,h]),(0,a.jsxs)(T.k,{alignItems:"stretch",direction:"column",gap:4,children:[(0,a.jsx)(L.Z,{variant:"delta",as:"h2",children:l({id:(0,W.g)("containers.SettingPage.view"),defaultMessage:"View"})}),(0,a.jsxs)(T.k,{padding:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0,children:[(0,a.jsx)($.x,{flex:"1",overflow:"scroll hidden",ref:v,children:(0,a.jsx)(T.k,{gap:3,children:e.map((f,y)=>(0,a.jsx)(Hc,{index:y,isDraggingSibling:c,onMoveField:o,onClickEditField:s,onRemoveField:x=>D(x,y),name:f,labelField:n[f].list.label||f,setIsDraggingSibling:d},f))})}),(0,a.jsxs)(_e.fC,{children:[(0,a.jsxs)(_e.xz,{paddingLeft:2,paddingRight:2,justifyContent:"center",endIcon:null,disabled:t.length<=0,variant:"tertiary",children:[(0,a.jsx)(sn.T,{as:"span",children:l({id:(0,W.g)("components.FieldSelect.label"),defaultMessage:"Add a field"})}),(0,a.jsx)(Fn.Z,{"aria-hidden":!0,focusable:!1,style:{position:"relative",top:2}})]}),(0,a.jsx)(_e.VY,{children:t.map(f=>(0,a.jsx)(_e.ck,{onSelect:()=>C(f),children:n[f].list.label||f},f))})]})]})]})};qc.propTypes={displayedFields:u.PropTypes.array.isRequired,listRemainingFields:u.PropTypes.array.isRequired,metadatas:u.PropTypes.objectOf(u.PropTypes.shape({list:u.PropTypes.shape({label:u.PropTypes.string})})).isRequired,onAddField:u.PropTypes.func.isRequired,onClickEditField:u.PropTypes.func.isRequired,onMoveField:u.PropTypes.func.isRequired,onRemoveField:u.PropTypes.func.isRequired};const ty=["media","richtext","dynamiczone","relation","component","json","blocks"],Do={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},ny=(e=Do,t)=>(0,Mt.default)(e,n=>{const r=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const s=le(e,r,[]);Se(n,r,[...s,t.item]);break}case"MOVE_FIELD":{const s=le(e,r,[]),{originalIndex:o,atIndex:i}=t;Se(n,r,Gr(s,o,i));break}case"ON_CHANGE":{Se(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{Se(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const s=le(e,r,[]);Se(n,r,s.filter((o,i)=>t.index!==i));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:s}=t;n.fieldToEdit=s,n.fieldForm.label=le(n,["modifiedData","metadatas",s,"list","label"],""),n.fieldForm.sortable=le(n,["modifiedData","metadatas",s,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const s=["modifiedData","metadatas",e.fieldToEdit,"list"];Se(n,[...s,"label"],e.fieldForm.label),Se(n,[...s,"sortable"],e.fieldForm.sortable);break}default:return n}}),Kc=({layout:e,slug:t})=>{const{put:n}=(0,M.useFetchClient)(),{formatMessage:r}=(0,Ee.Z)(),{trackUsage:s}=(0,M.useTracking)(),o=Iu(),i=(0,M.useNotification)(),{refetchData:l}=g.useContext(bu),[{fieldToEdit:c,fieldForm:d,initialData:h,modifiedData:m},v]=g.useReducer(ny,Do,()=>({...Do,initialData:e,modifiedData:e})),C=Object.keys(d).length!==0,{attributes:D,options:f}=e,y=m.layouts.list,x=()=>{const{settings:{pageSize:k,defaultSortBy:N,defaultSortOrder:q},kind:V,uid:re}=h,J=`${N}:${q}`,oe=`${(0,Yt.stringify)({page:1,pageSize:k,sort:J},{encode:!1})}${o?`&${o}`:""}`;return`/content-manager/${V}/${re}?${oe}`},B=({target:{name:k,value:N}})=>{v({type:"ON_CHANGE",keys:k,value:k==="settings.pageSize"?parseInt(N,10):N})},{isLoading:A,mutate:S}=(0,Bt.useMutation)(k=>n(`/content-manager/content-types/${t}/configuration`,k),{onSuccess(){s("didEditListSettings"),l()},onError(){i({type:"warning",message:{id:"notification.error"}})}}),E=k=>{v({type:"ADD_FIELD",item:k})},j=(k,N)=>{k.stopPropagation(),y.length===1?i({type:"info",message:{id:(0,W.g)("notification.info.minimumFields")}}):v({type:"REMOVE_FIELD",index:N})},R=k=>{k.preventDefault();const{layouts:N,settings:q,metadatas:V}=m;S({layouts:N,settings:q,metadatas:V}),s("willSaveContentTypeLayout")},Z=k=>{v({type:"SET_FIELD_TO_EDIT",fieldToEdit:k})},F=()=>{v({type:"UNSET_FIELD_TO_EDIT"})},P=k=>{k.preventDefault(),v({type:"SUBMIT_FIELD_FORM"}),F()},Q=({target:{name:k,value:N}})=>{v({type:"ON_CHANGE_FIELD_METAS",name:k,value:N})},I=Object.entries(D).filter(([k,N])=>Eu(N)&&!y.includes(k)).map(([k])=>k).sort(),z=Object.entries(D).filter(([,k])=>!ty.includes(k.type)).map(([k])=>({value:k,label:e.metadatas[k].list.label})),U=(k,N)=>{v({type:"MOVE_FIELD",originalIndex:k,atIndex:N})};return(0,a.jsx)(Mo.A,{children:(0,a.jsxs)(Oe.o,{"aria-busy":A,children:[(0,a.jsxs)("form",{onSubmit:R,children:[(0,a.jsx)(Ze.T,{navigationAction:(0,a.jsx)(M.Link,{startIcon:(0,a.jsx)(Yn.Z,{}),to:x,id:"go-back",children:r({id:"global.back",defaultMessage:"Back"})}),primaryAction:(0,a.jsx)(De.z,{size:"S",startIcon:(0,a.jsx)(an.Z,{}),disabled:Ot(m,h),type:"submit",children:r({id:"global.save",defaultMessage:"Save"})}),subtitle:r({id:(0,W.g)("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:r({id:(0,W.g)("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:Xn(m.info.displayName)})}),(0,a.jsx)(Ge.D,{children:(0,a.jsxs)(T.k,{alignItems:"stretch",background:"neutral0",direction:"column",gap:6,hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:[(0,a.jsx)(mo,{contentTypeOptions:f,modifiedData:m,onChange:B,sortOptions:z}),(0,a.jsx)(lt.i,{}),(0,a.jsx)(qc,{listRemainingFields:I,displayedFields:y,onAddField:E,onClickEditField:Z,onMoveField:U,onRemoveField:j,metadatas:m.metadatas})]})})]}),C&&(0,a.jsx)(Uc,{attributes:D,fieldForm:d,fieldToEdit:c,onChangeEditLabel:Q,onCloseModal:F,onSubmit:P,type:D?.[c]?.type??"text"})]})})};Kc.propTypes={layout:u.shape({uid:u.string.isRequired,settings:u.shape({bulkable:u.bool,defaultSortBy:u.string,defaultSortOrder:u.string,filterable:u.bool,pageSize:u.number,searchable:u.bool}).isRequired,metadatas:u.object.isRequired,options:u.object.isRequired,attributes:u.objectOf(u.shape({type:u.string})).isRequired}).isRequired,slug:u.string.isRequired};const ry=()=>({type:Ue.r}),sy=(e,t)=>({type:Ue.s,pagination:e,data:t}),ay=()=>({type:Ue.O});function oy(){return{type:Ue.t}}const iy=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:Ue.v}},ly=e=>({type:Ue.w,target:e}),Gc=({displayedFilters:e})=>{const[t,n]=g.useState(!1),{formatMessage:r}=(0,Ee.Z)(),s=g.useRef(),{trackUsage:o}=(0,M.useTracking)(),i=()=>{t||o("willFilterEntries"),n(l=>!l)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(De.z,{variant:"tertiary",ref:s,startIcon:(0,a.jsx)(Wo.Z,{}),onClick:i,size:"S",children:r({id:"app.utils.filters",defaultMessage:"Filters"})}),t&&(0,a.jsx)(M.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:i,source:s}),(0,a.jsx)(M.FilterListURLQuery,{filtersSchema:e})]})};Gc.propTypes={displayedFilters:u.arrayOf(u.shape({name:u.string.isRequired,metadatas:u.shape({label:u.string}),fieldSchema:u.shape({type:u.string})})).isRequired};const bo=({value:e,onChange:t})=>{const{formatMessage:n}=(0,Ee.Z)(),{users:r,isLoading:s}=(0,Cu.u)();return(0,a.jsx)(To.hQ,{value:e,"aria-label":n({id:"content-manager.components.Filters.usersSelect.label",defaultMessage:"Search and select an user to filter"}),onChange:t,loading:s,children:r.map(o=>(0,a.jsx)($t.O,{value:o.id.toString(),children:Wn(o,n)},o.id))})};bo.propTypes={onChange:u.func.isRequired,value:u.string},bo.defaultProps={value:""};const uy=["json","component","media","richtext","dynamiczone","password","blocks"],cy=["createdAt","updatedAt"],dy=(e,t)=>{const{allPermissions:n}=(0,M.useRBACProvider)(),r=(0,M.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),s=(0,M.findMatchingPermissions)(n,[{action:"admin::users.read",subject:null}]).length>0;return["id",...(r?.[0]?.properties?.fields??[]).filter(l=>{const c=e?.attributes?.[l]??{};return!(!c.type||uy.includes(c.type))}),...cy,...s?as:[]]},vr=({area:e,...t})=>{const n=(0,Ue.x)(e);return n?(0,a.jsx)("ul",{children:n.map(r=>r.Component(t)?(0,a.jsx)($.x,{padding:3,style:{textAlign:"center"},children:(0,a.jsx)(r.Component,{...t})},r.name):null)}):null};vr.propTypes={area:u.string.isRequired};const Yc=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:r})=>{const{formatMessage:s}=(0,Ee.Z)();return(0,a.jsxs)(Dr.V,{onClose:n,title:s({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t,children:[(0,a.jsx)(br.a,{icon:(0,a.jsx)(Jn.Z,{}),children:(0,a.jsxs)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,a.jsx)(T.k,{justifyContent:"center",children:(0,a.jsx)(L.Z,{id:"confirm-description",children:s({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"})})}),(0,a.jsx)(T.k,{children:(0,a.jsx)(vr,{area:"contentManager.listView.deleteModalAdditionalInfos"})})]})}),(0,a.jsx)(xr.c,{startAction:(0,a.jsx)(De.z,{onClick:n,variant:"tertiary",children:s({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endAction:(0,a.jsx)(De.z,{onClick:r,variant:"danger-light",startIcon:(0,a.jsx)(qt.Z,{}),id:"confirm-delete",loading:e,children:s({id:"app.components.Button.confirm",defaultMessage:"Confirm"})})})]})};Yc.propTypes={isConfirmButtonLoading:u.bool.isRequired,isOpen:u.bool.isRequired,onConfirm:u.func.isRequired,onToggleDialog:u.func.isRequired};const Qc=e=>e.stopPropagation(),Jc=({rowId:e,index:t})=>{const{selectedEntries:n,onSelectRow:r}=(0,M.useTableContext)(),{formatMessage:s}=(0,Ee.Z)(),o=n.findIndex(l=>l===e)!==-1,i=s({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:t+1});return(0,a.jsx)(Oo.C,{"aria-label":i,checked:o,onClick:Qc,onChange:()=>{r({name:e,value:!o})}})};Jc.propTypes={rowId:u.number.isRequired,index:u.number.isRequired};const xo=({rowId:e,index:t,canCreate:n,canDelete:r,setIsConfirmDeleteRowOpen:s,handleCloneClick:o})=>{const{formatMessage:i}=(0,Ee.Z)(),{trackUsage:l}=(0,M.useTracking)(),{setSelectedEntries:c}=(0,M.useTableContext)(),d=Iu(),{location:{pathname:h}}=(0,Ye.k6)(),m=i({id:"content-manager.components.ListViewTable.row-line",defaultMessage:"item line {number}"},{number:t+1});return(0,a.jsxs)(T.k,{gap:1,justifyContent:"end",onClick:Qc,children:[(0,a.jsx)(pe.h,{forwardedAs:Gn.Link,onClick:()=>{l("willEditEntryFromButton")},to:{pathname:`${h}/${e}`,state:{from:h},search:d},label:i({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:m}),noBorder:!0,children:(0,a.jsx)(Qt.Z,{})}),n&&(0,a.jsx)(pe.h,{onClick:o(e),label:i({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:m}),noBorder:!0,children:(0,a.jsx)(ng.Z,{})}),r&&(0,a.jsx)(pe.h,{onClick:()=>{l("willDeleteEntryFromList"),c([e]),s(!0)},label:i({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:m}),noBorder:!0,children:(0,a.jsx)(qt.Z,{})})]})};xo.defaultProps={canCreate:!1,canDelete:!1},xo.propTypes={rowId:u.number.isRequired,index:u.number.isRequired,setIsConfirmDeleteRowOpen:u.func.isRequired,handleCloneClick:u.func.isRequired,canCreate:u.bool,canDelete:u.bool};const Xc=({children:e,onConfirmDelete:t,isConfirmDeleteRowOpen:n,setIsConfirmDeleteRowOpen:r})=>{const[s,o]=g.useState(!1),{selectedEntries:i,setSelectedEntries:l}=(0,M.useTableContext)(),c=async()=>{try{o(!0),await t(i[0]),r(!1),o(!1),l([])}catch{o(!1),r(!1)}};return(0,a.jsxs)(M.Table.Body,{children:[e,(0,a.jsx)(Yc,{isConfirmButtonLoading:s,onConfirm:c,onToggleDialog:()=>r(!n),isOpen:n})]})};Xc.propTypes={children:u.node.isRequired,onConfirmDelete:u.func.isRequired,isConfirmDeleteRowOpen:u.bool.isRequired,setIsConfirmDeleteRowOpen:u.func.isRequired};const us={CheckboxDataCell:Jc,EntityActionsDataCell:xo,Root:Xc},Kn=()=>e=>e["content-manager_listView"]||Ue.y,fy=()=>(0,da.createSelector)(Kn(),e=>e),_c=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},cs=({onToggleDialog:e,isOpen:t,dialogBody:n,endAction:r})=>{const{formatMessage:s}=(0,Ee.Z)();return(0,a.jsxs)(Dr.V,{onClose:e,title:s({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),isOpen:t,children:[(0,a.jsx)(br.a,{icon:(0,a.jsx)(Jn.Z,{}),children:(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",gap:2,children:n})}),(0,a.jsx)(xr.c,{startAction:(0,a.jsx)(De.z,{onClick:e,variant:"tertiary",children:s({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endAction:r})]})};cs.propTypes={isOpen:u.bool.isRequired,onToggleDialog:u.func.isRequired,dialogBody:u.node.isRequired,endAction:u.node.isRequired};const yo={isConfirmButtonLoading:u.bool.isRequired,isOpen:u.bool.isRequired,onConfirm:u.func.isRequired,onToggleDialog:u.func.isRequired},hy=e=>(0,a.jsx)(L.Z,{fontWeight:"bold",children:e}),ed=({isOpen:e,onToggleDialog:t,isConfirmButtonLoading:n,onConfirm:r})=>{const{formatMessage:s}=(0,Ee.Z)(),{get:o}=(0,M.useFetchClient)(),{selectedEntries:i}=(0,M.useTableContext)(),l=(0,M.useNotification)(),{formatAPIError:c}=(0,M.useAPIErrorHandler)(W.g),{contentType:{uid:d}}=(0,ze.useSelector)(Kn()),[{query:h}]=(0,M.useQueryParams)(),{data:m,isLoading:v,isError:C}=(0,Bt.useQuery)(["content-manager","draft-relations",d,i],async()=>{const{data:{data:D}}=await o(`/content-manager/collection-types/${d}/actions/countManyEntriesDraftRelations`,{params:{ids:i,locale:h?.plugins?.i18n?.locale}});return D},{enabled:i.length>0,onError(D){l({type:"warning",message:c(D)})}});return C?null:(0,a.jsx)(cs,{isOpen:e&&!v,onToggleDialog:t,dialogBody:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(L.Z,{id:"confirm-description",textAlign:"center",children:[m>0&&s({id:(0,W.g)("popUpwarning.warning.bulk-has-draft-relations.message"),defaultMessage:"<b>{count} {count, plural, one { relation } other { relations } } out of {entities} { entities, plural, one { entry } other { entries } } {count, plural, one { is } other { are } }</b> not published yet and might lead to unexpected behavior. "},{b:hy,count:m,entities:i.length}),s({id:(0,W.g)("popUpWarning.bodyMessage.contentType.publish.all"),defaultMessage:"Are you sure you want to publish these entries?"})]}),(0,a.jsx)(vr,{area:"contentManager.listView.publishModalAdditionalInfos"})]}),endAction:(0,a.jsx)(De.z,{onClick:r,variant:"secondary",startIcon:(0,a.jsx)(an.Z,{}),loading:n,children:s({id:"app.utils.publish",defaultMessage:"Publish"})})})};ed.propTypes=yo;const gy=(0,ae.default)(L.Z)`
  max-width: 300px;
`,Eo=({validationErrors:e,isPublished:t})=>{const{formatMessage:n}=(0,Ee.Z)();if(e){const r=Object.entries(e).map(([s,o])=>n({id:`${o.id}.withField`,defaultMessage:o.defaultMessage},{field:s})).join(" ");return(0,a.jsxs)(T.k,{gap:2,children:[(0,a.jsx)(Ce.J,{color:"danger600",as:rg.Z}),(0,a.jsx)(Ct.u,{description:r,children:(0,a.jsx)(gy,{textColor:"danger600",variant:"omega",fontWeight:"semiBold",ellipsis:!0,children:r})})]})}return t?(0,a.jsxs)(T.k,{gap:2,children:[(0,a.jsx)(Ce.J,{color:"success600",as:js.Z}),(0,a.jsx)(L.Z,{textColor:"success600",fontWeight:"bold",children:n({id:"content-manager.bulk-publish.already-published",defaultMessage:"Already Published"})})]}):(0,a.jsxs)(T.k,{gap:2,children:[(0,a.jsx)(Ce.J,{color:"success600",as:js.Z}),(0,a.jsx)(L.Z,{children:n({id:"app.utils.ready-to-publish",defaultMessage:"Ready to publish"})})]})};Eo.defaultProps={validationErrors:void 0,isPublished:!1},Eo.propTypes={validationErrors:u.shape({[u.string]:u.shape({id:u.string,defaultMessage:u.string})}),isPublished:u.bool};const Bo=({isPublishing:e,rowsToDisplay:t,entriesToPublish:n,validationErrors:r})=>{const{location:{pathname:s}}=(0,Ye.k6)(),{formatMessage:o}=(0,Ee.Z)(),i=(0,ze.useSelector)(Kn()),{mainField:l}=i.contentType.settings,c=l!=null&&l!=="id",d=h=>o({id:"content-manager.components.ListViewTable.row-line",defaultMessage:"item line {number}"},{number:h+1});return(0,a.jsxs)(M.Table.Content,{children:[(0,a.jsxs)(M.Table.Head,{children:[(0,a.jsx)(M.Table.HeaderCheckboxCell,{}),(0,a.jsx)(M.Table.HeaderCell,{fieldSchemaType:"number",label:"id",name:"id"}),c&&(0,a.jsx)(M.Table.HeaderCell,{fieldSchemaType:"string",label:"name",name:"name"}),(0,a.jsx)(M.Table.HeaderCell,{fieldSchemaType:"string",label:"status",name:"status"})]}),(0,a.jsx)(M.Table.LoadingBody,{}),(0,a.jsx)(M.Table.Body,{children:t.map((h,m)=>(0,a.jsxs)(So.Tr,{children:[(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(us.CheckboxDataCell,{rowId:h.id,index:m})}),(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(L.Z,{children:h.id})}),c&&(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(L.Z,{children:h[l]})}),(0,a.jsx)(Ft.Td,{children:e&&n.includes(h.id)?(0,a.jsxs)(T.k,{gap:2,children:[(0,a.jsx)(L.Z,{children:o({id:"content-manager.success.record.publishing",defaultMessage:"Publishing..."})}),(0,a.jsx)(Io.a,{small:!0})]}):(0,a.jsx)(Eo,{validationErrors:r[h.id],isPublished:h.publishedAt!==null})}),(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(pe.h,{forwardedAs:Gn.Link,to:{pathname:`${s}/${h.id}`,state:{from:s}},label:o({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:d(m)}),noBorder:!0,target:"_blank",marginLeft:"auto",children:(0,a.jsx)(Qt.Z,{})})})]},h.id))})]})};Bo.defaultProps={isPublishing:!1,rowsToDisplay:[],entriesToPublish:[],validationErrors:{}},Bo.propTypes={isPublishing:u.bool,rowsToDisplay:u.arrayOf(u.object),entriesToPublish:u.arrayOf(u.number),validationErrors:u.shape({[u.string]:u.shape({id:u.string,defaultMessage:u.string})})};const td=e=>(0,a.jsx)(L.Z,{fontWeight:"bold",children:e}),Ao=({toggleModal:e,refetchModalData:t,setEntriesToFetch:n,setSelectedListViewEntries:r,validationErrors:s})=>{const{formatMessage:o}=(0,Ee.Z)(),{selectedEntries:i,rows:l,onSelectRow:c,isLoading:d,isFetching:h}=(0,M.useTableContext)(),[m,v]=g.useState(!1),[C,D]=g.useState([]),[f,y]=g.useState(0),x=l.filter(({id:I})=>i.includes(I)&&!s[I]).map(({id:I})=>I),{post:B}=(0,M.useFetchClient)(),A=(0,M.useNotification)(),{contentType:S}=(0,ze.useSelector)(Kn()),E=C.filter(({id:I})=>i.includes(I)&&s[I]).length,j=C.filter(({id:I,publishedAt:z})=>i.includes(I)&&z).length,R=i.length-E-j,Z=(0,Bt.useMutation)(I=>B(`/content-manager/collection-types/${S.uid}/actions/bulkPublish`,I),{onSuccess(){const I=C.filter(U=>(x.includes(U.id)&&c({name:U.id,value:!1}),!x.includes(U.id)));D(I);const z=I.map(({id:U})=>U);n(z),r(z),I.length===0&&e(),A({type:"success",message:{id:"content-manager.success.record.publish",defaultMessage:"Published"}})},onError(I){A({type:"warning",message:(0,SC.f)(I)})}}),F=()=>v(I=>!I),P=async()=>{F();const{data:I}=await Z.mutateAsync({ids:x});y(I.count)},Q=()=>f?o({id:(0,W.g)("containers.ListPage.selectedEntriesModal.publishedCount"),defaultMessage:"<b>{publishedCount}</b> {publishedCount, plural, =0 {entries} one {entry} other {entries}} published. <b>{withErrorsCount}</b> {withErrorsCount, plural, =0 {entries} one {entry} other {entries}} waiting for action."},{publishedCount:f,withErrorsCount:E,b:td}):o({id:(0,W.g)("containers.ListPage.selectedEntriesModal.selectedCount"),defaultMessage:"<b>{alreadyPublishedCount}</b> {alreadyPublishedCount, plural, =0 {entries} one {entry} other {entries}} already published. <b>{readyToPublishCount}</b> {readyToPublishCount, plural, =0 {entries} one {entry} other {entries}} ready to publish. <b>{withErrorsCount}</b> {withErrorsCount, plural, =0 {entries} one {entry} other {entries}} waiting for action."},{readyToPublishCount:R,withErrorsCount:E,alreadyPublishedCount:j,b:td});return g.useEffect(()=>{l.length>0&&D(l)},[l]),(0,a.jsxs)(xe.P,{onClose:e,labelledBy:"title",children:[(0,a.jsx)(me.x,{children:(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:o({id:(0,W.g)("containers.ListPage.selectedEntriesModal.title"),defaultMessage:"Publish entries"})})}),(0,a.jsxs)(ye.f,{children:[(0,a.jsx)(L.Z,{children:Q()}),(0,a.jsx)($.x,{marginTop:5,children:(0,a.jsx)(Bo,{isPublishing:Z.isLoading,rowsToDisplay:C,entriesToPublish:x,validationErrors:s})})]}),(0,a.jsx)(we.m,{startActions:(0,a.jsx)(De.z,{onClick:e,variant:"tertiary",children:o({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,a.jsxs)(T.k,{gap:2,children:[(0,a.jsx)(De.z,{onClick:t,variant:"tertiary",loading:h,children:o({id:"app.utils.refresh",defaultMessage:"Refresh"})}),(0,a.jsx)(De.z,{onClick:F,disabled:i.length===0||i.length===E||d,loading:Z.isLoading,children:o({id:"app.utils.publish",defaultMessage:"Publish"})})]})}),(0,a.jsx)(ed,{isOpen:m,onToggleDialog:F,isConfirmButtonLoading:Z.isLoading,onConfirm:P})]})};Ao.defaultProps={validationErrors:{}},Ao.propTypes={toggleModal:u.func.isRequired,refetchModalData:u.func.isRequired,setEntriesToFetch:u.func.isRequired,setSelectedListViewEntries:u.func.isRequired,validationErrors:u.shape({[u.string]:u.shape({id:u.string,defaultMessage:u.string})})};const nd=({onToggle:e})=>{const{selectedEntries:t,setSelectedEntries:n}=(0,M.useTableContext)(),{contentType:r,components:s}=(0,ze.useSelector)(Kn()),[o,i]=g.useState(t),[{query:{sort:l,plugins:c}}]=(0,M.useQueryParams)(),d={page:1,pageSize:o.length,sort:l,filters:{id:{$in:o}},locale:c?.i18n?.locale},{get:h}=(0,M.useFetchClient)(),{data:m,isLoading:v,isFetching:C,refetch:D}=(0,Bt.useQuery)(["entries",r.uid,d],async()=>{const{data:f}=await h(`content-manager/collection-types/${r.uid}`,{params:d});if(f.results){const y=(0,W.a)(r,{components:s},{isDraft:!1,isJSONTestDisabled:!0}),x={};return{rows:f.results.map(A=>{try{return y.validateSync(A,{abortEarly:!1}),A}catch(S){return x[A.id]=(0,M.getYupInnerErrors)(S),A}}),validationErrors:x}}return{rows:[],validationErrors:{}}});return(0,a.jsx)(M.Table.Root,{rows:m?.rows,defaultSelectedEntries:t,colCount:4,isLoading:v,isFetching:C,children:(0,a.jsx)(Ao,{setSelectedListViewEntries:n,setEntriesToFetch:i,toggleModal:e,refetchModalData:D,validationErrors:m?.validationErrors})})};nd.propTypes={onToggle:u.func.isRequired};const rd=({isOpen:e,onToggleDialog:t,isConfirmButtonLoading:n,onConfirm:r})=>{const{formatMessage:s}=(0,Ee.Z)();return(0,a.jsx)(cs,{isOpen:e,onToggleDialog:t,dialogBody:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{id:"confirm-description",textAlign:"center",children:s({id:(0,W.g)("popUpWarning.bodyMessage.contentType.unpublish.all"),defaultMessage:"Are you sure you want to unpublish these entries?"})}),(0,a.jsx)(vr,{area:"contentManager.listView.unpublishModalAdditionalInfos"})]}),endAction:(0,a.jsx)(De.z,{onClick:r,variant:"secondary",startIcon:(0,a.jsx)(an.Z,{}),loading:n,children:s({id:"app.utils.unpublish",defaultMessage:"Unpublish"})})})};rd.propTypes=yo;const sd=({isOpen:e,onToggleDialog:t,isConfirmButtonLoading:n,onConfirm:r})=>{const{formatMessage:s}=(0,Ee.Z)();return(0,a.jsx)(cs,{isOpen:e,onToggleDialog:t,dialogBody:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{id:"confirm-description",textAlign:"center",children:s({id:(0,W.g)("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"})}),(0,a.jsx)(vr,{area:"contentManager.listView.deleteModalAdditionalInfos"})]}),endAction:(0,a.jsx)(De.z,{onClick:r,variant:"danger-light",startIcon:(0,a.jsx)(qt.Z,{}),id:"confirm-delete",loading:n,children:s({id:"app.components.Button.confirm",defaultMessage:"Confirm"})})})};sd.propTypes=yo;const jo=({showPublish:e,showDelete:t,onConfirmDeleteAll:n,onConfirmUnpublishAll:r,refetchData:s})=>{const{formatMessage:o}=(0,Ee.Z)(),{trackUsage:i}=(0,M.useTracking)(),{data:l}=(0,ze.useSelector)(Kn()),{selectedEntries:c,setSelectedEntries:d}=(0,M.useTableContext)(),[h,m]=g.useState(!1),[v,C]=g.useState(!1),[D,f]=g.useState(null),y=l.filter(F=>c.includes(F.id)),x=e&&y.some(F=>!F.publishedAt),B=e&&y.some(F=>F.publishedAt),A=()=>{D==="delete"?f(null):(f("delete"),i("willBulkDeleteEntries"))},S=()=>{D==="unpublish"?f(null):(f("unpublish"),i("willBulkUnpublishEntries"))},E=async(F,P)=>{try{m(!0),await F(c),m(!1),P(),d([])}catch{m(!1),P()}},j=()=>E(n,A),R=()=>E(r,S),Z=()=>{C(F=>(F&&s(),!F))};return(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(De.z,{variant:"tertiary",onClick:Z,children:o({id:"app.utils.publish",defaultMessage:"Publish"})}),v&&(0,a.jsx)(nd,{onToggle:Z})]}),B&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(De.z,{variant:"tertiary",onClick:S,children:o({id:"app.utils.unpublish",defaultMessage:"Unpublish"})}),(0,a.jsx)(rd,{isOpen:D==="unpublish",onToggleDialog:S,isConfirmButtonLoading:h,onConfirm:R})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(De.z,{variant:"danger-light",onClick:A,children:o({id:"global.delete",defaultMessage:"Delete"})}),(0,a.jsx)(sd,{isOpen:D==="delete",onToggleDialog:A,isConfirmButtonLoading:h,onConfirm:j})]})]})};jo.defaultProps={showPublish:!1,showDelete:!1,onConfirmDeleteAll(){},onConfirmUnpublishAll(){},refetchData(){}},jo.propTypes={showPublish:u.bool,showDelete:u.bool,onConfirmDeleteAll:u.func,onConfirmUnpublishAll:u.func,refetchData:u.func};const jn=({type:e,value:t})=>{const{formatDate:n,formatTime:r,formatNumber:s}=(0,Ee.Z)();let o=t;if(e==="date"&&(o=n((0,IC.Z)(t),{dateStyle:"full"})),e==="datetime"&&(o=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[i,l,c]=t.split(":"),d=new Date;d.setHours(i),d.setMinutes(l),d.setSeconds(c),o=r(d,{numeric:"auto",style:"short"})}return["float","decimal"].includes(e)&&(o=s(t,{maximumFractionDigits:20})),["integer","biginteger"].includes(e)&&(o=s(t,{maximumFractionDigits:0})),du(o)};jn.propTypes={type:u.string.isRequired,value:u.any.isRequired};const py=(0,ae.default)(T.k)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,wo=({children:e,...t})=>(0,a.jsx)(py,{justifyContent:"center",alignItems:"center",as:"span",...t,children:(0,a.jsx)(L.Z,{variant:"sigma",textColor:"neutral600",children:e})});wo.propTypes={children:u.string.isRequired};const ds=({url:e,mime:t,alternativeText:n,name:r,ext:s,formats:o})=>{const i=(0,M.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const d=o?.thumbnail?.url||null,h=(0,M.prefixFileUrlWithBackendUrl)(d)||i;return(0,a.jsx)(Fd.q,{src:h,alt:n||r,preview:!0})}const l=(0,M.getFileExtension)(s),c=r.length>100?`${r.substring(0,100)}...`:r;return(0,a.jsx)(Ct.u,{description:c,children:(0,a.jsx)(wo,{children:l})})};ds.defaultProps={alternativeText:null,formats:null},ds.propTypes={alternativeText:u.string,ext:u.string.isRequired,formats:u.object,mime:u.string.isRequired,name:u.string.isRequired,url:u.string.isRequired};const ad=({value:e})=>(0,a.jsx)(Td,{children:e.map((t,n)=>{const r=`${t.id}${n}`;if(n===3){const s=`+${e.length-3}`;return(0,a.jsx)(wo,{preview:!1,children:s},r)}return n>3?null:(0,a.jsx)(ds,{...t},r)})});ad.propTypes={value:u.arrayOf(u.shape({alternativeText:u.string,ext:u.string.isRequired,formats:u.object,mime:u.string.isRequired,name:u.string.isRequired,url:u.string.isRequired})).isRequired};const od=({fieldSchema:e,metadatas:t,name:n,entityId:r,value:s,contentType:o})=>{const{formatMessage:i}=(0,Ee.Z)(),{notifyStatus:l}=(0,ps.G)(),[c,d]=(0,g.useState)(!1),{get:h}=(0,M.useFetchClient)(),{data:m,status:v}=(0,Bt.useQuery)([e.targetModel,r],async()=>{const{data:{results:C,pagination:D}}=await h(`/content-manager/relations/${o.uid}/${r}/${n.split(".")[0]}`);return{results:C,pagination:D}},{enabled:c,staleTime:0,select:C=>({...C,results:[...C.results].reverse()})});return(0,g.useEffect)(()=>{m&&l(i({id:(0,W.g)("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"}))},[m,i,l]),(0,a.jsxs)(_e.fC,{onOpenChange:C=>d(C),children:[(0,a.jsx)(vy,{onClick:C=>C.stopPropagation(),children:(0,a.jsxs)(T.k,{gap:1,wrap:"nowrap",children:[(0,a.jsx)(Po.C,{children:s.count}),i({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:s.count})]})}),(0,a.jsxs)(_e.VY,{children:[v!=="success"&&(0,a.jsx)(_e.ck,{disabled:!0,children:(0,a.jsx)(Io.a,{small:!0,children:i({id:(0,W.g)("ListViewTable.relation-loading"),defaultMessage:"Relations are loading"})})}),v==="success"&&(0,a.jsxs)(a.Fragment,{children:[m?.results.map(C=>(0,a.jsx)(_e.ck,{disabled:!0,children:(0,a.jsx)(my,{ellipsis:!0,children:(0,a.jsx)(jn,{type:t.mainField.schema.type,value:C[t.mainField.name]||C.id})})},C.id)),m?.pagination.total>10&&(0,a.jsx)(_e.ck,{"aria-disabled":!0,"aria-label":i({id:(0,W.g)("ListViewTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"}),children:(0,a.jsx)(L.Z,{children:"\u2026"})})]})]})]})};od.propTypes={contentType:u.shape({uid:u.string.isRequired}).isRequired,fieldSchema:u.shape({relation:u.string,targetModel:u.string,type:u.string.isRequired}).isRequired,metadatas:u.shape({mainField:u.shape({name:u.string.isRequired,schema:u.shape({type:u.string.isRequired}).isRequired})}).isRequired,name:u.string.isRequired,entityId:u.oneOfType([u.string,u.number]).isRequired,value:u.object.isRequired};const my=(0,ae.default)(L.Z)`
  max-width: 500px;
`,vy=(0,ae.default)(_e.xz)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,Cy=(0,ae.default)(L.Z)`
  max-width: 500px;
`,id=({metadatas:e,value:t})=>(0,a.jsx)(Cy,{textColor:"neutral800",ellipsis:!0,children:(0,a.jsx)(jn,{type:e.mainField.schema.type,value:t[e.mainField.name]??t.id})});id.propTypes={metadatas:u.shape({mainField:u.shape({name:u.string.isRequired,schema:u.shape({type:u.string.isRequired}).isRequired})}).isRequired,value:u.object.isRequired};const Dy=(0,ae.default)(L.Z)`
  max-width: 500px;
`,ld=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,Ee.Z)(),{mainField:{type:r,name:s}}=t;return(0,a.jsxs)(_e.fC,{children:[(0,a.jsxs)(by,{onClick:o=>o.stopPropagation(),children:[(0,a.jsx)(Po.C,{children:e.length})," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length})]}),(0,a.jsx)(_e.VY,{children:e.map(o=>(0,a.jsx)(_e.ck,{disabled:!0,children:(0,a.jsx)(Dy,{ellipsis:!0,children:(0,a.jsx)(jn,{type:r,value:o[s]||o.id})})},o.id))})]})};ld.propTypes={metadatas:u.shape({mainField:u.shape({name:u.string,type:u.string,value:u.string})}).isRequired,value:u.array.isRequired};const by=(0,ae.default)(_e.xz)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,xy=(0,ae.default)(L.Z)`
  max-width: 250px;
`,ud=({value:e,metadatas:t})=>{const{mainField:n}=t,r=e[n.name];return(0,a.jsx)(Ct.u,{label:r,children:(0,a.jsx)(xy,{textColor:"neutral800",ellipsis:!0,children:(0,a.jsx)(jn,{type:n.type,value:r})})})};ud.propTypes={metadatas:u.shape({mainField:u.shape({name:u.string,type:u.string,value:u.string})}).isRequired,value:u.object.isRequired};function cd(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function yy(e,t,n,r){if(e==="component"){const{mainField:{name:s,type:o}}=n;if(r?.repeatable)return t.length>0;const i=t?.[s];return s==="id"&&![void 0,null].includes(i)?!0:(0,W.i)(o)&&o!=="biginteger"&&s!=="id"?Du(i):!zt(i)}return e==="relation"?cd(r.relation)?!zt(t):t?.count>0:(0,W.i)(e)&&e!=="biginteger"?Du(t):e==="boolean"?t!==null:!zt(t)}const dd=(0,ae.default)(L.Z)`
  max-width: 300px;
`,Fo=({content:e,fieldSchema:t,metadatas:n,name:r,rowId:s,contentType:o})=>{const{type:i}=t;if(!yy(i,e,n,t))return(0,a.jsx)(L.Z,{textColor:"neutral800",children:"-"});switch(i){case"media":return t.multiple?(0,a.jsx)(ad,{value:e}):(0,a.jsx)(ds,{...e});case"relation":return cd(t.relation)?(0,a.jsx)(id,{metadatas:n,value:e}):(0,a.jsx)(od,{fieldSchema:t,metadatas:n,value:e,name:r,entityId:s,contentType:o});case"component":return t.repeatable===!0?(0,a.jsx)(ld,{value:e,metadatas:n}):(0,a.jsx)(ud,{value:e,metadatas:n});case"string":return(0,a.jsx)(Ct.u,{description:e,children:(0,a.jsx)(dd,{ellipsis:!0,textColor:"neutral800",children:(0,a.jsx)(jn,{type:i,value:e})})});default:return(0,a.jsx)(dd,{ellipsis:!0,textColor:"neutral800",children:(0,a.jsx)(jn,{type:i,value:e})})}};Fo.defaultProps={content:void 0},Fo.propTypes={content:u.any,contentType:u.shape({uid:u.string.isRequired}).isRequired,fieldSchema:u.shape({component:u.string,multiple:u.bool,type:u.string.isRequired,repeatable:u.bool,relation:u.string}).isRequired,metadatas:u.object.isRequired,name:u.string.isRequired,rowId:u.oneOfType([u.string,u.number]).isRequired};const Ey=(0,ae.default)(T.k)`
  :hover {
    background-color: ${e=>e.theme.colors.primary100};
  }
`,fd=({layout:e})=>{const t=(0,ze.useDispatch)(),n=(0,ze.useSelector)(_c),{trackUsage:r}=(0,M.useTracking)(),{formatMessage:s,locale:o}=(0,Ee.Z)(),i=(0,M.useCollator)(o,{sensitivity:"base"}),l=Object.keys(e.contentType.attributes).filter(m=>Eu(e.contentType.attributes[m])).map(m=>({name:m,label:e.contentType.metadatas[m].list.label})).sort((m,v)=>i.compare(m.label,v.label)),c=n.map(({name:m})=>m),d=m=>{r("didChangeDisplayedFields"),t(ly({name:m,value:c.includes(m)}))},h=()=>{t(ay())};return(0,a.jsxs)(T.k,{as:"fieldset",direction:"column",alignItems:"stretch",gap:3,children:[(0,a.jsxs)(T.k,{justifyContent:"space-between",children:[(0,a.jsx)(L.Z,{as:"legend",variant:"pi",fontWeight:"bold",children:s({id:"containers.ListPage.displayedFields",defaultMessage:"Displayed fields"})}),(0,a.jsx)(hs.A,{onClick:h,children:s({id:"app.components.Button.reset",defaultMessage:"Reset"})})]}),(0,a.jsx)(T.k,{direction:"column",alignItems:"stretch",children:l.map(m=>{const v=c.includes(m.name);return(0,a.jsxs)(Ey,{wrap:"wrap",gap:2,as:"label",background:v?"primary100":"transparent",hasRadius:!0,padding:2,children:[(0,a.jsx)(Oo.C,{onChange:()=>d(m.name),value:v,name:m.name}),(0,a.jsx)(L.Z,{fontSize:1,children:m.label})]},m.name)})})]})};fd.propTypes={layout:u.shape({contentType:u.shape({attributes:u.object.isRequired,metadatas:u.object.isRequired,layouts:u.shape({list:u.array.isRequired}).isRequired,options:u.object.isRequired,settings:u.object.isRequired}).isRequired}).isRequired};const hd=({slug:e,layout:t})=>{const[n,r]=g.useState(!1),s=g.useRef(),o=(0,ze.useSelector)(wn.s),{formatMessage:i}=(0,Ee.Z)(),l=()=>{r(c=>!c)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pe.h,{icon:(0,a.jsx)(vs.Z,{}),label:i({id:"components.ViewSettings.tooltip",defaultMessage:"View Settings"}),ref:s,onClick:l}),n&&(0,a.jsx)(tt.J2,{placement:"bottom-end",source:s,onDismiss:l,spacing:4,padding:3,children:(0,a.jsxs)(T.k,{alignItems:"stretch",direction:"column",gap:3,children:[(0,a.jsx)(M.CheckPermissions,{permissions:o.contentManager.collectionTypesConfigurations,children:(0,a.jsx)(M.LinkButton,{size:"S",startIcon:(0,a.jsx)(Cs.Z,{}),to:`${e}/configurations/list`,variant:"secondary",children:i({id:"app.links.configure-view",defaultMessage:"Configure the view"})})}),(0,a.jsx)(fd,{layout:t})]})})]})};hd.propTypes={slug:u.string.isRequired,layout:u.shape({contentType:u.shape({attributes:u.object.isRequired,metadatas:u.object.isRequired,layouts:u.shape({list:u.array.isRequired}).isRequired,options:u.object.isRequired,settings:u.object.isRequired}).isRequired}).isRequired};const{INJECT_COLUMN_IN_TABLE:By}=Ue.H,Ay=null,jy=()=>null,wy=[],Fy=[...as,"strapi_assignee"];function gd({canCreate:e,canDelete:t,canRead:n,canPublish:r,layout:s,slug:o}){const i=(0,ze.useDispatch)(),{getData:l,getDataSucceeded:c}=g.useMemo(()=>(0,TC.bindActionCreators)({getData:ry,getDataSucceeded:sy},i),[i]),{pagination:d,isLoading:h,data:m}=(0,Ue.b)(fy()),{total:v}=d,{contentType:C}=s,{info:D,options:f,metadatas:y,settings:{bulkable:x,filterable:B,searchable:A}}=C,[S,E]=g.useState(!1),j=(0,M.useNotification)(),{trackUsage:R}=(0,M.useTracking)(),{allPermissions:Z,refetchPermissions:F}=(0,M.useRBACProvider)(),P=g.useRef(R),Q=g.useRef(F),{notifyStatus:I}=(0,ps.G)(),{formatAPIError:z}=(0,M.useAPIErrorHandler)(W.g),U=dy(C,o),[{query:k}]=(0,M.useQueryParams)(),{pathname:N}=(0,Ye.TH)(),{push:q}=(0,Ye.k6)(),{formatMessage:V,locale:re}=(0,Ee.Z)(),J=(0,M.useFetchClient)(),oe=(0,M.useCollator)(re,{sensitivity:"base"}),ne=k?.filters?.$and?.reduce((Re,Ne)=>{const[ce,fe]=Object.entries(Ne)[0],Ie=fe.id?.$eq||fe.id?.$ne;return Fy.includes(ce)&&!Re.includes(Ie)&&Re.push(Ie),Re},[])??[],{users:ue,isLoading:w}=(0,Cu.u)({filter:{id:{in:ne}}},{enabled:ne.length>0&&(0,M.findMatchingPermissions)(Z,[{action:"admin::users.read",subject:null}]).length>0});(0,M.useFocusWhenNavigate)();const X=g.useMemo(()=>Ic(k),[k]),Y=(0,Yt.stringify)({plugins:k.plugins},{encode:!1}),se=U.map(Re=>{const Ne=C.attributes[Re],{type:ce,enum:fe}=Ne,Ie={name:"didFilterEntries",properties:{useRelation:ce==="relation"}},{mainField:ot,label:Pt}=y[Re].list,kt={name:Re,metadatas:{label:V({id:Pt,defaultMessage:Pt})},fieldSchema:{type:ce,options:fe,mainField:ot},trackedEvent:Ie};return Ne.type==="relation"&&Ne.target==="admin::user"&&(kt.metadatas={...kt.metadatas,customOperators:[{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$eq",defaultMessage:"is"},value:"$eq"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$ne",defaultMessage:"is not"},value:"$ne"}],customInput:bo,options:ue.map(Cr=>({label:Wn(Cr,V),customValue:Cr.id.toString()}))},kt.fieldSchema.mainField={...ot,name:"id"}),kt}),H=f?.draftAndPublish??!1,ie=f?.reviewWorkflows??!1,Ae=(0,Ue.p)(Ay,async()=>(await p.e(223).then(p.bind(p,60223))).REVIEW_WORKFLOW_COLUMNS_EE,{enabled:!!f?.reviewWorkflows}),Me=(0,Ue.p)(jy,async()=>{const{ReviewWorkflowsStageEE:Re,ReviewWorkflowsAssigneeEE:Ne}=await p.e(9639).then(p.bind(p,39639));return{ReviewWorkflowsStageEE:Re,ReviewWorkflowsAssigneeEE:Ne}},{enabled:ie}),Le=(0,Ue.p)(wy,async()=>(await p.e(7226).then(p.bind(p,94102))).REVIEW_WORKFLOW_FILTERS,{combine(Re,Ne){return[...Re,...Ne.filter(ce=>ce.name==="strapi_assignee"?(0,M.findMatchingPermissions)(Z,[{action:"admin::users.read",subject:null}]).length>0:!0).map(ce=>({...ce,metadatas:{...ce.metadatas,...ce.name==="strapi_stage"?{uid:C.uid}:{},label:V(ce.metadatas.label),options:ce.name==="strapi_assignee"&&ue.map(fe=>({label:Wn(fe,V),customValue:fe.id.toString()}))}}))]},defaultValue:[],enabled:ie&&!w}),{post:Ve,del:je}=J,et=(0,Bt.useMutation)(Re=>Ve(`/content-manager/collection-types/${C.uid}/actions/bulkUnpublish`,Re),{onSuccess(){j({type:"success",message:{id:"content-manager.success.record.unpublish",defaultMessage:"Unpublished"}}),He(`/content-manager/collection-types/${o}`,{params:X})},onError(Re){j({type:"warning",message:z(Re)})}}),Qe=g.useRef(""),He=g.useCallback(async(Re,Ne)=>{l();try{const{data:{results:ce,pagination:fe}}=await J.get(Re,Ne);if(fe.page>fe.pageCount&&fe.pageCount>0){const Ie={...X,page:fe.pageCount};q({pathname:N,state:{from:N},search:(0,Yt.stringify)(Ie)});return}I(V({id:(0,W.g)("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:fe.count})),c(fe,ce)}catch(ce){if(Tt.default.isCancel(ce))return;if((ce?.response?.status??null)===403){await Q.current(),j({type:"info",message:{id:(0,W.g)("permissions.not-allowed.update")}}),q("/");return}j({type:"warning",message:{id:(0,W.g)("error.model.fetch")}})}},[V,l,c,I,q,j,J,X,N]),ct=g.useCallback(async Re=>{try{await Ve(`/content-manager/collection-types/${o}/actions/bulkDelete`,{ids:Re}),He(`/content-manager/collection-types/${o}`,{params:X}),P.current("didBulkDeleteEntries")}catch(Ne){j({type:"warning",message:z(Ne)})}},[o,j,z,Ve,He,X]),ht=g.useCallback(async Re=>{try{await je(`/content-manager/collection-types/${o}/${Re}`);const Ne=`/content-manager/collection-types/${o}`;He(Ne,{params:X}),j({type:"success",message:{id:(0,W.g)("success.record.delete")}})}catch(Ne){j({type:"warning",message:z(Ne)})}},[o,j,z,je,He,X]),$e=Re=>et.mutateAsync({ids:Re});g.useEffect(()=>{const Ne=Tt.default.CancelToken.source(),ce=n,fe=`/content-manager/collection-types/${o}`;return ce&&fe.includes(Qe.current)&&He(fe,{cancelToken:Ne.token,params:X}),()=>{Qe.current=o,Ne.cancel("Operation canceled by the user.")}},[n,l,o,X,c,He]);const Je=V({id:(0,W.g)("header.name"),defaultMessage:"Content"}),Ke=V({id:D.displayName,defaultMessage:D.displayName||Je}),{runHookWaterfall:gt}=(0,M.useStrapiApp)(),it=(0,Ue.b)(_c),qe=g.useMemo(()=>{const Ne=gt(By,{displayedHeaders:it,layout:s}).displayedHeaders.map(ce=>{const{metadatas:fe}=ce;if(ce.fieldSchema.type==="relation"){const Ie=`${ce.name}.${ce.metadatas.mainField.name}`;return{...ce,metadatas:{...fe,label:V({id:(0,W.g)(`containers.ListPage.table-headers.${ce.name}`),defaultMessage:fe.label})},name:Ie}}return{...ce,metadatas:{...fe,label:V({id:(0,W.g)(`containers.ListPage.table-headers.${ce.name}`),defaultMessage:fe.label})}}});return H&&Ne.push({key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:V({id:(0,W.g)("containers.ListPage.table-headers.publishedAt"),defaultMessage:"publishedAt"}),searchable:!1,sortable:!0}}),Ae&&(Ae.map(ce=>(typeof ce.metadatas.label!="string"&&(ce.metadatas.label=V(ce.metadatas.label)),ce)),Ne.push(...Ae)),Ne},[gt,it,s,Ae,H,V]),yt=n?V({id:(0,W.g)("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:v}):null,nn=Re=>e?(0,a.jsx)(De.z,{...Re,forwardedAs:Gn.Link,onClick:()=>{const Ne=H?{status:"draft"}:{};P.current("willCreateEntry",Ne)},to:{pathname:`${N}/create`,search:k.plugins?Y:""},startIcon:(0,a.jsx)(Fn.Z,{}),style:{textDecoration:"none"},children:V({id:(0,W.g)("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})}):null,Et=Re=>()=>{R("willEditEntryFromList"),q({pathname:`${N}/${Re}`,state:{from:N},search:Y})},Wt=Re=>async()=>{try{const{data:Ne}=await Ve(`/content-manager/collection-types/${C.uid}/auto-clone/${Re}?${Y}`);"id"in Ne&&q({pathname:`${N}/${Ne.id}`,state:{from:N},search:Y})}catch(Ne){Ne instanceof kd.d7&&q({pathname:`${N}/create/clone/${Re}`,state:{from:N,error:z(Ne)},search:Y})}},pn=qe.length+2,Ut=()=>{He(`/content-manager/collection-types/${o}`,{params:X})};return Me?(0,a.jsxs)(Oe.o,{"aria-busy":h,children:[(0,a.jsx)(Ze.T,{primaryAction:nn(),subtitle:yt,title:Ke,navigationAction:(0,a.jsx)(M.Link,{startIcon:(0,a.jsx)(Yn.Z,{}),to:"/content-manager/",children:V({id:"global.back",defaultMessage:"Back"})})}),!n&&(0,a.jsx)(ko.Z,{endActions:(0,a.jsx)(Ue.q,{area:"contentManager.listView.actions"})}),n&&(0,a.jsx)(ko.Z,{endActions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ue.q,{area:"contentManager.listView.actions"}),(0,a.jsx)(hd,{slug:o,layout:s})]}),startActions:(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)(M.SearchURLQuery,{label:V({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:Ke}),placeholder:V({id:"global.search",defaultMessage:"Search"}),trackedEvent:"didSearch"}),B&&!w&&(0,a.jsx)(Gc,{displayedFilters:[...se,...Le].sort((Re,Ne)=>oe.compare(Re.metadatas.label,Ne.metadatas.label))})]})}),(0,a.jsx)(Ge.D,{children:n?(0,a.jsxs)(T.k,{gap:4,direction:"column",alignItems:"stretch",children:[(0,a.jsxs)(M.Table.Root,{rows:m,isLoading:h,colCount:pn,children:[(0,a.jsx)(M.Table.ActionBar,{children:(0,a.jsx)(jo,{showPublish:r&&H,showDelete:t,onConfirmDeleteAll:ct,onConfirmUnpublishAll:$e,refetchData:Ut})}),(0,a.jsxs)(M.Table.Content,{children:[(0,a.jsxs)(M.Table.Head,{children:[(0,a.jsx)(M.Table.HeaderCheckboxCell,{}),qe.map(({fieldSchema:Re,key:Ne,name:ce,metadatas:fe})=>(0,a.jsx)(M.Table.HeaderCell,{name:ce,fieldSchemaType:Re.type,relationFieldName:fe.mainField?.name,isSortable:fe.sortable,label:fe.label},Ne)),(0,a.jsx)(M.Table.HeaderHiddenActionsCell,{})]}),(0,a.jsx)(M.Table.LoadingBody,{}),(0,a.jsx)(M.Table.EmptyBody,{contentType:Ke,action:nn({variant:"secondary"})}),(0,a.jsx)(us.Root,{onConfirmDelete:ht,isConfirmDeleteRowOpen:S,setIsConfirmDeleteRowOpen:E,children:m.map((Re,Ne)=>(0,a.jsxs)(So.Tr,{cursor:"pointer",onClick:Et(Re.id),children:[(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(us.CheckboxDataCell,{rowId:Re.id,index:Ne})}),qe.map(({key:ce,name:fe,cellFormatter:Ie,...ot})=>{if(H&&fe==="publishedAt")return(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(gs,{width:"min-content",showBullet:!1,variant:Re.publishedAt?"success":"secondary",size:"S",children:(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:`${Re.publishedAt?"success":"secondary"}700`,children:V({id:(0,W.g)(`containers.List.${Re.publishedAt?"published":"draft"}`),defaultMessage:Re.publishedAt?"Published":"Draft"})})})},ce);if(ie){if(fe==="strapi_stage")return(0,a.jsx)(Ft.Td,{children:Re.strapi_stage?(0,a.jsx)(Me.ReviewWorkflowsStageEE,{color:Re.strapi_stage.color??Md.W.colors.primary600,name:Re.strapi_stage.name}):(0,a.jsx)(L.Z,{textColor:"neutral800",children:"-"})},ce);if(fe==="strapi_assignee")return(0,a.jsx)(Ft.Td,{children:Re.strapi_assignee?(0,a.jsx)(Me.ReviewWorkflowsAssigneeEE,{user:Re.strapi_assignee}):(0,a.jsx)(L.Z,{textColor:"neutral800",children:"-"})},ce)}return["createdBy","updatedBy"].includes(fe.split(".")[0])?(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(L.Z,{textColor:"neutral800",children:Re[fe.split(".")[0]]?Wn(Re[fe.split(".")[0]],V):"-"})},ce):typeof Ie=="function"?(0,a.jsx)(Ft.Td,{children:Ie(Re,{key:ce,name:fe,...ot})},ce):(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(Fo,{content:Re[fe.split(".")[0]],name:fe,contentType:s.contentType,...ot,rowId:Re.id})},ce)}),(t||r)&&x&&(0,a.jsx)(Ft.Td,{children:(0,a.jsx)(us.EntityActionsDataCell,{rowId:Re.id,index:Ne,setIsConfirmDeleteRowOpen:E,canCreate:e,canDelete:t,handleCloneClick:Wt})})]},Re.id))})]})]}),(0,a.jsxs)(T.k,{alignItems:"flex-end",justifyContent:"space-between",children:[(0,a.jsx)(M.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),(0,a.jsx)(M.PaginationURLQuery,{pagination:{pageCount:d?.pageCount||1}})]})]}):(0,a.jsx)(M.NoPermissions,{})})]}):null}gd.propTypes={canCreate:u.bool.isRequired,canDelete:u.bool.isRequired,canRead:u.bool.isRequired,canPublish:u.bool.isRequired,layout:u.exact({components:u.object.isRequired,contentType:u.shape({uid:u.string.isRequired,attributes:u.object.isRequired,metadatas:u.object.isRequired,info:u.shape({displayName:u.string.isRequired}).isRequired,layouts:u.shape({list:u.array.isRequired}).isRequired,options:u.object.isRequired,settings:u.object.isRequired}).isRequired}).isRequired,slug:u.string.isRequired};const Ry=g.memo(gd,Ot),Ro=e=>{const t=(0,g.useMemo)(()=>Bu(e.slug),[e.slug]),{isLoading:n,allowedActions:r}=(0,M.useRBAC)(t,e.permissions);return n?(0,a.jsx)(M.LoadingIndicatorPage,{}):(0,a.jsx)(Ry,{...e,...r})};Ro.defaultProps={permissions:[]},Ro.propTypes={permissions:u.array,slug:u.string.isRequired};const Ty=(0,g.memo)(Ro,(e,t)=>{const n=(0,M.difference)(e,t);return Object.keys(n).filter(s=>s!=="state").length>0}),pd=({layout:e,...t})=>{const n=(0,ze.useDispatch)(),{replace:r}=(0,Ye.k6)(),[{query:s,rawQuery:o}]=(0,M.useQueryParams)(),{permissions:i,isValid:l}=ku(s,t.slug,"listView"),c=Su(t.slug);return(0,g.useEffect)(()=>{o||r(c)},[o,r,c]),(0,g.useEffect)(()=>{n(iy(e))},[n,e]),(0,g.useEffect)(()=>()=>{n(oy())},[n]),l?(0,a.jsx)(Ty,{...t,layout:e,permissions:i}):null};pd.propTypes={layout:u.exact({components:u.object.isRequired,contentType:u.shape({attributes:u.object.isRequired,metadatas:u.object.isRequired,layouts:u.shape({list:u.array.isRequired}).isRequired,options:u.object.isRequired,settings:u.object.isRequired,pluginOptions:u.object}).isRequired}).isRequired,slug:u.string.isRequired};const My=()=>(0,a.jsx)($.x,{padding:8,children:(0,a.jsx)(M.AnErrorOccurred,{})}),md=({match:{params:{slug:e},url:t}})=>{const n=(0,ze.useSelector)(wn.s),{isLoading:r,layout:s,updateLayout:o}=Mu(e),{rawContentTypeLayout:i,rawComponentsLayouts:l}=(0,g.useMemo)(()=>{let m={},v={};return s.contentType&&(m=Yr(s.contentType)),s.components&&(v=Object.keys(s.components).reduce((C,D)=>(C[D]=Yr(s.components[D]),C),{})),{rawContentTypeLayout:m,rawComponentsLayouts:v}},[s]);if((s?.contentType?.uid??null)!==e||r)return(0,a.jsx)(M.LoadingIndicatorPage,{});const d=({location:{state:m},history:{goBack:v},match:{params:{id:C,origin:D}}},f)=>(0,a.jsx)(f,{slug:e,layout:s,state:m,goBack:v,id:C,origin:D}),h=[{path:"create/clone/:origin",comp:pr},{path:"create",comp:pr},{path:":id",comp:pr},{path:"",comp:pd}].map(({path:m,comp:v})=>(0,a.jsx)(Ye.AW,{path:`${t}/${m}`,render:C=>d(C,v)},m));return(0,a.jsx)(Pd.ErrorBoundary,{FallbackComponent:My,children:(0,a.jsx)(xu.Provider,{value:s,children:(0,a.jsxs)(Ye.rs,{children:[(0,a.jsx)(Ye.AW,{path:`${t}/configurations/list`,children:(0,a.jsx)(M.CheckPagePermissions,{permissions:n.contentManager.collectionTypesConfigurations,children:(0,a.jsx)(Kc,{layout:i,slug:e,updateLayout:o})})}),(0,a.jsx)(Ye.AW,{path:`${t}/configurations/edit`,children:(0,a.jsx)(M.CheckPagePermissions,{permissions:n.contentManager.collectionTypesConfigurations,children:(0,a.jsx)(hr,{components:l,isContentTypeView:!0,mainLayout:i,slug:e,updateLayout:o})})}),h]})})})};md.propTypes={match:u.shape({url:u.string.isRequired,params:u.shape({slug:u.string.isRequired}).isRequired}).isRequired};const Oy=(0,g.memo)(md),Sy=()=>{const[{isLoading:e,data:t},n]=(0,g.useReducer)(Ue.z,Ue.B),r=(0,g.useMemo)(W.m,[]),{schemas:s}=(0,ze.useSelector)(c=>r(c),ze.shallowEqual),o=(0,ze.useSelector)(wn.s),{uid:i}=(0,Ye.UO)(),{get:l}=(0,M.useFetchClient)();return(0,g.useEffect)(()=>{const d=Tt.default.CancelToken.source();return(async m=>{try{n(Jr());const{data:{data:v}}=await l(`/content-manager/components/${i}/configuration`,{cancelToken:m.token});n(ba(ju(v,s,"component")))}catch(v){if(Tt.default.isCancel(v))return;console.error(v)}})(d),()=>{d.cancel("Operation canceled by the user.")}},[i,s,l]),e?(0,a.jsx)(M.LoadingIndicatorPage,{}):(0,a.jsx)(M.CheckPagePermissions,{permissions:o.contentManager.componentsConfigurations,children:(0,a.jsx)(hr,{components:t.components,mainLayout:t.component,slug:i})})},Iy=(0,g.memo)(Sy),Py=()=>{const{formatMessage:e}=(0,Ee.Z)();return(0,M.useFocusWhenNavigate)(),(0,a.jsxs)(Oe.o,{children:[(0,a.jsx)(Ze.T,{title:e({id:(0,W.g)("header.name"),defaultMessage:"Content"})}),(0,a.jsx)(Ge.D,{children:(0,a.jsx)(Od.x,{action:(0,a.jsx)(M.LinkButton,{variant:"secondary",startIcon:(0,a.jsx)(Fn.Z,{}),to:"/plugins/content-type-builder/content-types/create-content-type",children:e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})}),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:(0,a.jsx)(sg.Z,{width:"10rem"}),shadow:"tableShadow"})})]})},ky=()=>{const{formatMessage:e}=(0,Ee.Z)();return(0,M.useFocusWhenNavigate)(),(0,a.jsxs)(Oe.o,{children:[(0,a.jsx)(Ze.T,{title:e({id:(0,W.g)("header.name"),defaultMessage:"Content"})}),(0,a.jsx)(Ge.D,{children:(0,a.jsx)(M.NoPermissions,{})})]})},vd=({match:{params:{slug:e},url:t}})=>{const n=(0,ze.useSelector)(wn.s),{isLoading:r,layout:s,updateLayout:o}=Mu(e),{rawContentTypeLayout:i,rawComponentsLayouts:l}=(0,g.useMemo)(()=>{let c={},d={};return s.contentType&&(d=Yr(s.contentType)),s.components&&(c=Object.keys(s.components).reduce((h,m)=>(h[m]=Yr(s.components[m]),h),{})),{rawContentTypeLayout:d,rawComponentsLayouts:c}},[s]);return r?(0,a.jsx)(M.LoadingIndicatorPage,{}):(0,a.jsx)(xu.Provider,{value:s,children:(0,a.jsxs)(Ye.rs,{children:[(0,a.jsx)(Ye.AW,{path:`${t}/configurations/edit`,children:(0,a.jsx)(M.CheckPagePermissions,{permissions:n.contentManager.singleTypesConfigurations,children:(0,a.jsx)(hr,{components:l,isContentTypeView:!0,mainLayout:i,slug:e,updateLayout:o})})}),(0,a.jsx)(Ye.AW,{path:t,render:({location:{state:c},history:{goBack:d}})=>(0,a.jsx)(pr,{layout:s,slug:e,isSingleType:!0,state:c,goBack:d})})]})})};vd.propTypes={match:u.shape({url:u.string.isRequired,params:u.shape({slug:u.string.isRequired}).isRequired}).isRequired};const Ly=(0,g.memo)(vd),$y=(0,ae.default)(T.k)`
  border-radius: 50%;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,Ny=ae.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`;function Cd({displayedValue:e}){return(0,a.jsxs)(T.k,{background:"neutral0",borderColor:"neutral200",justifyContent:"space-between",gap:3,padding:3,width:(0,M.pxToRem)(300),children:[(0,a.jsx)(Ny,{type:"button",children:(0,a.jsxs)(T.k,{gap:6,children:[(0,a.jsx)($y,{alignItems:"center",justifyContent:"center",background:"neutral200",height:(0,M.pxToRem)(32),width:(0,M.pxToRem)(32),children:(0,a.jsx)(ag.Z,{})}),(0,a.jsx)(T.k,{maxWidth:(0,M.pxToRem)(150),children:(0,a.jsx)(L.Z,{textColor:"neutral700",ellipsis:!0,children:e})})]})}),(0,a.jsxs)(T.k,{gap:2,children:[(0,a.jsx)(pe.h,{noBorder:!0,children:(0,a.jsx)(qt.Z,{})}),(0,a.jsx)(pe.h,{noBorder:!0,children:(0,a.jsx)(on.Z,{})})]})]})}Cd.propTypes={displayedValue:u.string.isRequired};const Dd=({status:e,displayedValue:t,width:n})=>{const{formatMessage:r}=(0,Ee.Z)(),s={[An.DRAFT]:r({id:(0,W.g)("relation.publicationState.draft"),defaultMessage:"Draft"}),[An.PUBLISHED]:r({id:(0,W.g)("relation.publicationState.published"),defaultMessage:"Published"})},o=e===An.DRAFT?"secondary":"success";return(0,a.jsx)($.x,{style:{width:n},children:(0,a.jsxs)(T.k,{paddingTop:2,paddingBottom:2,paddingLeft:2,paddingRight:4,hasRadius:!0,borderSize:1,background:"neutral0",borderColor:"neutral200",justifyContent:"space-between",children:[(0,a.jsxs)(bc,{gap:1,children:[(0,a.jsx)(pe.h,{noBorder:!0,children:(0,a.jsx)(on.Z,{})}),(0,a.jsxs)(xc,{maxWidth:"100%",justifyContent:"space-between",children:[(0,a.jsx)($.x,{minWidth:0,paddingTop:1,paddingBottom:1,paddingRight:4,children:(0,a.jsx)(yc,{children:(0,a.jsx)(L.Z,{textColor:"primary600",ellipsis:!0,children:t})})}),e&&(0,a.jsx)(gs,{variant:o,showBullet:!1,size:"S",children:(0,a.jsx)(L.Z,{fontWeight:"bold",textColor:`${o}700`,children:s[e]})})]})]}),(0,a.jsx)($.x,{paddingLeft:4,children:(0,a.jsx)(Ec,{type:"button",children:(0,a.jsx)(Ce.J,{width:"12px",as:Fr.Z})})})]})})};Dd.propTypes={status:u.string.isRequired,displayedValue:u.string.isRequired,width:u.number.isRequired};const Zy=()=>{const[e,t]=(0,g.useState)(""),{formatMessage:n,locale:r}=(0,Ee.Z)(),s=(0,g.useMemo)(W.b,[]),{collectionTypeLinks:o,singleTypeLinks:i}=(0,ze.useSelector)(s,ze.shallowEqual),{startsWith:l}=(0,M.useFilter)(r,{sensitivity:"base"}),c=(0,M.useCollator)(r,{sensitivity:"base"}),d=(0,g.useMemo)(()=>[{id:"collectionTypes",title:{id:(0,W.g)("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:o},{id:"singleTypes",title:{id:(0,W.g)("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:i}].map(C=>({...C,links:C.links.filter(D=>l(D.title,e)).sort((D,f)=>c.compare(D.title,f.title)).map(D=>({...D,title:n({id:D.title,defaultMessage:D.title})}))})),[o,e,i,l,n,c]),h=()=>{t("")},m=({target:{value:C}})=>{t(C)},v=n({id:(0,W.g)("header.name"),defaultMessage:"Content"});return(0,a.jsxs)(og.m,{ariaLabel:v,children:[(0,a.jsx)(ig.p,{label:v,searchable:!0,value:e,onChange:m,onClear:h,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),(0,a.jsx)(lg.Z,{children:d.map(C=>{const D=n({id:C.title.id,defaultMessage:C.title.defaultMessage},C.title.values);return(0,a.jsx)(ug.D,{label:D,badgeLabel:C.links.length.toString(),children:C.links.map(f=>{const y=f.search?`?${f.search}`:"";return(0,a.jsx)(cg.E,{as:Gn.NavLink,to:`${f.to}${y}`,children:f.title},f.uid)})},C.id)})})]})},zy=()=>({type:Ue.E}),Wy=()=>({type:Ue.D}),Uy=({authorizedCollectionTypeLinks:e,authorizedSingleTypeLinks:t,contentTypeSchemas:n,components:r,fieldSizes:s})=>({type:Ue.F,data:{authorizedCollectionTypeLinks:e,authorizedSingleTypeLinks:t,components:r,contentTypeSchemas:n,fieldSizes:s}}),bd=(e,t)=>t.map(({permissions:n})=>(0,M.hasPermissions)(e,n)),xd=(e,t,n=[])=>e.filter(r=>r.isDisplayed).map(r=>{const s=[{action:"plugin::content-manager.explorer.create",subject:r.uid},{action:"plugin::content-manager.explorer.read",subject:r.uid}],o=[{action:"plugin::content-manager.explorer.read",subject:r.uid}],i=t==="collectionTypes"?s:o,l=n.find(({uid:d})=>d===r.uid);let c=null;if(l){const d={page:1,pageSize:l.settings.pageSize,sort:`${l.settings.defaultSortBy}:${l.settings.defaultSortOrder}`};c=(0,Yt.stringify)(d,{encode:!1})}return{permissions:i,search:c,kind:r.kind,title:r.info.displayName,to:`/content-manager/${r.kind}/${r.uid}`,uid:r.uid,name:r.uid,isDisplayed:r.isDisplayed}}),Vy=(e,t)=>{const n=Object.entries(PC(e,"kind")).map(([o,i])=>({name:o,links:i})),[r,s]=Lo(n,"name");return{collectionTypeSectionLinks:xd(r?.links||[],"collectionTypes",t),singleTypeSectionLinks:xd(s?.links??[],"singleTypes")}},Hy=async({models:e,userPermissions:t,toggleNotification:n})=>{const{get:r}=(0,M.getFetchClient)();try{const{data:{data:s}}=await r("/content-manager/content-types-settings"),{collectionTypeSectionLinks:o,singleTypeSectionLinks:i}=Vy(e,s),l=await Promise.all(bd(t,o)),c=o.filter((m,v)=>l[v]),d=await Promise.all(bd(t,i)),h=i.filter((m,v)=>d[v]);return{authorizedCollectionTypeLinks:c,authorizedSingleTypeLinks:h}}catch(s){return console.error(s),n({type:"warning",message:{id:"notification.error"}}),{authorizedCollectionTypeLinks:[],authorizedSingleTypeLinks:[]}}},{MUTATE_COLLECTION_TYPES_LINKS:qy,MUTATE_SINGLE_TYPES_LINKS:Ky}=Ue.H,Gy=()=>{const e=(0,ze.useDispatch)(),t=(0,M.useNotification)(),n=(0,ze.useSelector)((0,W.d)()),r=(0,g.useRef)(),{allPermissions:s}=(0,M.useRBACProvider)(),{runHookWaterfall:o}=(0,M.useStrapiApp)(),l=Tt.default.CancelToken.source(),{notifyStatus:c}=(0,ps.G)(),{formatMessage:d}=(0,Ee.Z)(),{get:h}=(0,M.useFetchClient)(),m=async()=>{e(zy());try{const{data:{data:{components:v,contentTypes:C,fieldSizes:D}}}=await h("/content-manager/init",{cancelToken:l.token});c(d({id:(0,W.g)("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const f=await Hy({models:C,userPermissions:s,toggleNotification:t}),{ctLinks:y}=o(qy,{ctLinks:f.authorizedCollectionTypeLinks,models:C}),{stLinks:x}=o(Ky,{stLinks:f.authorizedSingleTypeLinks,models:C}),B=Uy({authorizedCollectionTypeLinks:y,authorizedSingleTypeLinks:x,contentTypeSchemas:C,components:v,fieldSizes:D});e(B)}catch(v){if(Tt.default.isCancel(v))return;console.error(v),t({type:"warning",message:{id:"notification.error"}})}};return r.current=m,(0,g.useEffect)(()=>(r.current(),()=>{l.cancel("Operation canceled by the user."),e(Wy())}),[e,t]),{...n,refetchData:r.current}};function Yy({type:e,item:t}){if([It.EDIT_FIELD,It.FIELD].includes(e))return(0,a.jsx)(mr,{labelField:t.labelField});const[n]=e.split("_");switch(n){case It.COMPONENT:case It.DYNAMIC_ZONE:return(0,a.jsx)(Cd,{displayedValue:t.displayedValue});case It.RELATION:return(0,a.jsx)(Dd,{displayedValue:t.displayedValue,status:t.status,width:t.width});default:return null}}const yd=()=>{const e=(0,Ye.$B)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:r,models:s,refetchData:o}=Gy(),i=Lo([...n,...r],C=>C.title.toLowerCase()),{pathname:l}=(0,Ye.TH)(),{formatMessage:c}=(0,Ee.Z)(),{startSection:d}=(0,M.useGuidedTour)(),h=(0,g.useRef)(d),m=(0,ze.useSelector)(wn.s);if((0,g.useEffect)(()=>{h.current&&h.current("contentManager")},[]),t==="loading")return(0,a.jsxs)(Oe.o,{"aria-busy":"true",children:[(0,a.jsx)(Ze.T,{title:c({id:(0,W.g)("header.name"),defaultMessage:"Content"})}),(0,a.jsx)(M.LoadingIndicatorPage,{})]});const v=s.filter(({isDisplayed:C})=>C);return i.length===0&&v.length>0&&l!=="/content-manager/403"?(0,a.jsx)(Ye.l_,{to:"/content-manager/403"}):v.length===0&&l!=="/content-manager/no-content-types"?(0,a.jsx)(Ye.l_,{to:"/content-manager/no-content-types"}):!e&&i.length>0?(0,a.jsx)(Ye.l_,{to:`${i[0].to}${i[0].search?`?${i[0].search}`:""}`}):(0,a.jsxs)(Mo.A,{sideNav:(0,a.jsx)(Zy,{}),children:[(0,a.jsx)(Id.D,{renderItem:Yy}),(0,a.jsx)(bu.Provider,{value:{refetchData:o},children:(0,a.jsxs)(Ye.rs,{children:[(0,a.jsx)(Ye.AW,{path:"/content-manager/components/:uid/configurations/edit",children:(0,a.jsx)(M.CheckPagePermissions,{permissions:m.contentManager.componentsConfigurations,children:(0,a.jsx)(Iy,{})})}),(0,a.jsx)(Ye.AW,{path:"/content-manager/collectionType/:slug",component:Oy}),(0,a.jsx)(Ye.AW,{path:"/content-manager/singleType/:slug",component:Ly}),(0,a.jsx)(Ye.AW,{path:"/content-manager/403",children:(0,a.jsx)(ky,{})}),(0,a.jsx)(Ye.AW,{path:"/content-manager/no-content-types",children:(0,a.jsx)(Py,{})}),(0,a.jsx)(Ye.AW,{path:"",component:M.AnErrorOccurred})]})})]})};function Qy(){const{formatMessage:e}=(0,Ee.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Sd.q,{title:e({id:(0,W.g)("plugin.name"),defaultMessage:"Content Manager"})}),(0,a.jsx)(yd,{})]})}const Jy=Object.freeze(Object.defineProperty({__proto__:null,App:yd,default:Qy},Symbol.toStringTag,{value:"Module"}))},76030:(he,ve,p)=>{"use strict";p.d(ve,{u:()=>_});var a=p(75937),g=p(30956),$=p(40829);function _(ee={},T={}){const{id:L="",...Ce}=ee,{get:pe}=(0,g.useFetchClient)(),{data:Te,isError:Pe,isLoading:be,refetch:de}=(0,$.useQuery)(["users",L,Ce],async()=>{const{data:{data:me}}=await pe(`/admin/users/${L}`,{params:Ce});return me},T);return{users:a.useMemo(()=>{let me=[];return Te&&("results"in Te?Array.isArray(Te.results)&&(me=Te.results):me=[Te]),me},[Te]),pagination:a.useMemo(()=>(Te&&"pagination"in Te)??null,[Te]),isLoading:be,isError:Pe,refetch:de}}},14113:(he,ve,p)=>{"use strict";p.d(ve,{u:()=>g});var a=p(75937);function g($,_){const[ee,T]=a.useState($);return a.useEffect(()=>{const L=setTimeout(()=>{T($)},_);return()=>{clearTimeout(L)}},[$,_]),ee}},64743:(he,ve,p)=>{"use strict";p.d(ve,{O:()=>g});var a=p(85682);const g=a.Wx},9728:(he,ve,p)=>{"use strict";p.d(ve,{Z:()=>$});var a=p(56940),g=p(66041);const $=({startActions:_,endActions:ee})=>!_&&!ee?null:(0,a.jsxs)(g.k,{justifyContent:"space-between",alignItems:"flex-start",paddingBottom:4,paddingLeft:10,paddingRight:10,children:[(0,a.jsx)(g.k,{gap:2,wrap:"wrap",children:_}),(0,a.jsx)(g.k,{gap:2,shrink:0,wrap:"wrap",children:ee})]})},53917:(he,ve,p)=>{"use strict";p.d(ve,{A:()=>T});var a=p(56940),g=p(19681),$=p(65094);const _=(0,g.default)($.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:L})=>L?"auto 1fr":"1fr"};
`,ee=(0,g.default)($.x)`
  overflow-x: hidden;
`,T=({sideNav:L,children:Ce})=>(0,a.jsxs)(_,{hasSideNav:Boolean(L),children:[L,(0,a.jsx)(ee,{paddingBottom:10,children:Ce})]})},1822:(he,ve,p)=>{"use strict";p.d(ve,{m:()=>T});var a=p(56940),g=p(19681),$=p(78054);const _=`${232/16}rem`,ee=(0,g.default)($.r)`
  width: ${_};
  background: ${({theme:L})=>L.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:L})=>L.colors.neutral200};
  z-index: 1;
`,T=({ariaLabel:L,...Ce})=>(0,a.jsx)(ee,{"aria-label":L,as:"nav",...Ce})},78200:(he,ve,p)=>{"use strict";p.d(ve,{p:()=>ye});var a=p(56940),g=p(75937),$=p(45216),_=p(19681),ee=p(52958),T=p(55786);const L=we=>{const De=(0,g.useRef)();return(0,g.useEffect)(()=>{De.current=we}),De.current};var Ce=p(43669),pe=p(65094),Te=p(49685),Pe=p(94224),be=p(66041),de=p(74065),xe=p(24091);const me=(0,_.default)(Ce.i)`
  width: ${24/16}rem;
  background-color: ${({theme:we})=>we.colors.neutral200};
`,ye=({as:we="h2",label:De,searchLabel:Oe="",searchable:Ze=!1,onChange:Ge=()=>{},value:lt="",onClear:wt=()=>{},onSubmit:mt=()=>{},id:ut})=>{const[vt,Lt]=(0,g.useState)(!1),Vt=L(vt),Ct=(0,T.M)(ut),tt=(0,g.useRef)(void 0),Dt=(0,g.useRef)(void 0);(0,g.useEffect)(()=>{vt&&tt.current&&tt.current.focus(),Vt&&!vt&&Dt.current&&Dt.current.focus()},[vt,Vt]);const Ht=()=>{Lt($t=>!$t)},rn=$t=>{wt($t),tt.current.focus()},dt=$t=>{$t.relatedTarget?.id!==Ct&&Lt(!1)},fs=$t=>{$t.key===ee.y.ESCAPE&&Lt(!1)};return vt?(0,a.jsxs)(pe.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,a.jsx)(Te.U,{children:(0,a.jsx)(Pe.w,{name:"searchbar",value:lt,onChange:Ge,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:fs,ref:tt,onBlur:dt,onClear:rn,onSubmit:mt,clearLabel:"Clear",size:"S",children:Oe})}),(0,a.jsx)(pe.x,{paddingLeft:2,paddingTop:4,children:(0,a.jsx)(me,{})})]}):(0,a.jsxs)(pe.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,a.jsxs)(be.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,a.jsx)(de.Z,{variant:"beta",as:we,children:De}),Ze&&(0,a.jsx)(xe.h,{ref:Dt,onClick:Ht,label:Oe,icon:(0,a.jsx)($.Z,{})})]}),(0,a.jsx)(pe.x,{paddingTop:4,children:(0,a.jsx)(me,{})})]})}},37229:(he,ve,p)=>{"use strict";p.d(ve,{E:()=>be});var a=p(56940),g=p(75937),$=p(27709),_=p(19681),ee=p(65094),T=p(74065),L=p(66041),Ce=p(47599);const pe=(0,_.default)(ee.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:de})=>de.colors.neutral800};
  svg > * {
    fill: ${({theme:de})=>de.colors.neutral600};
  }

  &.active {
    ${({theme:de})=>`
      background-color: ${de.colors.primary100};
      border-right: 2px solid ${de.colors.primary600};
      svg > * {
        fill: ${de.colors.primary700};
      }
      ${T.Z} {
        color: ${de.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,Te=(0,_.default)($.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:de,$active:xe})=>xe?de.colors.primary600:de.colors.neutral600};
  }
`,Pe=_.default.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,be=g.forwardRef(({children:de,icon:xe=null,withBullet:me=!1,as:ye=Ce.f,isSubSectionChild:we=!1,...De},Oe)=>(0,a.jsxs)(pe,{as:ye,icon:xe,background:"neutral100",paddingLeft:we?9:7,paddingBottom:2,paddingTop:2,ref:Oe,...De,children:[(0,a.jsxs)(L.k,{children:[xe?(0,a.jsx)(Pe,{children:xe}):(0,a.jsx)(Te,{}),(0,a.jsx)(ee.x,{paddingLeft:2,children:(0,a.jsx)(T.Z,{as:"span",children:de})})]}),me&&(0,a.jsx)(ee.x,{as:L.k,paddingRight:4,children:(0,a.jsx)(Te,{$active:!0})})]}))},26874:(he,ve,p)=>{"use strict";p.d(ve,{D:()=>xe});var a=p(56940),g=p(75937),$=p(19681),_=p(70754),ee=p(66041),T=p(65094),L=p(74065);const Ce=(0,$.default)(ee.k)`
  border: none;
  padding: 0;
  background: transparent;
`,pe=$.default.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:me})=>me?"0deg":"180deg"});
`,Te=({collapsable:me=!1,label:ye,onClick:we=()=>{},ariaExpanded:De,ariaControls:Oe})=>me?(0,a.jsxs)(Ce,{as:"button",onClick:we,"aria-expanded":De,"aria-controls":Oe,textAlign:"left",children:[(0,a.jsx)(T.x,{paddingRight:1,children:(0,a.jsx)(L.Z,{variant:"sigma",textColor:"neutral600",children:ye})}),me&&(0,a.jsx)(pe,{rotated:De,children:(0,a.jsx)(_.Z,{"aria-hidden":!0})})]}):(0,a.jsx)(Ce,{children:(0,a.jsx)(T.x,{paddingRight:1,children:(0,a.jsx)(L.Z,{variant:"sigma",textColor:"neutral600",children:ye})})});var Pe=p(55786),be=p(38592);const de=(0,$.default)(T.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:me})=>me.colors.neutral500};
    }
  }
`,xe=({collapsable:me=!1,label:ye,badgeLabel:we,children:De,id:Oe})=>{const[Ze,Ge]=(0,g.useState)(!0),lt=(0,Pe.M)(Oe),wt=()=>{Ge(mt=>!mt)};return(0,a.jsxs)(ee.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,a.jsx)(de,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,a.jsxs)(T.x,{position:"relative",paddingRight:we?6:0,children:[(0,a.jsx)(Te,{onClick:wt,ariaExpanded:Ze,ariaControls:lt,collapsable:me,label:ye}),we&&(0,a.jsx)(be.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:we})]})}),(!me||Ze)&&(0,a.jsx)("ol",{id:lt,children:g.Children.map(De,(mt,ut)=>(0,a.jsx)("li",{children:mt},ut))})]})}},57373:(he,ve,p)=>{"use strict";p.d(ve,{Z:()=>ee});var a=p(56940),g=p(75937),$=p(65094),_=p(66041);const ee=({children:T,spacing:L=2,horizontal:Ce=!1,...pe})=>(0,a.jsx)($.x,{paddingTop:2,paddingBottom:4,children:(0,a.jsx)(_.k,{as:"ol",gap:L,direction:Ce?"row":"column",alignItems:Ce?"center":"stretch",...pe,children:g.Children.map(T,(Te,Pe)=>(0,a.jsx)("li",{children:Te},Pe))})})}}]);
