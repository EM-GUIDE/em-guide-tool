(self.webpackChunkem_guide_app=self.webpackChunkem_guide_app||[]).push([[177],{87685:(R,D,t)=>{var n=t(28422),l=t(69860),u=l(n);R.exports=u},48949:(R,D,t)=>{var n=t(87685),l=t(41182);function u(m,p){var r=-1,d=l(m)?Array(m.length):[];return n(m,function(c,v,M){d[++r]=p(c,v,M)}),d}R.exports=u},91959:(R,D,t)=>{var n=t(41710),l=t(64723),u=t(52536),m=t(48949),p=t(3130),r=t(130),d=t(27973),c=t(10409),v=t(28768);function M(f,T,L){T.length?T=n(T,function(C){return v(C)?function(B){return l(B,C.length===1?C[0]:C)}:C}):T=[c];var Z=-1;T=n(T,r(u));var S=m(f,function(C,B,W){var $=n(T,function(J){return J(C)});return{criteria:$,index:++Z,value:C}});return p(S,function(C,B){return d(C,B,L)})}R.exports=M},3130:R=>{function D(t,n){var l=t.length;for(t.sort(n);l--;)t[l]=t[l].value;return t}R.exports=D},32330:(R,D,t)=>{var n=t(24160);function l(u,m){if(u!==m){var p=u!==void 0,r=u===null,d=u===u,c=n(u),v=m!==void 0,M=m===null,f=m===m,T=n(m);if(!M&&!T&&!c&&u>m||c&&v&&f&&!M&&!T||r&&v&&f||!p&&f||!d)return 1;if(!r&&!c&&!T&&u<m||T&&p&&d&&!r&&!c||M&&p&&d||!v&&d||!f)return-1}return 0}R.exports=l},27973:(R,D,t)=>{var n=t(32330);function l(u,m,p){for(var r=-1,d=u.criteria,c=m.criteria,v=d.length,M=p.length;++r<v;){var f=n(d[r],c[r]);if(f){if(r>=M)return f;var T=p[r];return f*(T=="desc"?-1:1)}}return u.index-m.index}R.exports=l},69860:(R,D,t)=>{var n=t(41182);function l(u,m){return function(p,r){if(p==null)return p;if(!n(p))return u(p,r);for(var d=p.length,c=m?d:-1,v=Object(p);(m?c--:++c<d)&&r(v[c],c,v)!==!1;);return p}}R.exports=l},53604:(R,D,t)=>{var n=t(41342),l=t(91959),u=t(164),m=t(50455),p=u(function(r,d){if(r==null)return[];var c=d.length;return c>1&&m(r,d[0],d[1])?d=[]:c>2&&m(d[0],d[1],d[2])&&(d=[d[0]]),l(r,n(d,1),[])});R.exports=p},50177:(R,D,t)=>{"use strict";t.r(D),t.d(D,{SettingsPage:()=>xn});var n=t(56940),l=t(75937),u=t(81583),m=t(9144),p=t(91496),r=t(74065),d=t(72672),c=t(65094),v=t(97371),M=t(66041),f=t(58400),T=t(17033),L=t(90019),Z=t(87773),S=t(70821),C=t(54134),B=t(43669),W=t(24059),$=t(98545),J=t(48404),st=t(92956),w=t(84791),et=t(65298),Q=t(79963),ot=t(28055),Y=t(43195),at=t(39651),it=t(24091),mt=t(78801),_=t(78054),H=t(11674),gt=t(53917),pt=t(22512),ht=t(39738),Et=t(95984),V=t(54997),Ct=t(49135),U=t(30956),Ft=t(41480),N=t(48288),lt=t(82018),Zt=t(47474),X=t(88720),$t=t(53604),jt=t(93484),yt=t(63355),Nt=t(1822),Gt=t(78200),Ht=t(57373),Vt=t(26874),Jt=t(37229),Qt=t(16361),Xt=t(49730),Yt=t(7047),_t=t(6942),bt=t(30454),Rt=t(889),o=t(14025),Tt=t(19681),At=t(40829),xt=t(74419),wt=t(5337),Mn=t(66086),fn=t(88193),On=t(8232),Pn=t(4357),vn=t(24926),Dn=t(32635),Ln=t(42052),Cn=t(67620),jn=t(71999),yn=t(4549),Rn=t(333),Tn=t(21709),An=t(21633),Bn=t(85845),Un=t(78712);const kt=e=>e.map(s=>{const i=s.links.map(a=>({...a,isDisplayed:!1}));return{...s,links:i}}),qt=()=>{const[{isLoading:e,menu:s},i]=l.useState({isLoading:!0,menu:[]}),{allPermissions:a}=(0,U.useRBACProvider)(),{shouldUpdateStrapi:h}=(0,U.useAppInfo)(),{settings:O}=(0,U.useStrapiApp)(),j=(0,jt.useSelector)(yt.s),P=l.useMemo(()=>(0,X.Q)(),[]),{admin:E,global:g}=(0,X.p)(P,async()=>(await t.e(8859).then(t.bind(t,28859))).SETTINGS_LINKS_EE(),{combine(x,I){return{admin:[...I.admin,...x.admin],global:[...x.global,...I.global]}},defaultValue:{admin:[],global:[]}}),A=l.useCallback(x=>{if(!x.id)throw new Error("The settings menu item must have an id attribute.");return{...x,permissions:j.settings?.[x.id]?.main??[]}},[j.settings]);return l.useEffect(()=>{const x=async()=>{const G=await(q=>Promise.all(q.reduce((tt,dt,ct)=>{const y=dt.links.map(async(nt,b)=>({hasPermission:await(0,U.hasPermissions)(a,nt.permissions),sectionIndex:ct,linkIndex:b}));return[...tt,...y]},[])))(F);i(q=>({...q,isLoading:!1,menu:F.map((tt,dt)=>({...tt,links:tt.links.map((ct,y)=>{const nt=G.find(b=>b.sectionIndex===dt&&b.linkIndex===y);return{...ct,isDisplayed:Boolean(nt?.hasPermission)}})}))}))},{global:I,...z}=O,F=kt([{...I,links:$t([...I.links,...g.map(A)],K=>K.id).map(K=>({...K,hasNotification:K.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:E.map(A)},...Object.values(z)]);x()},[E,g,a,O,h,A]),{isLoading:e,menu:s.map(x=>({...x,links:x.links.filter(I=>I.isDisplayed)}))}},tn=(0,Tt.default)(u.J)`
  right: 15px;
  position: absolute;
`,Bt=({menu:e})=>{const{formatMessage:s}=(0,N.Z)(),{trackUsage:i}=(0,U.useTracking)(),{pathname:a}=(0,lt.TH)(),O=e.filter(E=>!E.links.every(g=>g.isDisplayed===!1)).map(E=>({...E,title:E.intlLabel,links:E.links.map(g=>({...g,title:g.intlLabel,name:g.id}))})),j=s({id:"global.settings",defaultMessage:"Settings"}),P=(E=null)=>{i("willNavigate",{from:a,to:E})};return(0,n.jsxs)(Nt.m,{ariaLabel:j,children:[(0,n.jsx)(Gt.p,{label:j}),(0,n.jsx)(Ht.Z,{children:O.map(E=>(0,n.jsx)(Vt.D,{label:s(E.intlLabel),children:E.links.map(g=>(0,n.jsxs)(Jt.E,{as:Zt.NavLink,withBullet:g.hasNotification,to:g.to,onClick:()=>P(g.to),children:[s(g.intlLabel),g?.lockIcon&&(0,n.jsx)(tn,{width:`${15/16}rem`,height:`${15/16}rem`,as:Qt.Z})]},g.id))},E.id))})]})};Bt.propTypes={menu:o.array.isRequired};const nn=[{async Component(){return await t.e(7246).then(t.bind(t,47246))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(9059),t.e(2260)]).then(t.bind(t,32260))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(9059),t.e(2260)]).then(t.bind(t,32260))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(9059),t.e(9305)]).then(t.bind(t,89305))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(2786).then(t.bind(t,2786)).then(s=>s.i)},to:"/settings/users",exact:!0},{async Component(){return await t.e(5646).then(t.bind(t,25646))},to:"/settings/users/:id",exact:!0},{async Component(){return await Promise.all([t.e(4363),t.e(5372)]).then(t.bind(t,85372))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await Promise.all([t.e(4363),t.e(2480)]).then(t.bind(t,32480))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4002).then(t.bind(t,14002))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(5217).then(t.bind(t,35217))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4108),t.e(1380),t.e(6923)]).then(t.bind(t,36923))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(4108),t.e(1380),t.e(3586)]).then(t.bind(t,93586))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(4108),t.e(2641)]).then(t.bind(t,42641))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(8113).then(t.bind(t,88113))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4108),t.e(5710)]).then(t.bind(t,35710))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(6608).then(t.bind(t,26608))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(4495).then(t.bind(t,14495))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(7793).then(t.bind(t,97793))},to:"/settings/purchase-single-sign-on",exact:!0}],k=750,rt=100,Ut=["image/jpeg","image/png","image/svg+xml"],It={localImage:void 0},sn=(e=It,s)=>(0,xt.default)(e,i=>{switch(s.type){case"SET_LOCAL_IMAGE":{i.localImage=s.value;break}default:return i}}),Mt=({onChangeLogo:e,customLogo:s,goTo:i,Component:a,modalTitle:h,next:O,prev:j,currentStep:P})=>{const[{localImage:E},g]=(0,l.useReducer)(sn,It),{formatMessage:A}=(0,N.Z)(),x=z=>{g({type:"SET_LOCAL_IMAGE",value:z})},I=()=>{i(null)};return P?(0,n.jsxs)(m.P,{labelledBy:"modal",onClose:I,children:[(0,n.jsx)(p.x,{children:(0,n.jsx)(r.Z,{fontWeight:"bold",as:"h2",id:"modal",children:A(h)})}),(0,n.jsx)(a,{setLocalImage:x,goTo:i,next:O,prev:j,onClose:I,asset:E||s,onChangeLogo:e})]}):null};Mt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},Mt.propTypes={Component:o.elementType,currentStep:o.string,customLogo:o.shape({name:o.string,url:o.string,width:o.number,height:o.number,ext:o.string}),goTo:o.func.isRequired,modalTitle:o.shape({id:o.string,defaultMessage:o.string}),next:o.string,onChangeLogo:o.func.isRequired,prev:o.string};const St={currentStep:void 0},en=(e=St,s)=>(0,xt.default)(e,i=>{switch(s.type){case"GO_TO":{i.currentStep=s.to;break}default:return i}}),on={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Wt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},an=e=>new Promise(s=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){s({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(e)}),ln=(e,s)=>({ext:e.name.split(".").pop(),size:e.size/1e3,name:e.name,url:URL.createObjectURL(e),rawFile:e,width:s.width,height:s.height}),Kt=async e=>{let s;if(!Ut.includes(e.type))throw s=new Error("File format"),s.displayMessage=on,s;const a=await an(e);if(!(a.width<=k&&a.height<=k))throw s=new Error("File sizing"),s.displayMessage=Wt,s;const O=ln(e,a);if(!(O.size<=rt))throw s=new Error("File sizing"),s.displayMessage=Wt,s;return O},rn=(0,Tt.default)(d._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,ft=({setLocalImage:e,goTo:s,next:i,onClose:a})=>{const{formatMessage:h}=(0,N.Z)(),[O,j]=(0,l.useState)(!1),[P,E]=(0,l.useState)(void 0),g=(0,l.useRef)(null),A=()=>j(!0),x=()=>j(!1),I=K=>{K.preventDefault(),g.current.click()},z=async()=>{x();const K=g.current.files[0];if(K)try{const G=await Kt(K);e(G),s(i)}catch(G){if(G.displayMessage)E(h(G.displayMessage,{size:rt,dimension:k})),g.current.focus();else throw G}},F=()=>O?"primary500":P?"danger600":"neutral300";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{children:(0,n.jsx)(c.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(v.g,{name:"logo-upload",error:P,children:(0,n.jsx)("label",{htmlFor:"logo-upload",children:(0,n.jsxs)(M.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,n.jsxs)(M.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:O?"primary100":"neutral100",borderColor:F(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:A,onDragLeave:x,children:[(0,n.jsx)(u.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Xt.Z,"aria-hidden":!0}),(0,n.jsx)(c.x,{paddingTop:3,paddingBottom:5,children:(0,n.jsx)(r.Z,{variant:"delta",as:"span",children:h({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"})})}),(0,n.jsx)(rn,{accept:Ut,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:z,ref:g,id:"logo-upload"}),(0,n.jsx)(f.z,{type:"button",onClick:I,children:h({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})}),(0,n.jsx)(c.x,{paddingTop:6,children:(0,n.jsx)(r.Z,{variant:"pi",textColor:"neutral600",children:h({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:rt,dimension:k})})})]}),(0,n.jsx)(T.c,{})]})})})})}),(0,n.jsx)(L.m,{startActions:(0,n.jsx)(f.z,{onClick:a,variant:"tertiary",children:h({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})})})]})};ft.defaultProps={next:null},ft.propTypes={goTo:o.func.isRequired,next:o.string,onClose:o.func.isRequired,setLocalImage:o.func.isRequired};const dn=async e=>{try{const{get:s}=(0,U.getFetchClient)(),i=await s(e,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(s){throw s.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},s}},Ot=({goTo:e,next:s,onClose:i,setLocalImage:a})=>{const{formatMessage:h}=(0,N.Z)(),[O,j]=(0,l.useState)(""),[P,E]=(0,l.useState)(null),g=x=>{j(x.target.value)},A=async()=>{try{const x=await dn(O),I=await Kt(x);a(I),e(s)}catch(x){if(x.displayMessage)E(h(x.displayMessage,{size:rt,dimension:k}));else throw x}};return(0,n.jsxs)("form",{onSubmit:x=>{x.preventDefault(),A()},children:[(0,n.jsx)(c.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(Z.o,{label:h({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:P,onChange:g,value:O,name:"logo-url"})}),(0,n.jsx)(L.m,{startActions:(0,n.jsx)(f.z,{onClick:i,variant:"tertiary",children:h({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(f.z,{type:"submit",children:h({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"})})})]})};Ot.defaultProps={next:null},Ot.propTypes={goTo:o.func.isRequired,next:o.string,onClose:o.func.isRequired,setLocalImage:o.func.isRequired};const Pt=({setLocalImage:e,goTo:s,next:i,onClose:a})=>{const{formatMessage:h}=(0,N.Z)();return(0,n.jsxs)(S.v,{label:h({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple",children:[(0,n.jsxs)(c.x,{paddingLeft:8,paddingRight:8,children:[(0,n.jsxs)(C.m,{children:[(0,n.jsx)(C.O,{children:h({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})}),(0,n.jsx)(C.O,{children:h({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"})})]}),(0,n.jsx)(B.i,{})]}),(0,n.jsxs)(W.n,{children:[(0,n.jsx)(W.x,{children:(0,n.jsx)(ft,{onClose:a,setLocalImage:e,goTo:s,next:i})}),(0,n.jsx)(W.x,{children:(0,n.jsx)(Ot,{onClose:a,setLocalImage:e,goTo:s,next:i})})]})]})};Pt.defaultProps={next:null},Pt.propTypes={goTo:o.func.isRequired,next:o.string,onClose:o.func.isRequired,setLocalImage:o.func.isRequired};const zt=({asset:e})=>{const{formatMessage:s}=(0,N.Z)();return(0,n.jsxs)($.Z,{children:[(0,n.jsx)(J.O,{children:(0,n.jsx)(st.H,{size:"S",src:e.url})}),(0,n.jsxs)(w.e,{children:[(0,n.jsxs)(et.a,{children:[(0,n.jsx)(Q.l,{children:e.name}),(0,n.jsx)(Q._,{children:`${e.ext.toUpperCase()} - ${e.width}\u2715${e.height}`})]}),(0,n.jsx)(ot.E,{children:s({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"})})]})]})};zt.propTypes={asset:o.shape({name:o.string,url:o.string,width:o.number,height:o.number,ext:o.string}).isRequired};const vt=({onClose:e,asset:s,prev:i,next:a,goTo:h,setLocalImage:O,onChangeLogo:j})=>{const{formatMessage:P}=(0,N.Z)(),E=()=>{O(void 0),h(i)},g=()=>{j(s),h(a)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:[(0,n.jsxs)(M.k,{justifyContent:"space-between",paddingBottom:6,children:[(0,n.jsxs)(M.k,{direction:"column",alignItems:"flex-start",children:[(0,n.jsx)(r.Z,{variant:"pi",fontWeight:"bold",children:P({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})}),(0,n.jsx)(r.Z,{variant:"pi",textColor:"neutral500",children:P({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"})})]}),(0,n.jsx)(f.z,{onClick:E,variant:"secondary",children:P({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"})})]}),(0,n.jsx)(c.x,{maxWidth:(0,U.pxToRem)(180),children:s.url?(0,n.jsx)(zt,{asset:s}):null})]}),(0,n.jsx)(L.m,{startActions:(0,n.jsx)(f.z,{onClick:e,variant:"tertiary",children:P({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(f.z,{onClick:g,children:P({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"})})})]})};vt.defaultProps={next:null,prev:null},vt.propTypes={goTo:o.func.isRequired,asset:o.shape({name:o.string,url:o.string,width:o.number,height:o.number,ext:o.string}).isRequired,next:o.string,onClose:o.func.isRequired,onChangeLogo:o.func.isRequired,prev:o.string,setLocalImage:o.func.isRequired};const cn={upload:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:vt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},ut=({canUpdate:e,customLogo:s,defaultLogo:i,hint:a,label:h,onChangeLogo:O,onResetLogo:j})=>{const[{currentStep:P},E]=(0,l.useReducer)(en,St),{Component:g,next:A,prev:x,modalTitle:I}=cn[P]||{},{formatMessage:z}=(0,N.Z)(),F=K=>{E({type:"GO_TO",to:K})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y.F,{label:h,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:s?.name||"logo.png",actions:(0,n.jsxs)(at.b,{children:[(0,n.jsx)(it.h,{disabled:!e,onClick:()=>F(s?"pending":"upload"),label:z({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:(0,n.jsx)(Yt.Z,{})}),s&&(0,n.jsx)(it.h,{disabled:!e,onClick:j,label:z({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:(0,n.jsx)(_t.Z,{})})]}),children:(0,n.jsx)(mt.q,{label:z({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"}),children:(0,n.jsx)(c.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:s?.url||i,alt:z({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})})})}),(0,n.jsx)(Mt,{Component:g,currentStep:P,onChangeLogo:O,customLogo:s,goTo:F,next:A,prev:x,modalTitle:I})]})};ut.defaultProps={canUpdate:!1,customLogo:null,hint:null},ut.propTypes={canUpdate:o.bool,customLogo:o.shape({url:o.string,name:o.string}),label:o.string.isRequired,hint:o.string,defaultLogo:o.string.isRequired,onChangeLogo:o.func.isRequired,onResetLogo:o.func.isRequired};const gn=(e,s)=>wt(e,{menuLogo:{display:s.menuLogo},authLogo:{display:s.authLogo}}),Dt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},un=(e=Dt,s)=>(0,xt.default)(e,i=>{switch(s.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=s.value,i.menuLogo.submit.rawFile=s.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=s.value,i.authLogo.submit.rawFile=s.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),Lt=(0,l.forwardRef)(({canUpdate:e,projectSettingsStored:s},i)=>{const{formatMessage:a}=(0,N.Z)(),{trackUsage:h}=(0,U.useTracking)(),{logos:{menu:O,auth:j}}=(0,X.u)(),[{menuLogo:P,authLogo:E},g]=(0,l.useReducer)(un,Dt,()=>gn(Dt,s)),A=F=>{g({type:"SET_CUSTOM_MENU_LOGO",value:F})},x=()=>{h("didClickResetLogo",{logo:"menu"}),g({type:"RESET_CUSTOM_MENU_LOGO"})},I=F=>{g({type:"SET_CUSTOM_AUTH_LOGO",value:F})},z=()=>{h("didClickResetLogo",{logo:"auth"}),g({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,l.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:P.submit,authLogo:E.submit})})),(0,n.jsxs)(c.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(r.Z,{variant:"delta",as:"h3",children:a({id:"Settings.application.customization",defaultMessage:"Customization"})}),(0,n.jsx)(r.Z,{variant:"pi",textColor:"neutral600",children:a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:k,size:rt})}),(0,n.jsxs)(_.r,{paddingTop:4,gap:4,children:[(0,n.jsx)(H.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:e,customLogo:P.display,defaultLogo:O.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:A,onResetLogo:x})}),(0,n.jsx)(H.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:e,customLogo:E.display,defaultLogo:j.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:I,onResetLogo:z})})]})]})});Lt.defaultProps={canUpdate:!1,projectSettingsStored:null},Lt.propTypes={canUpdate:o.bool,projectSettingsStored:o.shape({menuLogo:o.shape({url:o.string,name:o.string})})};const mn=e=>{const s=new FormData;return Object.entries(e).forEach(([i,a])=>{a&&a.rawFile instanceof File&&s.append(i,a.rawFile),a&&a.isReset&&s.append(i,null)}),s},pn=()=>null,hn=()=>{const e=l.useRef(),s=(0,U.useNotification)(),{trackUsage:i}=(0,U.useTracking)(),{formatMessage:a}=(0,N.Z)(),{get:h,post:O}=(0,U.useFetchClient)(),{updateProjectSettings:j}=(0,X.u)(),P=(0,jt.useSelector)(yt.s),{formatAPIError:E}=(0,U.useAPIErrorHandler)(),{communityEdition:g,latestStrapiReleaseTag:A,nodeVersion:x,shouldUpdateStrapi:I,strapiVersion:z}=(0,U.useAppInfo)(),F=(0,X.p)(pn,async()=>(await t.e(380).then(t.bind(t,20380))).AdminSeatInfoEE),{allowedActions:{canRead:K,canUpdate:G}}=(0,U.useRBAC)(P.settings["project-settings"]);(0,U.useFocusWhenNavigate)();const{data:q,isLoading:tt}=(0,At.useQuery)(["project-settings"],async()=>{const{data:y}=await h("/admin/project-settings");return y},{cacheTime:0,enabled:K,select(y){return{...y,authLogo:y.authLogo?{...y.authLogo,url:(0,U.prefixFileUrlWithBackendUrl)(y.authLogo.url)}:y.authLogo,menuLogo:y.menuLogo?{...y.menuLogo,url:(0,U.prefixFileUrlWithBackendUrl)(y.menuLogo.url)}:y.menuLogo}}}),dt=(0,At.useMutation)(y=>O("/admin/project-settings",y,{headers:{"Content-Type":"multipart/form-data"}}),{onError(y){s({type:"warning",message:E(y)})},async onSuccess(y){const{menuLogo:nt,authLogo:b}=y;j({menuLogo:nt?.url,authLogo:b?.url}),nt?.rawFile&&i("didChangeLogo",{logo:"menu"}),b?.rawFile&&i("didChangeLogo",{logo:"auth"}),s({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),ct=y=>{y.preventDefault(),dt.mutate(mn(e.current.getValues()))};return F?(0,n.jsxs)(gt.A,{children:[(0,n.jsx)(U.SettingsPageTitle,{name:"Application"}),(0,n.jsx)(pt.o,{children:tt?(0,n.jsx)(ht.a,{children:a({id:"Settings.application.isLoading",defaultMessage:"Loading"})}):(0,n.jsxs)("form",{onSubmit:ct,children:[(0,n.jsx)(Et.T,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:G&&(0,n.jsx)(f.z,{type:"submit",startIcon:(0,n.jsx)(bt.Z,{}),children:a({id:"global.save",defaultMessage:"Save"})})}),(0,n.jsx)(V.D,{children:(0,n.jsxs)(M.k,{direction:"column",alignItems:"stretch",gap:6,children:[(0,n.jsxs)(M.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(r.Z,{variant:"delta",as:"h3",children:a({id:"global.details",defaultMessage:"Details"})}),(0,n.jsxs)(_.r,{gap:5,as:"dl",children:[(0,n.jsxs)(H.P,{col:6,s:12,children:[(0,n.jsx)(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})}),(0,n.jsxs)(M.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsxs)(r.Z,{children:["v",z]}),I&&(0,n.jsx)(Ct.r,{href:`https://github.com/strapi/strapi/releases/tag/${A}`,isExternal:!0,endIcon:(0,n.jsx)(Rt.Z,{}),children:a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})})]})]}),(0,n.jsxs)(H.P,{col:6,s:12,children:[(0,n.jsx)(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.edition-title",defaultMessage:"current plan"})}),(0,n.jsxs)(M.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsx)(r.Z,{children:a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:g})}),(0,n.jsx)(Ct.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:(0,n.jsx)(Rt.Z,{}),children:a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})})]})]}),(0,n.jsxs)(H.P,{col:6,s:12,children:[(0,n.jsx)(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.node-version",defaultMessage:"node version"})}),(0,n.jsx)(r.Z,{as:"dd",children:x})]}),(0,n.jsx)(F,{})]})]}),K&&q&&(0,n.jsx)(Lt,{canUpdate:G,ref:e,projectSettingsStored:q})]})})]})})]}):null};function En(e){return e.filter((s,i,a)=>a.findIndex(h=>h.key===s.key)===i)}function xn(){const{settingId:e}=(0,lt.UO)(),{settings:s}=(0,U.useStrapiApp)(),{formatMessage:i}=(0,N.Z)(),{isLoading:a,menu:h}=qt(),O=(0,X.p)(nn,async()=>(await t.e(185).then(t.bind(t,10185))).ROUTES_EE,{combine(E,g){return[...E,...g]},defaultValue:[]}),j=l.useMemo(()=>En(O.map(({to:E,Component:g,exact:A})=>(0,X.d)(g,E,A))),[O]),P=Object.values(s).flatMap(E=>{const{links:g}=E;return g.map(A=>(0,X.d)(A.Component,A.to,A.exact||!1))});return a?(0,n.jsx)(U.LoadingIndicatorPage,{}):e?(0,n.jsxs)(gt.A,{sideNav:(0,n.jsx)(Bt,{menu:h}),children:[(0,n.jsx)(Ft.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),(0,n.jsxs)(lt.rs,{children:[(0,n.jsx)(lt.AW,{path:"/settings/application-infos",component:hn,exact:!0}),j,P]})]}):(0,n.jsx)(lt.l_,{to:"/settings/application-infos"})}},53917:(R,D,t)=>{"use strict";t.d(D,{A:()=>r});var n=t(56940),l=t(19681),u=t(65094);const m=(0,l.default)(u.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:d})=>d?"auto 1fr":"1fr"};
`,p=(0,l.default)(u.x)`
  overflow-x: hidden;
`,r=({sideNav:d,children:c})=>(0,n.jsxs)(m,{hasSideNav:Boolean(d),children:[d,(0,n.jsx)(p,{paddingBottom:10,children:c})]})},1822:(R,D,t)=>{"use strict";t.d(D,{m:()=>r});var n=t(56940),l=t(19681),u=t(78054);const m=`${232/16}rem`,p=(0,l.default)(u.r)`
  width: ${m};
  background: ${({theme:d})=>d.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:d})=>d.colors.neutral200};
  z-index: 1;
`,r=({ariaLabel:d,...c})=>(0,n.jsx)(p,{"aria-label":d,as:"nav",...c})},78200:(R,D,t)=>{"use strict";t.d(D,{p:()=>C});var n=t(56940),l=t(75937),u=t(45216),m=t(19681),p=t(52958),r=t(55786);const d=B=>{const W=(0,l.useRef)();return(0,l.useEffect)(()=>{W.current=B}),W.current};var c=t(43669),v=t(65094),M=t(49685),f=t(94224),T=t(66041),L=t(74065),Z=t(24091);const S=(0,m.default)(c.i)`
  width: ${24/16}rem;
  background-color: ${({theme:B})=>B.colors.neutral200};
`,C=({as:B="h2",label:W,searchLabel:$="",searchable:J=!1,onChange:st=()=>{},value:w="",onClear:et=()=>{},onSubmit:Q=()=>{},id:ot})=>{const[Y,at]=(0,l.useState)(!1),it=d(Y),mt=(0,r.M)(ot),_=(0,l.useRef)(void 0),H=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{Y&&_.current&&_.current.focus(),it&&!Y&&H.current&&H.current.focus()},[Y,it]);const gt=()=>{at(V=>!V)},pt=V=>{et(V),_.current.focus()},ht=V=>{V.relatedTarget?.id!==mt&&at(!1)},Et=V=>{V.key===p.y.ESCAPE&&at(!1)};return Y?(0,n.jsxs)(v.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,n.jsx)(M.U,{children:(0,n.jsx)(f.w,{name:"searchbar",value:w,onChange:st,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Et,ref:_,onBlur:ht,onClear:pt,onSubmit:Q,clearLabel:"Clear",size:"S",children:$})}),(0,n.jsx)(v.x,{paddingLeft:2,paddingTop:4,children:(0,n.jsx)(S,{})})]}):(0,n.jsxs)(v.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,n.jsxs)(T.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(L.Z,{variant:"beta",as:B,children:W}),J&&(0,n.jsx)(Z.h,{ref:H,onClick:gt,label:$,icon:(0,n.jsx)(u.Z,{})})]}),(0,n.jsx)(v.x,{paddingTop:4,children:(0,n.jsx)(S,{})})]})}},37229:(R,D,t)=>{"use strict";t.d(D,{E:()=>T});var n=t(56940),l=t(75937),u=t(27709),m=t(19681),p=t(65094),r=t(74065),d=t(66041),c=t(47599);const v=(0,m.default)(p.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:L})=>L.colors.neutral800};
  svg > * {
    fill: ${({theme:L})=>L.colors.neutral600};
  }

  &.active {
    ${({theme:L})=>`
      background-color: ${L.colors.primary100};
      border-right: 2px solid ${L.colors.primary600};
      svg > * {
        fill: ${L.colors.primary700};
      }
      ${r.Z} {
        color: ${L.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,M=(0,m.default)(u.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:L,$active:Z})=>Z?L.colors.primary600:L.colors.neutral600};
  }
`,f=m.default.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,T=l.forwardRef(({children:L,icon:Z=null,withBullet:S=!1,as:C=c.f,isSubSectionChild:B=!1,...W},$)=>(0,n.jsxs)(v,{as:C,icon:Z,background:"neutral100",paddingLeft:B?9:7,paddingBottom:2,paddingTop:2,ref:$,...W,children:[(0,n.jsxs)(d.k,{children:[Z?(0,n.jsx)(f,{children:Z}):(0,n.jsx)(M,{}),(0,n.jsx)(p.x,{paddingLeft:2,children:(0,n.jsx)(r.Z,{as:"span",children:L})})]}),S&&(0,n.jsx)(p.x,{as:d.k,paddingRight:4,children:(0,n.jsx)(M,{$active:!0})})]}))},26874:(R,D,t)=>{"use strict";t.d(D,{D:()=>Z});var n=t(56940),l=t(75937),u=t(19681),m=t(70754),p=t(66041),r=t(65094),d=t(74065);const c=(0,u.default)(p.k)`
  border: none;
  padding: 0;
  background: transparent;
`,v=u.default.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:S})=>S?"0deg":"180deg"});
`,M=({collapsable:S=!1,label:C,onClick:B=()=>{},ariaExpanded:W,ariaControls:$})=>S?(0,n.jsxs)(c,{as:"button",onClick:B,"aria-expanded":W,"aria-controls":$,textAlign:"left",children:[(0,n.jsx)(r.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:C})}),S&&(0,n.jsx)(v,{rotated:W,children:(0,n.jsx)(m.Z,{"aria-hidden":!0})})]}):(0,n.jsx)(c,{children:(0,n.jsx)(r.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:C})})});var f=t(55786),T=t(38592);const L=(0,u.default)(r.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:S})=>S.colors.neutral500};
    }
  }
`,Z=({collapsable:S=!1,label:C,badgeLabel:B,children:W,id:$})=>{const[J,st]=(0,l.useState)(!0),w=(0,f.M)($),et=()=>{st(Q=>!Q)};return(0,n.jsxs)(p.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,n.jsx)(L,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,n.jsxs)(r.x,{position:"relative",paddingRight:B?6:0,children:[(0,n.jsx)(M,{onClick:et,ariaExpanded:J,ariaControls:w,collapsable:S,label:C}),B&&(0,n.jsx)(T.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:B})]})}),(!S||J)&&(0,n.jsx)("ol",{id:w,children:l.Children.map(W,(Q,ot)=>(0,n.jsx)("li",{children:Q},ot))})]})}},57373:(R,D,t)=>{"use strict";t.d(D,{Z:()=>p});var n=t(56940),l=t(75937),u=t(65094),m=t(66041);const p=({children:r,spacing:d=2,horizontal:c=!1,...v})=>(0,n.jsx)(u.x,{paddingTop:2,paddingBottom:4,children:(0,n.jsx)(m.k,{as:"ol",gap:d,direction:c?"row":"column",alignItems:c?"center":"stretch",...v,children:l.Children.map(r,(M,f)=>(0,n.jsx)("li",{children:M},f))})})}}]);
